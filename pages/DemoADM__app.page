<apex:page controller="DemoADM.appController" docType="html-5.0" standardStylesheets="false">
    <html xmlns:v-bind="http://vue.org" xmlns:v-on="http://vue.org">
        <head>
            
            <!--

* Version 3.0
* Update
*  - Allow blank value for all functionality
*  - Bug fixed

* Version 2.4
* Update
*  - Allow blank value
*  - Change API version from v43.0 to v46.0

* Version 2.3
* Update
*  - (Data Gen API)

* Version 2.2
* Update
*  - Add property versionNumber

* Version 2.1
* Update
*  - Bug fix for problem of validation for Description
*  - Bug fix for problem on importing CSV to project

* Version 2.0
* Update
*  - Add CSV import to new project feature
*  - Add record Type - rangeNumber, rangeRelativeDate, rangeRelativeDatetime, rangeDate, rangeDatetime

* Version 1.39
* Update
*  - Add sparkline chart on STEP 3 trend page
*  - Bug fix when deleting records

* Version 1.38
* Update
*  - Change to make some params can be editted on setting Advanced settings

* Version 1.37
* Update
*  - Add functionality to exporting to Salesforce Object
*  - Add functionality to switch Edit mode by keyboard CTRL(CMD) + E at STEP 1 & 2
*  - Add some function: row(), val('*FieldApiName*')
*  - Add HINT DIALOG
*  - Add feature to disable browser back
*  - Change Api version 42.0 => 43.0
*  - Fix bug in deleting record
*  - Fix CSV import performance
-->
            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"/>
            <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"/>
            <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet"/>
            <link href="{!$Resource.DemoADM__vuetify_css}" rel="stylesheet"/>
            <link rel="stylesheet" href="{!$Resource.DemoADM__mdi + '/MaterialDesign-Webfont-master/css/materialdesignicons.min.css'}" media="all"/>
            <link rel="stylesheet" href="{!$Resource.DemoADM__app_css}"/>
            <style>
                .application {
                font-family: Roboto,"Hiragino Kaku Gothic Pro W3", "ヒラギノ角ゴ Pro W3", "Meiryo", "メイリオ", "Noto Sans Japanese Regular",sans-serif;
                }
                .my-grey-table .v-table {
                background-color: transparent;
                }
                .my-pn-toolbar .v-toolbar__content {
                padding: 0;
                }
            </style>
            <!-- Google Tag Manager -->
            <script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-WP3FZ7T');
            
            </script>
            <script>
             dataLayer.push({appId:'insights_designer'});
            </script>
			<!-- End Google Tag Manager -->
            
            <script>            
            // GLOBAL CONST
            var ID_API_VERSION = '46.0';
            var SETTING_OBJECT = 'Setting__c';
            var ACCESS_TOKEN = '{!$API.Session_Id}';
            var ENDPOINT = 'https://' + normalizeApiHost(window.location.host) + '/';
            var VERSION = 'services/data/v' + ID_API_VERSION + '/';
            var VERSION_FOR_SOAP = 'services/Soap/m/' + ID_API_VERSION + '/';
            function normalizeApiHost(apiHost) {
                if (!(/^\w+\.my\.salesforce\.com$/.test(apiHost))){
                    var m = /(\w+)\.(visual\.force|salesforce)\.com$/.exec(apiHost);
                    if (m) {
                        apiHost = m[1] + ".salesforce.com";
                    }
                }
                return apiHost;
            }   
            
            // REMOTE ACTIONS
            var remoteAction = {
                getAllTemplate : '{!$RemoteAction.appController.getAllTemplate}',
                getTemplate : '{!$RemoteAction.appController.getTemplate}',
                newTemplate : '{!$RemoteAction.appController.newTemplate}',
                deleteTemplate : '{!$RemoteAction.appController.deleteTemplate}',
                star : '{!$RemoteAction.appController.star}',
                usage : '{!$RemoteAction.appController.usage}',
                newProject: '{!$RemoteAction.appController.newProject}',
                newProjectWithData: '{!$RemoteAction.appController.newProjectWithData}',
                changeProject: '{!$RemoteAction.appController.changeProject}',
                deleteProject: '{!$RemoteAction.appController.deleteProject}',
                getAllProject : '{!$RemoteAction.appController.getAllProject}',
                saveConfig: '{!$RemoteAction.appController.saveConfig}',
                getConfig: '{!$RemoteAction.appController.getConfig}',
                newDatasetMetadata: '{!$RemoteAction.appController.newDatasetMetadata}',
                newDataPart: '{!$RemoteAction.appController.newDataPart}',
                startImport: '{!$RemoteAction.appController.startImport}',
                getLang: '{!$RemoteAction.appController.getLang}',
                getUserEmail: '{!$RemoteAction.appController.getUserEmail}'
            };
            
            // IMAGE RESOURCES
            var at_img = '{!$Resource.industry + "/at.jpg"}';
            var ot_img = '{!$Resource.industry + "/ot.jpg"}';
            var fn_img = '{!$Resource.industry + "/fn.jpg"}';
            var np_img = '{!$Resource.industry + "/np.jpg"}';
            var tr_img = '{!$Resource.industry + "/tr.jpg"}';
            var rt_img = '{!$Resource.industry + "/rt.jpg"}';
            var re_img = '{!$Resource.industry + "/re.jpg"}';
            var md_img = '{!$Resource.industry + "/md.jpg"}';
            var mn_img = '{!$Resource.industry + "/mn.jpg"}';
            var hl_img = '{!$Resource.industry + "/hl.jpg"}';
            var gv_img = '{!$Resource.industry + "/gv.jpg"}';
            var ed_img = '{!$Resource.industry + "/ed.jpg"}';
            var cm_img = '{!$Resource.industry + "/cm.jpg"}';
            
            </script>
            <title>Insights Designer v3</title>
        </head>
        <body style="background-color:#fafafa;">
            <div id="app" v-cloak="true">
                <!-- Vue Scope -->
                <v-app>
                    <div v-if="isEditPage == false" v-bind:class="'welcome welcome' + page.welcome.position">
                        
                        <!-- Welcome -->
                        <v-sheet v-bind:dark="true" class="px-2 my-brand" height="100vh">
                            <v-container v-bind:fill-height="true">
                                
                                <v-layout v-bind:align-center="true">
                                    <v-flex class="pb-5">
                                        <h3 class="display-3 py-4">Insights Designer <span class="title"> v{{constant.version}}</span></h3>
                                        <span class="subheading">Demo tool for Einstein Analytics / Einstein Discovery. Insights Designer can generate realistic mock data including massive rows and rich insights.</span>
                                        <v-divider class="my-4 transparent"></v-divider>
                                        
                                        <div class="mt-3">
                                            
                                            <v-btn
                                                   class="mr-2 ml-0"
                                                   color="white"
                                                   v-bind:large="true"
                                                   v-bind:outline="true"
                                                   v-on:click="openUrl('https://sfdc.co/adm')"
                                                   >
                                                <v-icon v-bind:left="true" v-bind:dark="true">library_books</v-icon>
                                                Quip Document
                                            </v-btn>
                                            
                                            <v-btn
                                                   class="mx-2 blue--text text--lighten-2"
                                                   color="white"
                                                   v-bind:large="true"
                                                   v-bind:depressed="true"
                                                   v-on:click="clickedOpenNewProjectFromTemplate"
                                                   >
                                                <v-icon v-bind:left="true" v-bind:dark="true">play_arrow</v-icon>
                                                Get Started With Template
                                            </v-btn>
                                            
                                        </div>
                                        <div class="text-xs-center pa-4" style="position:absolute;bottom:0;left:0;right:0;">
                                            <v-btn v-bind:flat="true" v-bind:icon="true" v-bind:large="true" class="welcome-next-btn" v-on:click="page.welcome.position = 1">
                                                <v-icon v-bind:large="true">keyboard_arrow_down</v-icon>
                                            </v-btn>
                                        </div>
                                    </v-flex>
                                </v-layout>
                            </v-container>
                        </v-sheet>
                        <!-- Welcome -->
                        
                        
                        <!-- Project List -->
                        <v-content style="height:100vh;overflow-y: scroll;">
                            <v-container class="pt-4">
                                <v-layout v-bind:align-center="true">
                                    <v-flex v-bind:xs9="true" class="text-xs-left">
                                        <v-btn v-on:click="page.welcome.position = 0" v-bind:flat="true" color="grey lighten-1">
                                            About Insights Designer
                                        </v-btn>
                                        <v-btn v-bind:flat="true" color="grey lighten-1" v-on:click.stop="openAsNewWindow">
                                            Full Screen
                                        </v-btn>
                                        
                                    </v-flex>
                                    <v-flex v-bind:xs3="true" class="text-xs-right">
                                        <v-menu v-bind:offset-y="true">
                                            <v-btn slot="activator" color="cyan" v-bind:flat="true">
                                                <v-icon v-bind:left="true">add</v-icon>
                                                New Project
                                            </v-btn>
                                            <v-list>
                                                <v-list-tile v-on:click="openBlankProject">
                                                    <v-list-tile-title>New Project</v-list-tile-title>
                                                </v-list-tile>
                                                <v-list-tile v-on:click="clickedOpenNewProjectFromTemplate">
                                                    <v-list-tile-title>New Project From Template</v-list-tile-title>
                                                </v-list-tile>
                                                <v-list-tile v-on:click="clickedOpenNewProjectFromCsv">
                                                    <v-list-tile-title>New Project From Dataset CSV</v-list-tile-title>
                                                </v-list-tile>
                                            </v-list>
                                        </v-menu>                                    
                                    </v-flex>
                                </v-layout>
                                
                                
                                <v-card>
                                    <v-card-text>
                                        <v-list v-if="apexCallout.hasOwnProperty('getAllProject')">
                                            <v-subheader>Projects</v-subheader>
                                            <v-list-tile v-for="item in apexCallout.getAllProject" v-bind:key="'project-list-' + item.Id" v-bind:avatar="true" v-on:click="dummy">
                                                <v-list-tile-avatar v-on:click="openProject(item.Id, item.DemoADM__Title__c, item.DemoADM__Memo__c, false)">
                                                    <v-icon class="light-blue darken-1 white--text">timeline</v-icon>
                                                </v-list-tile-avatar>
                                                <v-list-tile-content v-on:click="openProject(item.Id, item.DemoADM__Title__c, item.DemoADM__Memo__c, false)">
                                                    <v-list-tile-title>{{ item.DemoADM__Title__c  }}</v-list-tile-title>
                                                    <v-list-tile-sub-title>{{ item.DemoADM__Memo__c }}</v-list-tile-sub-title>
                                                </v-list-tile-content>
                                                <v-list-tile-action>
                                                    <v-menu v-bind:offset-y="true">
                                                        <v-btn slot="activator" v-bind:icon="true" v-bind:ripple="true">
                                                            <v-icon color="grey lighten-1">more_vert</v-icon>
                                                        </v-btn>
                                                        <v-list>
                                                            <v-list-tile v-on:click="clickedOpenEditProject(item.Id, item.DemoADM__Title__c, item.DemoADM__Memo__c)">
                                                                <v-list-tile-title>Edit Project</v-list-tile-title>
                                                            </v-list-tile>
                                                        </v-list>
                                                    </v-menu>                                        
                                                </v-list-tile-action>
                                            </v-list-tile>
                                        </v-list>                                         
                                    </v-card-text>
                                </v-card>
                                
                            </v-container>
                        </v-content>
                        <!-- Project List -->
                        
                        
                    </div>
                    <template v-else-if="isEditPage == true">
                        
                        
                        <!-- STEPPER-->
                        <v-stepper v-model="step.now" v-bind:non-linear="true" class="elevation-0 myheader" style="background-color:transparent;">
                            <v-stepper-header class="white">
                                <template v-for="(elm, i) in step.steps">
                                    <v-stepper-step 
                                                    v-bind:key="'step-' + i"
                                                    v-bind:step="elm.id"
                                                    v-bind:editable="stepEditable[elm.id]" 
                                                    v-bind:rules="[() => isValidStep[elm.id]]"
                                                    >
                                        {{elm.title}}
                                        <small>
                                            <template v-if="!isValidStep[elm.id]">{{elm.message}}</template>
                                        </small></v-stepper-step>
                                    <v-divider v-if="i < (step.steps.length - 1)"></v-divider>
                                </template>
                            </v-stepper-header>
                        </v-stepper>
                        <!-- STEPPER-->
                        
                    </template>
                    <v-content v-if="isEditPage == true" v-bind:class="'mycontent object-edit-' + objectTab.editMode">
                        <v-container v-bind:fill-height="true" v-bind:fluid="true" v-bind:justify-start="true">
                            <v-layout v-bind:row="true" v-bind:wrap="true">
                                <v-flex v-bind:xs12="true">
                                    
                                    <transition name="fade" mode="out-in" v-bind:appear="true">
                                        <div key="step1-3" v-if="step.now != 4">
                                            
                                            
                                            <!-- STEP 1-3 Tab-->
                                            <v-tabs
                                                    key="tabs"
                                                    v-model="objectTab.active"
                                                    v-bind:fixed-tabs="true"
                                                    color="grey lighten-5"
                                                    v-bind:show-arrows="true"
                                                    slider-color="indigo"
                                                    class="step1to3tab"
                                                    >
                                                <v-tab
                                                       v-for="(n, i) in orderedRelations"
                                                       v-bind:key="n.id"
                                                       v-bind:ripple="true"
                                                       v-bind:href="'#' + n.id"
                                                       >
                                                    <template v-if="step.now == 3">
                                                        <v-tooltip v-bind:bottom="true">
                                                            <span slot="activator">{{ meta[n.id].alias }} ({{allRules[n.id].ruleCount}})</span>
                                                            <template v-if="allRules[n.id].ruleCount > 1">
                                                                <span>{{allRules[n.id].ruleCount}} Trends</span>
                                                            </template>
                                                            <template v-else-if="true">
                                                                <span>{{allRules[n.id].ruleCount}} Trend</span>
                                                            </template>
                                                        </v-tooltip>
                                                        
                                                    </template>
                                                    <template v-else-if="step.now == 1 && objectTab.editMode">
                                                            {{meta[n.id].alias}}
                                                        
                                                    </template>
                                                    <template v-else-if="step.now == 1">
                                                        <template v-if="step1InvalidCount[n.id] == 0">
                                                            <v-tooltip v-bind:bottom="true">
                                                                <span slot="activator">{{ meta[n.id].alias }} ({{Object.keys(meta[n.id].fields).length}})</span>
                                                                <template v-if="Object.keys(meta[n.id].fields).length > 1">
                                                                    <span>{{Object.keys(meta[n.id].fields).length}} Fields</span>
                                                                </template>
                                                                <template v-else-if="true">
                                                                    <span>{{Object.keys(meta[n.id].fields).length}} Field</span>
                                                                </template>
                                                            </v-tooltip>                                                           
                                                        </template>
                                                        <template v-else-if="true">
                                                            <v-badge color="red">
                                                                <span slot="badge">{{step1InvalidCount[n.id]}}</span>
                                                                <span>{{ meta[n.id].alias }} ({{Object.keys(meta[n.id].fields).length}})</span>
                                                            </v-badge>                                                            
                                                        </template>
                                                    </template>
                                                    <template v-else-if="step.now == 2">
                                                        <template v-if="Object.keys(meta[n.id].data).length == 0">
                                                            <v-badge color="warning">
                                                                <span slot="badge">!</span>
                                                                <span>{{ meta[n.id].alias }} (0)</span>
                                                            </v-badge>
                                                        </template>
                                                        <template v-else-if="step2InvalidCount[n.id] == 0">
                                                            <v-tooltip v-bind:bottom="true">
                                                                <span slot="activator">{{ meta[n.id].alias }} ({{Object.keys(meta[n.id].data).length}})</span>
                                                                <template v-if="Object.keys(meta[n.id].data).length > 1">
                                                                    <span>{{Object.keys(meta[n.id].data).length}} Records</span>
                                                                </template>
                                                                <template v-else-if="true">
                                                                    <span>{{Object.keys(meta[n.id].data).length}} Record</span>
                                                                </template>
                                                            </v-tooltip>
                                                        </template>
                                                        <template v-else-if="true">
                                                            <v-badge color="red">
                                                                <span slot="badge">{{step2InvalidCount[n.id]}}</span>
                                                                <span>{{ meta[n.id].alias }} ({{Object.keys(meta[n.id].data).length}})</span>
                                                            </v-badge>                                                            
                                                        </template>
                                                    </template>
                                                    <template v-else-if="true">
                                                        {{ meta[n.id].alias }}
                                                    </template>                                
                                                </v-tab>
                                                
                                            </v-tabs>
                                            
                                            <!-- STEP 1-3 Tab-->
                                            
                                            
                                            <transition name="fade" mode="out-in" v-bind:appear="true">
                                                
                                                
                                                
                                                <!-- STEP 1 Field Sets -->
                                                <v-container v-if="step.now == 1" key="step1" v-bind:fluid="true" v-bind:grid-list-md="true" class="mypb120">
                                                                                           
                                                    <v-layout v-bind:row="true" v-bind:wrap="true">
                                                        <v-flex v-bind:xs12="true">
                                                            <v-card v-if="objectTab.active == ''">
                                                                <v-card-text class="text-xs-center">
                                                                    <p>No Field Sets</p>
                                                                </v-card-text>
                                                            </v-card>
                                                            <v-card v-else-if="true">
                                                                <v-card-text>
                                                                    <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                    <v-flex v-bind:xs4="true">
                                                                        <template v-if="objectTab.editMode && objectTab.active != 'newobject' && objectTab.active != ''">
                                                                            <v-btn v-bind:disabled="!deletableObject[activeTabObjectId]" v-bind:icon="true" v-bind:fab="true" v-bind:small="true"  color="grey lighten-4" v-on:click="deleteObject(activeTabObjectId)">
                                                                                <v-icon color="error">delete_outline</v-icon>
                                                                            </v-btn>
                                                                        </template>
                                                                    </v-flex>
                                                                        <v-flex v-bind:xs4="true">
                                                                            <v-text-field v-if="objectTab.editMode" v-model="meta[activeTabObjectId].alias" label="Alias" v-bind:hide-details="true"/>
                                                                        </v-flex>
                                                                    <v-flex v-bind:xs4="true">
                                                                    <div class="text-xs-right mb-1">
                                                                        <template v-if="!objectTab.editMode">
                                                                            <v-tooltip v-bind:bottom="true">
                                                                                <v-btn slot="activator" v-bind:fab="true" v-bind:small="true" v-bind:icon="true" color="grey lighten-4" v-on:click="objectTab.editMode = !objectTab.editMode">
                                                                                    <v-icon v-bind:small="true" v-bind:dark="true" color="cyan">edit</v-icon>
                                                                                </v-btn>
                                                                                <span>Edit Field Set</span>
                                                                            </v-tooltip>
                                                                        </template>
                                                                        <template v-else-if="objectTab.editMode">
                                                                            <v-btn v-bind:fab="true" v-bind:small="true" v-bind:icon="true" color="cyan" v-on:click="objectTab.editMode = !objectTab.editMode" class="white--text">
                                                                                <v-icon v-bind:small="true" v-bind:dark="true">check</v-icon>
                                                                            </v-btn>
                                                                        </template>
                                                                    </div>
                                                                    </v-flex>
                                                                        <v-flex v-bind:xs12="true">
                                                                    <v-data-table
                                                                                  v-bind:headers="mheaders"
                                                                                  v-bind:items="mitems"
                                                                                  v-bind:hide-actions="true"
                                                                                  >
                                                                        <template slot="headers" slot-scope="props">
                                                                            <tr>
                                                                                <th 
                                                                                    v-for="header in props.headers"
                                                                                    v-bind:key="header.value">
                                                                                    
                                                                                    {{header.text}}
                                                                                    
                                                                                </th>
                                                                            </tr>
                                                                        </template>
                                                                        <template slot="items" slot-scope="row">
                                                                            <td v-for="(i, index) in mheaders" v-bind:class="'text-xs-' + i.align + ' ' +  (step1TdClass.hasOwnProperty(row.item.fid) ? step1TdClass[row.item.fid][i.value]: '')">
                                                                                
                                                                                
                                                                                <template v-if="!objectTab.editMode">
                                                                                    <span>
                                                                                        <template v-if="index == 0">
                                                                                            <template v-if="meta[activeTabObjectId].keyField == row.item.fid">
                                                                                                <v-icon color="indigo lighten-2" v-bind:small="true">vpn_key</v-icon>
                                                                                            </template>
                                                                                        </template>
                                                                                        <template v-else-if="i.value == 'format' && meta[activeTabObjectId].fields[row.item.fid].type == 'String'">
                                                                                            ---
                                                                                        </template>
                                                                                        <template v-else-if="i.value == 'format' && meta[activeTabObjectId].fields[row.item.fid].type == 'Number'">
                                                                                            Precision: 18,  Decimal Places: {{meta[activeTabObjectId].fields[row.item.fid][i.value]}}
                                                                                        </template>
                                                                                        <template v-else-if="true">
                                                                                            {{meta[activeTabObjectId].fields[row.item.fid][i.value]}}
                                                                                        </template>
                                                                                    </span>
                                                                                </template>
                                                                                <template v-else-if="objectTab.editMode">
                                                                                    <template v-if="index == 0">
                                                                                        <template v-if="meta[activeTabObjectId].keyField == row.item.fid">
                                                                                            <v-switch
                                                                                                      v-model="meta[activeTabObjectId].keyField" 
                                                                                                      v-bind:multiple="false"
                                                                                                      v-bind:readonly="true"
                                                                                                      v-bind:input-value="row.item.fid"
                                                                                                      color="indigo"
                                                                                                      ></v-switch>   
                                                                                        </template>
                                                                                        <template v-else-if="true">
                                                                                            <v-switch
                                                                                                      v-on:change="changedKeyField(activeTabObjectId, row.item.fid)" 
                                                                                                      value="false"
                                                                                                      color="cyan"
                                                                                                      ></v-switch> 
                                                                                            
                                                                                        </template>
                                                                                    </template>
                                                                                    <template v-else-if="index == (mheaders.length - 1)">
                                                                                        <template v-if="meta[activeTabObjectId].keyField != row.item.fid">
                                                                                            <v-btn v-bind:flat="true" v-bind:small="true" v-bind:icon="true" color="red" v-on:click="clickedDeleteField(row.item.fid)">
                                                                                                <v-icon v-bind:small="true">remove_circle_outline</v-icon>
                                                                                            </v-btn>
                                                                                        </template>
                                                                                    </template>
                                                                                    <template v-else-if="true">
                                                                                        <v-text-field
                                                                                                      v-if="i.value != 'type' && i.value != 'format'"
                                                                                                      v-model="meta[activeTabObjectId].fields[row.item.fid][i.value]"
                                                                                                      v-bind:hide-details="true"
                                                                                                      v-bind:solo="true"
                                                                                                      >
                                                                                        </v-text-field>
                                                                                        <v-select
                                                                                                  v-if="i.value == 'type'"
                                                                                                  v-bind:items="page.newField.typeOptions"
                                                                                                  v-model="meta[activeTabObjectId].fields[row.item.fid][i.value]"
                                                                                                  v-bind:solo="true"
                                                                                                  v-bind:hide-details="true"
                                                                                                  item-value="text"
                                                                                                  v-on:change="typeChanged($event, 'standard', activeTabObjectId, row.item.fid)"
                                                                                                  ></v-select>
                                                                                        <template v-if="i.value == 'format'">
                                                                                            <template v-if="meta[activeTabObjectId].fields[row.item.fid].type == 'Number'">
                                                                                                <v-select
                                                                                                          v-bind:items="page.newField.scaleOptions"
                                                                                                          v-model="meta[activeTabObjectId].fields[row.item.fid].format"
                                                                                                          v-bind:solo="true"
                                                                                                          item-text="text"
                                                                                                          item-value="value"
                                                                                                          v-bind:hide-details="true"
                                                                                                          ></v-select>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].fields[row.item.fid].type == 'Date'">
                                                                                                <v-select
                                                                                                          v-bind:items="page.newField.dateOptions"
                                                                                                          v-model="meta[activeTabObjectId].fields[row.item.fid].format"
                                                                                                          v-bind:solo="true"
                                                                                                          item-value="text"
                                                                                                          v-bind:hide-details="true"
                                                                                                          ></v-select>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].fields[row.item.fid].type == 'DateTime'">
                                                                                                <v-select 
                                                                                                          v-bind:items="page.newField.dateTimeOptions"
                                                                                                          v-model="meta[activeTabObjectId].fields[row.item.fid].format"
                                                                                                          v-bind:solo="true"
                                                                                                          item-value="text"
                                                                                                          v-bind:hide-details="true"
                                                                                                          ></v-select>
                                                                                            </template>
                                                                                            <template v-else-if="true">
                                                                                                ---
                                                                                            </template>
                                                                                        </template>
                                                                                        
                                                                                    </template>
                                                                                    
                                                                                </template>
                                                                                
                                                                            </td>
                                                                        </template>
                                                                        <template slot="footer">
                                                                            <td colspan="100%" style="height:20px;">
                                                                            </td>
                                                                        </template>
                                                                    </v-data-table>
                                                                        </v-flex>
                                                                        <v-flex v-bind:xs12="true" class="text-xs-center">                                                                             
                                                                            <v-btn v-if="objectTab.editMode" color="cyan" v-bind:flat="true" v-on:click="clickedNewField"><v-icon v-bind:left="true">add</v-icon>Field</v-btn>
                                                                        </v-flex>
                                                                    </v-layout>
                                                                </v-card-text>
                                                            </v-card>
                                                            <div class="text-xs-right" style="position:relative;height:0;width:100%;">
                                                                <v-tooltip v-bind:bottom="true">
                                                                     <v-menu v-if="step.now == 1" slot="activator" v-bind:disabled="objectTab.editMode" v-bind:offset-y="true" v-bind:offset-overflow="true">
                                                                    <v-btn
                                                                           slot="activator"
                                                                           color="cyan"
                                                                           v-bind:dark="true"
                                                                           v-bind:absolute="true"
                                                                           v-bind:top="true"
                                                                           v-bind:small="true"
                                                                           v-bind:right="true"
                                                                           v-bind:fab="true"
                                                                           v-bind:ripple="true"
                                                                           v-bind:disabled="objectTab.editMode"
                                                                           style="right: -20px;    box-shadow: none;"
                                                                           >
                                                                        <v-icon>add</v-icon>
                                                                    </v-btn>
                                                                    
                                                                    <v-list>
                                                                        <v-list-tile v-on:click="clickedNewFieldSet">
                                                                            <!-- createNewObject to clickedNewFieldSet-->
                                                                            <v-list-tile-title>New Field Set</v-list-tile-title>
                                                                        </v-list-tile>
                                                                        <v-list-tile v-on:click="openLoadCsvDialog">
                                                                            <v-list-tile-title>New Field Set &amp; Records (CSV Import)</v-list-tile-title>
                                                                        </v-list-tile>
                                                                        <v-list-tile v-on:click="openDataGenDialog">
                                                                            <v-list-tile-title>New Field Set &amp; Records (Data Gen API)</v-list-tile-title>
                                                                        </v-list-tile>
                                                                    </v-list>
                                                                </v-menu>
                                                                    <span>New Field Set</span>
                                                                </v-tooltip>
                                                            </div>
                                                        </v-flex>
                                                    </v-layout>
                                                    
                                                </v-container>
                                                <!-- STEP 1 Field Sets -->
                                                
                                                
                                                <!-- STEP 2 Record-->
                                                <v-container v-else-if="step.now == 2" key="step2" v-bind:fluid="true" v-bind:grid-list-md="true" class="mypb120">
                                                    <v-layout v-bind:row="true" v-bind:wrap="true" v-resize="onResize">
                                                        <v-flex v-bind:xs12="true">
                                                            
                                                            <v-card>
                                                                <v-card-text>
                                                                    <div class="mb-3">
                                                                        <v-alert v-if="oitems.length > 100" v-bind:value="true" color="warning" icon="priority_high" v-bind:outline="true">
                                                                            <strong>{{meta[activeTabObjectId].alias}}</strong> has too much rows. Expected to be less than 100 but has {{oitems.length}}. It may affect a performance issue.
                                                                        </v-alert>
                                                                        <v-alert v-if="!(oitems.length > 0)" v-bind:value="true" color="warning" icon="priority_high" v-bind:outline="true">
                                                                            <strong>{{meta[activeTabObjectId].alias}}</strong> has no record.
                                                                        </v-alert>
                                                                    </div>
                                                                    
                                                                    <div class="text-xs-right mb-3">
                                                                        
                                                                        <template v-if="!objectTab.editMode">
                                                                            <v-tooltip v-bind:bottom="true">
                                                                                <v-btn slot="activator" v-bind:fab="true" v-bind:small="true" v-bind:icon="true" color="grey lighten-4" v-on:click="objectTab.editMode = true">
                                                                                    <v-icon v-bind:small="true" v-bind:dark="true" color="cyan">edit</v-icon>
                                                                                </v-btn>
                                                                                <span>Edit Record</span>
                                                                            </v-tooltip>
                                                                        </template>
                                                                        <template v-else-if="objectTab.editMode">
                                                                            <v-btn v-bind:fab="true" v-bind:small="true" v-bind:icon="true" color="cyan" v-on:click="clickedDoneEditRecord" class="white--text">
                                                                                <v-icon v-bind:small="true" v-bind:dark="true">check</v-icon>
                                                                            </v-btn>
                                                                        </template>
                                                                    </div>
                                                                    
                                                                    <v-data-table
                                                                                  v-bind:headers="oheaders"
                                                                                  v-bind:items="oitems"
                                                                                  v-bind:hide-actions="oitems.length <= 50"
                                                                                  v-bind:rows-per-page-items="[50,100]"
                                                                                  class="step2record-table"
                                                                                  >
                                                                        <template slot="headers" slot-scope="props">
                                                                            <tr>
                                                                                <th 
                                                                                    v-for="header in props.headers"
                                                                                    v-bind:key="header.value">
                                                                                    <template v-if="header.value == meta[activeTabObjectId].keyField">
                                                                                        
                                                                                        <v-icon color="blue-grey lighten-2" v-bind:small="true">vpn_key</v-icon> {{header.text}}
                                                                                    </template>
                                                                                    <template v-else-if="true">
                                                                                        {{header.text}} 
                                                                                    </template>
                                                                                    <template v-if="allFieldsById.hasOwnProperty(header.value)">
                                                                                    
                                                                                	<p class="indigo--text text--lighten-2">
                                                                                        <span class="indigo--text  pr-1">{{allFieldsById[header.value].name}}</span>
                                                                                        <span>(</span>
                                                                                        <span>
                                                                                        <template v-if="allFieldsById[header.value].type == 'String'">
                                                                                            String
                                                                                        </template>
                                                                                        <template v-else-if="allFieldsById[header.value].type == 'Date' || allFieldsById[header.value].type == 'DateTime'">
                                                                                            {{allFieldsById[header.value].format}}
                                                                                        </template>
                                                                                        <template v-else-if="allFieldsById[header.value].type == 'Number'">
                                                                                            <template v-if="allFieldsById[header.value].format == '0'">
                                                                                                Integer
                                                                                            </template>
                                                                                            <template v-else-if="true">
                                                                                                Decimal Place {{allFieldsById[header.value].format}}
                                                                                            </template>
                                                                                        </template>
                                                                                        </span>
                                                                                        <span>)</span>
                                                                                    </p>
                                                                                    </template>
                                                                                </th>
                                                                            </tr>
                                                                        </template>
                                                                        <template slot="items" slot-scope="row">
                                                                            <td v-bind:key="'step3r'+index" v-for="(i, index) in oheaders" v-bind:class="'justify-center text-xs-' + i.align + ' ' + step2TdClass[row.item.did][i.value]">
                                                                                <template v-if="!objectTab.editMode">
                                                                                        
                                                                                    <!-- STEP 2 Record (Display mode)-->
                                                                                    <template v-if="meta[activeTabObjectId].data[row.item.did][i.value].type !== 'static' ">
                                                                                        <v-chip color="grey lighten-3">
                                                                                            <v-avatar color="blue-grey lighten-3">
                                                                                                <v-icon color="white">{{page.record.icons[meta[activeTabObjectId].data[row.item.did][i.value].type]}}</v-icon>
                                                                                            </v-avatar>
                                                                                            <span class="grey--text text--darken-3">{{row.item[i.value] | showRecord}}</span>
                                                                                        </v-chip>
                                                                                    </template>
                                                                                    <template v-else-if="true">
                                                                                        <v-chip color="transparent">
                                                                                            <span class="grey--text text--darken-4">{{row.item[i.value] | showRecord}}</span>
                                                                                        </v-chip>
                                                                                    </template>
                                                                                    <!-- /STEP 2 Record (Display mode)-->
                                                                                    
                                                                                </template>
                                                                                <template v-if="objectTab.editMode">
                                                                                    
                                                                                    <!-- STEP 2 Record (Edit mode)-->
                                                                                    <template v-if="index == (oheaders.length - 1)">
                                                                                        <div class="layout">
                                                                                            <v-btn v-bind:flat="true" v-bind:icon="true" v-bind:disabled="recordAltering" color="cyan" v-on:click="clickedCopyRecord(row.item.did)">
                                                                                                <v-icon v-bind:small="true">file_copy</v-icon>
                                                                                            </v-btn>
                                                                                            <v-btn v-bind:flat="true" v-bind:icon="true" v-bind:disabled="recordAltering" color="red" v-on:click="clickedDeleteRecord(row.item.did)">
                                                                                                <v-icon v-bind:small="true">remove_circle_outline</v-icon>
                                                                                            </v-btn>
                                                                                        </div>
                                                                                    </template>
                                                                                    <template v-else-if="true">
                                                                                        <v-layout>
                                                                                            <template v-if="page.record.typeOptions.hasOwnProperty(meta[activeTabObjectId].fields[i.value].type)">
                                                                                                <v-flex v-bind:xs2="true">
                                                                                                    <v-select v-bind:items="page.record.typeOptions[meta[activeTabObjectId].fields[i.value].type]"
                                                                                                              v-model="meta[activeTabObjectId].data[row.item.did][i.value].type"
                                                                                                              v-on:change="recordTypeChanged($event, activeTabObjectId, row.item.did, i.value)"
                                                                                                              v-bind:solo="true">
                                                                                                    
                                                                                                        <template slot="selection" slot-scope="data">
                                                                                                            <v-icon color="grey darken-4">{{page.record.icons[data.item.value]}}</v-icon>                                                                                                    
                                                                                                        </template>
                                                                                                        <template slot="item" slot-scope="data">
                                                                                                            <v-list-tile-avatar>
                                                                                                                <v-icon color="grey darken-4">{{page.record.icons[data.item.value]}}</v-icon>
                                                                                                            </v-list-tile-avatar>
                                                                                                            <v-list-tile-content>
                                                                                                                <v-list-tile-title>{{data.item.text}}</v-list-tile-title>
                                                                                                                
                                                                                                            </v-list-tile-content>
                                                                                                        </template>
                                                                                                    </v-select>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            
                                                                                            <template v-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'static'">
                                                                                                <v-flex v-bind:xs10="true">
                                                                                                    <v-text-field
                                                                                                                  slot="activator"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].value"
                                                                                                                  v-bind:hide-details="true"
                                                                                                                  v-bind:solo="true"
                                                                                                                  >
                                                                                                    </v-text-field>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'function'">
                                                                                                <v-flex v-bind:xs10="true">
                                                                                                    <v-text-field
                                                                                                                  slot="activator"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].code"
                                                                                                                  v-bind:hide-details="true"
                                                                                                                  v-bind:solo="true"
                                                                                                                  >
                                                                                                        <template slot="append">
                                                                                                            <v-icon v-bind:small="true" v-bind:dark="true" color="blue-grey lighten-2"
                                                                                                                    v-on:click="clickedOpenFunctionExplorer(meta[activeTabObjectId].data[row.item.did][i.value].code, activeTabObjectId, row.item.did, i.value)" 
                                                                                                                    >edit</v-icon>
                                                                                                        </template>
                                                                                                    </v-text-field>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeNumber'">
                                                                                                    <v-flex>
                                                                                                        <v-text-field
                                                                                                                      type="Number"
                                                                                                                      v-model="meta[activeTabObjectId].data[row.item.did][i.value].from"
                                                                                                                      v-bind:hide-details="true"
                                                                                                                      v-bind:solo="true"
                                                                                                                      prefix="From" v-bind:xs4="true"
                                                                                                                      >
                                                                                                        </v-text-field>
                                                                                                    </v-flex>
                                                                                                    <v-flex>
                                                                                                        <v-text-field
                                                                                                                      type="Number"
                                                                                                                      v-model="meta[activeTabObjectId].data[row.item.did][i.value].to"
                                                                                                                      v-bind:hide-details="true"
                                                                                                                      v-bind:solo="true"
                                                                                                                      prefix="To" v-bind:xs4="true"
                                                                                                                      >
                                                                                                        </v-text-field>
                                                                                                </v-flex>
                                                                                                <v-flex>
                                                                                                    <v-text-field
                                                                                                                  type="Number"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].step"
                                                                                                                  v-bind:hide-details="true"
                                                                                                                  v-bind:solo="true"
                                                                                                                  prefix="Step" v-bind:xs2="true"
                                                                                                                  >
                                                                                                    </v-text-field>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeDate'">
                                                                                                <v-flex v-bind:xs10="true">
                                                                                                        <el-date-picker v-model="meta[activeTabObjectId].data[row.item.did][i.value].fromTo" type="daterange" range-separator="-" start-placeholder="Start date" end-placeholder="End date"></el-date-picker>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeRelativeDate'">
                                                                                                <template  v-if="meta[activeTabObjectId].data[row.item.did][i.value].hasOwnProperty('range') && meta[activeTabObjectId].data[row.item.did][i.value].range.indexOf('t') == -1">
                                                                                                    <v-flex v-bind:xs3="true">
                                                                                                        <v-text-field
                                                                                                                      type="Number"
                                                                                                                      v-model="meta[activeTabObjectId].data[row.item.did][i.value].diff"
                                                                                                                      v-bind:hide-details="true"
                                                                                                                      v-bind:solo="true"
                                                                                                                      v-bind:error="!(meta[activeTabObjectId].data[row.item.did][i.value].diff > 0)"
                                                                                                                      ></v-text-field>
                                                                                                        <v-text-field v-else-if="true" v-bind:solo="true" v-bind:disabled="true" value="---"></v-text-field>
                                                                                                    </v-flex>
                                                                                                    <v-flex v-bind:xs7="true">
                                                                                                        <v-select v-bind:items="page.record.dateRangeOptions"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].range"
                                                                                                                  v-bind:solo="true"
                                                                                                                  ></v-select>
                                                                                                    </v-flex>
                                                                                                </template>
                                                                                                <template v-else-if="true">
                                                                                                    <v-flex v-bind:xs10="true">
                                                                                                        <v-select v-bind:items="page.record.dateRangeOptions"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].range"
                                                                                                                  v-bind:solo="true"
                                                                                                                  ></v-select>
                                                                                                    </v-flex>
                                                                                                </template>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeDatetime'">
                                                                                                <v-flex v-bind:xs10="true">
                                                                                                        <el-date-picker v-bind:default-time="['00:00:00', '23:59:00']" v-model="meta[activeTabObjectId].data[row.item.did][i.value].fromToDateTime" type="datetimerange" range-separator="-" start-placeholder="Start date" end-placeholder="End date"></el-date-picker>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeDateAndTime'">
                                                                                                <v-flex v-bind:xs6="true">
                                                                                                        <el-date-picker v-model="meta[activeTabObjectId].data[row.item.did][i.value].fromToDate" type="daterange" range-separator="-" start-placeholder="Start date" end-placeholder="End date"></el-date-picker>
                                                                                                </v-flex>
                                                                                                <v-flex  v-bind:xs4="true">
                                                                                                      <el-time-picker
                                                                                                                    v-bind:is-range="true"
                                                                                                                    v-model="meta[activeTabObjectId].data[row.item.did][i.value].fromToTime"
                                                                                                                    range-separator="-"
                                                                                                                    start-placeholder="Start time"
                                                                                                                    end-placeholder="End time"
                                                                                                                      v-bind:default-value="elTimePickerDefaultTimes">
                                                                                                    </el-time-picker>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                            <template v-else-if="meta[activeTabObjectId].data[row.item.did][i.value].type == 'rangeRelativeDateAndTime'">
                                                                                                <template  v-if="meta[activeTabObjectId].data[row.item.did][i.value].hasOwnProperty('range') && meta[activeTabObjectId].data[row.item.did][i.value].range.indexOf('t') == -1">
                                                                                                    <v-flex v-bind:xs2="true">
                                                                                                        <v-text-field
                                                                                                                      type="Number"
                                                                                                                      v-model="meta[activeTabObjectId].data[row.item.did][i.value].diff"
                                                                                                                      v-bind:hide-details="true"
                                                                                                                      v-bind:solo="true"
                                                                                                                      v-bind:error="!(meta[activeTabObjectId].data[row.item.did][i.value].diff > 0)"
                                                                                                                      ></v-text-field>
                                                                                                        <v-text-field v-else-if="true" v-bind:solo="true" v-bind:disabled="true" value="---"></v-text-field>
                                                                                                    </v-flex>
                                                                                                    <v-flex v-bind:xs4="true">
                                                                                                        <v-select v-bind:items="page.record.dateRangeOptions"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].range"
                                                                                                                  v-bind:solo="true"
                                                                                                                  ></v-select>
                                                                                                    </v-flex>
                                                                                                </template>
                                                                                                <template v-else-if="true">
                                                                                                    <v-flex v-bind:xs6="true">
                                                                                                        <v-select v-bind:items="page.record.dateRangeOptions"
                                                                                                                  v-model="meta[activeTabObjectId].data[row.item.did][i.value].range"
                                                                                                                  v-bind:solo="true"
                                                                                                                  ></v-select>
                                                                                                    </v-flex>
                                                                                                </template>
                                                                                                <v-flex v-bind:xs4="true">
                                                                                                    <el-time-picker
                                                                                                                    v-bind:is-range="true"
                                                                                                                    v-model="meta[activeTabObjectId].data[row.item.did][i.value].fromToTime"
                                                                                                                    range-separator="-"
                                                                                                                    start-placeholder="Start time"
                                                                                                                    end-placeholder="End time"
                                                                                                                    v-bind:default-value="elTimePickerDefaultTimes">
                                                                                                    </el-time-picker>
                                                                                                </v-flex>
                                                                                            </template>
                                                                                        </v-layout>
                                                                                    </template>
                                                                                    <!-- /STEP 2 Record (Edit mode)-->
                                                                                
                                                                                </template>
                                                                            </td>
                                                                        </template>
                                                                        
                                                                        <template slot="footer">
                                                                            <td colspan="100%" style="height:20px;">
                                                                            </td>
                                                                        </template>
                                                                    </v-data-table>
                                                                    <div class="text-xs-center">
                                                                        <v-btn v-if="objectTab.editMode" color="cyan" v-bind:flat="true" v-on:click="createNewRecord"><v-icon v-bind:left="true">add</v-icon>Record</v-btn>
                                                                    </div>
                                                                </v-card-text>
                                                            </v-card>
                                                        </v-flex>
                                                        
                                                    </v-layout>
                                                </v-container>
                                                <!-- STEP 2 Record-->
                                                
                                                
                                                <!-- STEP 3 Proportion-->
                                                <v-container v-else-if="true" key="step3" v-bind:fluid="true" v-bind:grid-list-md="true" class="mypb120 pt-1">
                                                    <v-layout v-bind:row="true" v-bind:wrap="true" v-resize="onResize">
                                                        <v-flex v-bind:xs12="true">
                                                            <v-container v-bind:fluid="true" v-bind:grid-list-md="true" class="rule-item-container">
                                                                
                                                                
                                                                
                                                                <!-- STEP 3 Proportion - Show Rules -->
                                                                <transition-group v-bind:appear="true" name="list" tag="v-layout" v-bind:row="true" v-bind:wrap="true" class="show-rule-box">
                                                                    <template v-for="card in page.lensDialog.allRules">
                                                                        <v-flex
                                                                                v-if="!card.active && lensRuleIdActual == null"
                                                                                v-bind:xs6="true" v-bind:sm4="true" v-bind:md3="true" v-bind:lg2="true" v-bind:xl1="true"
                                                                                key="inactive"
                                                                                class="list-item"
                                                                                >
                                                                            <v-card height="200px" class="new-rule-card" v-bind:raised="true">
                                                                                <v-responsive height="150px">
                                                                                    <v-container v-bind:fill-height="true" v-bind:fluid="true">
                                                                                        <v-layout v-bind:fill-height="true" v-bind:row="true" v-bind:wrap="true">
                                                                                            <v-flex v-bind:xs12="true" v-bind:align-end="true" v-bind:flexbox="true">
                                                                                                {{showConditionOfNewRule}}
                                                                                            </v-flex>
                                                                                        </v-layout>
                                                                                    </v-container>
                                                                                </v-responsive>                                                                                
                                                                                <v-card-actions>
                                                                                    <v-spacer></v-spacer>
                                                                                    <v-btn v-bind:disabled="!canAdjustSliders" v-on:click="clickedNewRule" v-bind:flat="true" color="cyan">
                                                                                        <v-icon v-bind:left="true">add</v-icon> New Trend
                                                                                    </v-btn>
                                                                                    <v-spacer></v-spacer>
                                                                                </v-card-actions>
                                                                                
                                                                            </v-card>
                                                                        </v-flex>
                                                                        <v-flex
                                                                                v-if="card.active"
                                                                                v-bind:xs6="true" v-bind:sm4="true" v-bind:md3="true" v-bind:lg2="true" v-bind:xl1="true"
                                                                                v-bind:key="card.id"
                                                                                class="list-item min-width-rule-item"
                                                                                >
                                                                            <v-card v-bind:hover="true" height="200px" v-bind:raised="card.current" v-bind:class="card.current ? 'rule-card rule-card-active': 'rule-card'">
                                                                                
                                                                                <v-responsive height="150px" v-on:click="clickedShowTrend(card.id)">                                                                                    
                                                                                    <div style="position:absolute;width:100%;bottom:0;text-align:center;">
                                                                                        <v-sparkline
                                                                                                     v-if="(card.mix && step3props.hasOwnProperty(card.id)) && (step3props[card.id].length > 1) || step3props.hasOwnProperty('simple') && (step3props.simple.length > 1)"
                                                                                                     v-bind:value="(card.mix && step3props.hasOwnProperty(card.id)) && (step3props[card.id].length > 1) ? step3props[card.id]: step3props.hasOwnProperty('simple') && (step3props.simple.length > 1) ? step3props.simple: []"
                                                                                                     v-bind:smooth="8"
                                                                                                     v-bind:line-width="1"
                                                                                                     stroke-linecap="round"
                                                                                                     v-bind:auto-draw="true"
                                                                                                     v-bind:auto-draw-duration="1200"
                                                                                                     gradient-direction="top"
                                                                                                     v-bind:fill="true"
                                                                                                     type="trend"
                                                                                                     v-bind:padding="3"
                                                                                                     v-bind:gradient="card.current ? ['rgba(247, 32, 71, .4)', 'rgba(255, 210, 0, .4)', 'rgba(30, 234, 112, .3)', 'rgba(31, 234, 234, .3)'] : ['rgba(247, 32, 71, .2)', 'rgba(255, 210, 0, .2)', 'rgba(30, 234, 112, .2)', 'rgba(31, 234, 234, .2)']"
                                                                                                     ></v-sparkline>
                                                                                    </div>
                                                                                    
                                                                                    
                                                                                    <div style="position:absolute;height:100%;width:100%;">
                                                                                    <v-container v-bind:fill-height="true" v-bind:fluid="true">
                                                                                        <v-layout v-bind:fill-height="true" v-bind:row="true" v-bind:wrap="true">
                                                                                            <v-flex v-bind:xs12="true" v-bind:align-end="true" v-bind:flexbox="true">
                                                                                                <span class="mylabel" 
                                                                                                      v-bind:style="'background-color:' + ap.activeColorSet[decisionRuleIndexByRuleId[lens.group.object][card.id]]"
                                                                                                      ></span>
                                                                                                <span class="subheading">
                                                                                                    {{'TREND-' + ('000' + decisionRuleIndexByRuleId[lens.group.object][card.id]).slice(-3)}}
                                                                                                </span>
                                                                                            </v-flex>
                                                                                            <v-flex v-if="card.mix" v-bind:xs12="true" v-bind:align-end="true" v-bind:flexbox="true">
                                                                                                When 
                                                                                                <template v-for="(obj, idx) in card.from">
                                                                                                    <span class="font-weight-black cyan--text">{{obj.alias}}</span> is  
                                                                                                    <template v-for="(did, didx) in obj.values">
                                                                                                        <span class="font-weight-black" 
                                                                                                              >
                                                                                                            {{meta[obj.id].data[did][meta[obj.id].keyField] | showRecord}}
                                                                                                        </span>
                                                                                                        <template v-if="didx != (obj.values.length - 1)">
                                                                                                            or
                                                                                                        </template>
                                                                                                    </template>
                                                                                                    <template v-if="idx != (card.from.length - 1)">
                                                                                                        AND
                                                                                                    </template>
                                                                                                </template>
                                                                                            </v-flex>
                                                                                            <v-flex v-if="!card.mix" v-bind:xs12="true" v-bind:align-end="true" v-bind:flexbox="true">
                                                                                                (When a record doesn't match any conditions)
                                                                                            </v-flex>
                                                                                        </v-layout>
                                                                                    </v-container>
                                                                                    </div>

                                                                                </v-responsive>
                                                                                
                                                                                <v-card-actions>
                                                                                    <v-btn v-on:click="clickedDeleteRule(card.id)" v-bind:icon="true" v-bind:flat="true" v-bind:small="true" color="grey lighten-1">
                                                                                        <v-icon v-bind:small="true">delete_outline</v-icon>
                                                                                    </v-btn>
                                                                                    <v-spacer></v-spacer>
                                                                                     <v-tooltip v-bind:bottom="true">
                                                                                    <v-btn slot="activator" v-on:click="clickedEditRule(card.id)" v-bind:icon="true" v-bind:flat="true" v-bind:small="true" color="cyan darken-1">
                                                                                        <v-icon v-bind:small="true" >create</v-icon>
                                                                                    </v-btn>
                                                                                         <span>Edit Trend</span>
                                                                                    </v-tooltip>
                                                                                </v-card-actions>
                                
                                                                            </v-card>
                                                                            
                                                                        </v-flex>
                                                                        
                                                                        
                                                                    </template>
                                                                </transition-group>
                                                                <!-- STEP 3 Proportion - Show Trends -->
                                                                
                                                                
                                                            </v-container>
                                                            <v-container v-bind:fluid="true" v-bind:grid-list-md="true" class="pa-0 chart-card-container">
                                                                <v-card class="elevation-0">
                                                                    <v-card-text>
                                                                <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                    
                                                                    <v-flex v-bind:xs3="true">
                                                                        
                                                                        
                                                                        <!-- STEP 3 Proportion - Filter-->
                                                                        <v-subheader class="pl-0 subheading"><v-icon v-bind:left="true">filter_list</v-icon> Filter By Field Sets</v-subheader>
                                                                        
                                                                        <v-combobox
                                                                                    v-for="(i,idx) in objectFilterItemsOption"
                                                                                    v-bind:key="'cmbbx-' + i.value"
                                                                                    v-model="page.objectFilterItems.data[i.value]"
                                                                                    v-bind:items="objectFilterItems[i.value]"
                                                                                    v-bind:label="meta[i.value].alias"
                                                                                    v-bind:multiple="true"
                                                                                    v-bind:hide-selected="true"
                                                                                    v-bind:small-chips="true"
                                                                                    item-value="value"
                                                                                    v-on:blur="changedObjectFilterItems"
                                                                                    v-bind:clearable="true"
                                                                                    v-bind:disabled="!canFilterObject[i.value]"
                                                                                    ></v-combobox>
                                                                        
                                                                        
                                                                        <!-- STEP 3 Proportion - Filter-->
                                                                        
                                                                        
                                                                        
                                                                        
                                                                    </v-flex>
                                                                    
                                                                    <v-flex v-bind:xs9="true">
                                                                        <v-card  class="elevation-0" style="min-height: 50vh; border:none;">
                                                                            <v-card-text>
                                                                                <div class="text-xs-right" >
                                                                                    
                                                                                    
                                                                                    <!-- STEP 3 Proportion - Chart Switch Button-->
                                                                                    <v-btn-toggle v-model="page.lensDialog.chartType" v-bind:mandatory="true">
                                                                                        <v-btn v-bind:flat="true">
                                                                                            <v-icon>notes</v-icon>
                                                                                        </v-btn>
                                                                                        <v-btn v-bind:flat="true">
                                                                                            <v-icon>bar_chart</v-icon>
                                                                                        </v-btn>
                                                                                    </v-btn-toggle>
                                                                                    <!-- STEP 3 Proportion - Chart Switch Button-->
                                                                                    
                                                                                    
                                                                                </div>
                                                                                
                                                                                <!-- STEP 3 Proportion - Chart-->
                                                                                <transition name="fade" mode="out-in" v-bind:appear="true">
                                                                                    
                                                                                    <div key="chart1" v-if="page.lensDialog.chartType == 0 && ap.chartActive">
                                                                                        <chartjs-horizontal-bar
                                                                                                                v-bind:width="chartBarMeasureAxisSize"
                                                                                                                v-bind:height="chartBarLabelAxisSize"
                                                                                                                v-bind:backgroundcolor="'#51b7d8'"
                                                                                                                v-bind:bordercolor="'#51b7d8'"
                                                                                                                v-bind:labels="chart.label" 
                                                                                                                v-bind:datasets="chart.dataset"
                                                                                                                v-bind:option="test.option"
                                                                                                                v-bind:bind="true"></chartjs-horizontal-bar> 
                                                                                        
                                                                                    </div>
                                                                                    <div key="chart2" v-else-if="page.lensDialog.chartType == 1 && ap.chartActive">
                                                                                        <chartjs-bar 
                                                                                                     v-bind:width="100"
                                                                                                     v-bind:height="70"
                                                                                                     v-bind:backgroundcolor="'#51b7d8'"
                                                                                                     v-bind:bordercolor="'#51b7d8'"
                                                                                                     v-bind:labels="chart.label" 
                                                                                                     v-bind:datasets="chart.dataset"
                                                                                                     v-bind:option="test.option"
                                                                                                     v-bind:bind="true"></chartjs-bar> 
                                                                                    </div>
                                                                                    
                                                                                </transition>
                                                                                <!-- STEP 3 Proportion - Chart-->
                                                                                
                                                                                
                                                                                
                                                                            </v-card-text>
                                                                        </v-card>
                                                                    </v-flex>
                                                                </v-layout>
                                                                    </v-card-text>
                                                                </v-card>
                                                            </v-container>
                                                        </v-flex>
                                                        
                                                    </v-layout> 
                                                </v-container>
                                                <!-- STEP 3 Proportion-->
                                                
                                            </transition>
                                        </div>
                                        <div key="step4" v-else-if="true">
                                            
                                            
                                            
                                            <!-- STEP 4 Dataset-->
                                            <div v-if="step.now == 4" key="step4" v-bind:fluid="true" v-bind:grid-list-md="true" class="pa-0 mypb120">
                                                
                                                <v-tabs
                                                        key="step4tabs"
                                                        v-model="step4tab.active"
                                                        v-bind:slider-color="step4sliderColor"
                                                        v-bind:fixed-tabs="true"
                                                        color="grey lighten-5"
                                                        v-bind:show-arrows="true"
                                                        >
                                                    <v-tab
                                                           v-for="(item, idx) in step4tab.tabs"
                                                           v-bind:key="'step4tab000' + item.id"
                                                           v-bind:ripple="true"
                                                           v-bind:class="'step4tab00' + idx"
                                                           >
                                                        <v-tooltip v-bind:bottom="true">
                                                            <span slot="activator">{{item.label}}</span>
                                                            <span>{{item.description}}</span>
                                                            
                                                        </v-tooltip>
                                                    </v-tab>
                                                    
                                                    
                                                    <!-- STEP4 Tab1 CSV -->
                                                    <v-tab-item key="csv">
                                                        <v-container v-bind:fluid="true" v-bind:grid-list-md="true">
                                                            <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                <v-flex v-bind:xs12="true">
                                                                    <v-subheader class="px-0">Number of rows</v-subheader>
                                                                </v-flex>
                                                                <v-flex v-bind:xs3="true" v-bind:offset-xs4="true">
                                                                    <v-tooltip v-bind:bottom="true">
                                                                        <v-text-field
                                                                                      slot="activator"
                                                                                      v-model="rule.master.total"
                                                                                      type="number"
                                                                                      suffix="rows"
                                                                                      v-bind:single-line="true"
                                                                                      v-bind:hide-details="true"
                                                                                      v-bind:error="!(rule.master.total > 0 && rule.master.total <= 100000)"
                                                                                      >
                                                                        </v-text-field>
                                                                        <span>Max 100,000 rows</span>
                                                                        
                                                                    </v-tooltip>
                                                                </v-flex>
                                                                <v-flex v-bind:xs2="true" v-bind:offset-xs1="true">
                                                                    
                                                                    <v-btn 
                                                                           v-bind:loading="apt"
                                                                           v-bind:block="true"
                                                                           v-bind:depressed="true"
                                                                           color="cyan"
                                                                           v-on:click.native="createRecordsReal"
                                                                           v-bind:disabled="!canCsvGenerate"
                                                                           class="white--text"
                                                                           >
                                                                        <v-icon v-bind:left="true">refresh</v-icon>
                                                                        Generate
                                                                    </v-btn>
                                                                </v-flex>
                                                                
                                                                
                                                                <v-flex v-bind:xs12="true">
                                                                    <v-subheader class="px-0">Preview</v-subheader>
                                                                </v-flex>
                                                                <v-flex v-bind:xs12="true">
                                                                    <v-card>
                                                                        <v-card-text>
                                                                            <v-data-table
                                                                                          v-bind:headers="sheaders"
                                                                                          v-bind:items="records"
                                                                                          v-bind:rows-per-page-items="[10, 50, 100]"
                                                                                          >
                                                                                <template slot="items" slot-scope="row">
                                                                                    <td v-for="(i, idx) in sheaders" v-bind:key="'step4csvpre-' + idx" v-bind:class="'text-xs-' + i.align">
                                                                                        {{row.item[i.value]}}
                                                                                    </td>
                                                                                </template>
                                                                            </v-data-table>
                                                                        </v-card-text>
                                                                    </v-card>
                                                                    
                                                                </v-flex>
                                                            </v-layout>
                                                        </v-container>
                                                    </v-tab-item>
                                                    <!-- STEP4 Tab1 CSV -->
                                                    
                                                    
                                                    <!-- STEP4 Tab2 Analytics -->
                                                    <v-tab-item key="anlytics">
                                                        <v-container v-bind:fluid="true" v-bind:grid-list-md="true">
                                                            <template v-if="rule.master">
                                                                <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Number of rows</v-subheader>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true" v-bind:offset-xs4="true">
                                                                        <v-tooltip v-bind:bottom="true">
                                                                            <v-text-field
                                                                                          slot="activator"
                                                                                          v-model="rule.master.analyticsTotal"
                                                                                          type="number"
                                                                                          suffix="rows"
                                                                                          v-bind:error="!(rule.master.analyticsTotal > 0 && rule.master.analyticsTotal <= Number(settings.exportToAnalytics.maxRows))"
                                                                                          ></v-text-field>
                                                                            <span>Max {{settings.exportToAnalytics.maxRows}} rows</span>
                                                                            
                                                                        </v-tooltip>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs5="true"></v-flex>
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Dataset</v-subheader>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true" v-bind:offset-xs2="true">                                                                        
                                                                        <v-text-field
                                                                                      v-model="rule.master.DatasetLabel"
                                                                                      label="Label"
                                                                                      v-bind:error="!(rule.master.DatasetLabel && rule.master.DatasetLabel.length > 2 && rule.master.DatasetLabel.length < 50)"
                                                                                      ></v-text-field>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true">
                                                                        <v-text-field
                                                                                      v-model="rule.master.DatasetApiName"
                                                                                      label="API Name"
                                                                                      v-bind:error="!(rule.master.DatasetApiName && rule.master.DatasetApiName.length > 2 && rule.master.DatasetApiName.length < 50)"
                                                                                      ></v-text-field>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true">
                                                                    <v-select v-bind:items="page.exportToAnalyticsTab.operations"
                                                                                  v-model="rule.master.eaOperation"
                                                                                  label="Append or Overwrite?"
                                                                              	  v-bind:error="!(rule.master.eaOperation == 'Append' || rule.master.eaOperation == 'Overwrite')"
                                                                                  ></v-select>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs1="true"></v-flex>
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Fields</v-subheader>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-card>
                                                                            <v-card-text>
                                                                                <v-data-table
                                                                                              v-bind:headers="datasetFieldHeader"
                                                                                              v-bind:hide-actions="true"
                                                                                              v-bind:items="datasetFieldItems"
                                                                                              >
                                                                                    <template slot="items" slot-scope="row">
                                                                                        <tr>
                                                                                            <template v-for="(i, idx) in row.item">
                                                                                                <td class="text-xs-left">
                                                                                                    {{i}}
                                                                                                </td>
                                                                                            </template>
                                                                                        </tr>
                                                                                    </template>
                                                                                </v-data-table>
                                                                            </v-card-text>
                                                                        </v-card>                                                                        
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">*Advanced Settings</v-subheader>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true" v-bind:offset-xs3="true">
                                                                        <v-text-field
                                                                                      v-model="settings.exportToAnalytics.maxRows"
                                                                                      label="Limit of Max Rows"
                                                                                      type="number"
                                                                                      v-bind:error="RegExp(/^[1-9][0-9]*$/).test(settings.exportToAnalytics.maxRows) == false"
                                                                                      ></v-text-field>
                                                                    </v-flex>

                                                                    <v-flex v-bind:xs3="true">
                                                                        <v-text-field
                                                                                      v-model="settings.exportToAnalytics.rowsPerTime"
                                                                                      label="CSV Rows per time to be sent via API"
                                                                                      type="number"
                                                                                      v-bind:error="RegExp(/^[1-9][0-9]*$/).test(settings.exportToAnalytics.rowsPerTime) == false"
                                                                                      ></v-text-field>
                                                                    </v-flex>
                                                                    
                                                                </v-layout>
                                                            </template>
                                                        </v-container>
                                                    </v-tab-item>
                                                    <!-- STEP4 Tab2 Analytics -->
                                                    
                                                    <!-- STEP4 Tab3 Salesforce -->
                                                    <v-tab-item key="salesforceexpo">
                                                        <v-container v-bind:fluid="true" v-bind:grid-list-md="true">
                                                            <template v-if="rule.master">
                                                                <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Number of rows</v-subheader>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs3="true" v-bind:offset-xs4="true">
                                                                        <v-tooltip v-bind:bottom="true">
                                                                            <v-text-field
                                                                                          slot="activator"
                                                                                          v-model="rule.master.salesforce.total"
                                                                                          type="number"
                                                                                          suffix="rows"
                                                                                          v-bind:error="!(rule.master.salesforce.total > 0 && rule.master.salesforce.total <= 30000)"
                                                                                          ></v-text-field>
                                                                            <span>Max 30,000 rows</span>
                                                                            
                                                                        </v-tooltip>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs4="true" v-bind:offset-xs1="true">
                                                                        <v-switch
                                                                                  label="Delete All Records Before Export"
                                                                                  color="red darken-1"
                                                                                  v-model="rule.master.salesforce.deleteBeforeExport"
                                                                                  ></v-switch>
                                                                    </v-flex>
                                                                    
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Salesforce Object</v-subheader>
                                                                        
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs2="true"  v-bind:offset-xs1="true">
                                                                        <v-btn 
                                                                               color="blue"
                                                                               v-on:click.stop="clickedNewSalesforceObject"
                                                                               v-bind:outline="true"
                                                                               >
                                                                            <v-icon v-bind:left="true">add</v-icon>
                                                                            Custom Object
                                                                        </v-btn>
                                                                        
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs4="true" v-bind:offset-xs1="true">
                                                                        
                                                                        <v-select v-bind:items="page.exportToSalesforce.objects"
                                                                                  v-model="page.exportToSalesforce.activeObject"
                                                                                  v-bind:single-line="true"
                                                                                  ></v-select>
                                                                        
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs2="true" v-bind:offset-xs1="true">
                                                                        <v-btn 
                                                                               v-bind:block="true"
                                                                               v-bind:depressed="true"
                                                                               color="indigo"
                                                                               v-on:click.stop="clickedChangeSalesforceObject"
                                                                               v-bind:disabled="!(page.exportToSalesforce.activeObject != rule.master.salesforce.object.name)"
                                                                               class="white--text"
                                                                               >
                                                                            <v-icon v-bind:left="true">refresh</v-icon>
                                                                            Change
                                                                        </v-btn>
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs1="true">
                                                                    </v-flex>
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-subheader class="px-0">Field Mappings</v-subheader>
                                                                    </v-flex>
                                                                    
                                                                    <v-flex v-bind:xs12="true">
                                                                        <v-card>
                                                                            <v-card-text>
                                                                                <v-layout v-bind:row="true" v-bind:wrap="true">
                                                                                    <v-flex v-bind:xs6="true" class="text-xs-center">
                                                                                        <span class="px-0 subheading indigo--text">Insights Designer</span>
                                                                                    </v-flex>
                                                                                    <v-flex v-bind:xs6="true" class="text-xs-center">
                                                                                        <span class="px-0 subheading blue--text">Salesforce Object  
                                                                                            <span v-if="rule.master.salesforce.object.label">"{{rule.master.salesforce.object.label}}"</span>
                                                                                            <span v-else-if="true"> - Not Selected -</span>
                                                                                        </span>
                                                                                    </v-flex>
                                                                                    
                                                                                    
                                                                                    <v-flex v-bind:xs12="true">
                                                                                        <v-data-table
                                                                                                      v-bind:headers="sfdc0headers"
                                                                                                      v-bind:hide-actions="true"
                                                                                                      v-bind:items="sfdc0items"
                                                                                                      key="mappingtable"
                                                                                                      >
                                                                                            <template slot="headers" slot-scope="props">
                                                                                                <tr>
                                                                                                    <template v-for="(i, idx) in sfdc0headers">
                                                                                                        <th v-bind:key="'sfdHr000000CbEf' + idx">{{i.text}}</th>
                                                                                                    </template>
                                                                                                </tr>
                                                                                            </template>
                                                                                            <template slot="items" slot-scope="row">
                                                                                                <tr>
                                                                                                    <template v-for="(i, idx) in sfdc0headers">
                                                                                                        <td class="text-xs-left" v-bind:key="'mptd222' + idx + 'ssdd' + row.index">
                                                                                                            <template v-if="i.value == 'id_label'">
                                                                                                                <v-select 
                                                                                                                          v-bind:hide-details="true"
                                                                                                                          v-bind:items="sfdc1options[row.item.target]"
                                                                                                                          v-model="rule.master.salesforce.mappings[row.item.target]"
                                                                                                                          item-value="value"
                                                                                                                          item-text="text"
                                                                                                                          ></v-select>
                                                                                                            </template>
                                                                                                            <template v-else-if="i.value == 'joint'">
                                                                                                                <v-icon v-if="row.item.joint"  color="green lighten-1">arrow_forward</v-icon>
                                                                                                                <v-icon v-if="!row.item.joint" style="opacity: 0;">arrow_forward</v-icon>
                                                                                                                
                                                                                                            </template>
                                                                                                            <template v-else-if="true">
                                                                                                                <span v-if="row.item.joint" >
                                                                                                                    {{row.item[i.value]}}   
                                                                                                                </span>
                                                                                                                <span v-if="!row.item.joint" style="opacity: 0.4;">
                                                                                                                    {{row.item[i.value]}}    
                                                                                                                </span>
                                                                                                            </template>
                                                                                                            
                                                                                                        </td>
                                                                                                    </template>
                                                                                                </tr>                                                                                        
                                                                                            </template>
                                                                                        </v-data-table>
                                                                                    </v-flex>
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    <v-flex v-bind:xs6="true" class="text-xs-center">
                                                                                        <span v-if="sfdc1option.length > 0">Available Fields</span>
                                                                                    </v-flex>
                                                                                    <v-flex v-bind:xs6="true"></v-flex>
                                                                                    <v-flex v-bind:xs6="true">
                                                                                        <v-card v-if="sfdc1option.length > 0" class="grey lighten-4 elevation-0" style="border-radius: 4px;">
                                                                                            <v-card-text >
                                                                                                <v-data-table
                                                                                                              v-bind:hide-headers="true"
                                                                                                              v-bind:hide-actions="true"
                                                                                                              v-bind:items="sfdc1option"
                                                                                                              class="my-grey-table"
                                                                                                              key="idavailableflds"
                                                                                                              >
                                                                                                    
                                                                                                    <template slot="items" slot-scope="row">
                                                                                                        <tr>
                                                                                                            
                                                                                                            <td class="text-xs-left" v-bind:key="'idavailableflds1ppp' + row.index">
                                                                                                                {{row.item.text}}
                                                                                                            </td>
                                                                                                            <td class="text-xs-left" v-bind:key="'idavailableflds2ppp' + row.index">
                                                                                                                {{row.item.value}}
                                                                                                            </td>
                                                                                                            <td class="text-xs-left" v-bind:key="'idavailableflds3ppp' + row.index">
                                                                                                                {{row.item.type}}
                                                                                                            </td>
                                                                                                            
                                                                                                        </tr>
                                                                                                    </template>
                                                                                                </v-data-table>
                                                                                            </v-card-text>
                                                                                        </v-card>                                                                        
                                                                                    </v-flex>
                                                                                </v-layout>
                                                                            </v-card-text>
                                                                        </v-card>
                                                                        
                                                                    </v-flex>
                                                                    
                                                                </v-layout>
                                                            </template>
                                                        </v-container>
                                                    </v-tab-item>
                                                    <!-- STEP4 Tab3 Salesforce -->
                                                    
                                                </v-tabs>
                                            </div>
                                            <!-- STEP 4 Dataset-->
                                        </div>
                                    </transition>
                                </v-flex>
                            </v-layout>
                        </v-container> 
                    </v-content>
                    
                    <!-- Floating -->
                    <template v-if="isEditPage == true && (step.now == 1 || step.now == 2 || step.now == 3)">
                        
                        <template v-if="!objectTab.editMode">
                            <template v-if="!(page.currentProject.id && page.currentProject.id.length > 4)">
                                <v-tooltip v-bind:top="true">
                                <v-btn
                                       slot="activator"
                                       color="grey lighten-3"
                                       v-bind:small="true"
                                       v-bind:dark="false"
                                       v-bind:fixed="true"
                                       v-bind:bottom="true"
                                       v-bind:left="true"
                                       v-bind:fab="true"
                                       class="my-action my-action-2"
                                       v-on:click="returnToTemplateList"
                                       >
                                    <v-icon color="grey">close</v-icon>
                                </v-btn>  
                                    <span>Quit this unsaved project</span>
                                </v-tooltip>
                                <v-tooltip v-bind:top="true">
                                 <v-btn
                                        slot="activator"
                                       color="cyan"
                                       v-bind:dark="true"
                                       v-bind:fixed="true"
                                       v-bind:bottom="true"
                                       v-bind:left="true"
                                       v-bind:fab="true"
                                       class="my-action"
                                       v-on:click="openSaveProjectAsNewEditDialog"
                                       >
                                    <v-icon>save_alt</v-icon>
                                </v-btn> 
                                    <span>Save as new project</span>
                                </v-tooltip>
                                
                            </template>
                            <template v-else-if="ap.changedData">
                                <v-tooltip v-bind:right="true">
                                    <v-btn
                                           slot="activator"
                                           color="cyan"
                                           v-bind:dark="true"
                                           v-bind:fixed="true"
                                           v-bind:bottom="true"
                                           v-bind:left="true"
                                           v-bind:fab="true"
                                           class="my-action"
                                           v-bind:disabled="!(isValidStep[1] && isValidStep[2])" v-on:click="clickedSaveProject"
                                           >
                                        <v-icon>save</v-icon>
                                    </v-btn>
                                    <span>Save changes immediately</span>
                                </v-tooltip>
                            </template>
                            <template v-else-if="!ap.changedData">
                                
                                
                                <v-menu v-bind:offset-y="true" v-bind:offset-overflow="true">
                                    <v-btn
                                           slot="activator"
                                           color="grey lighten-3"
                                           v-bind:dark="false"
                                           v-bind:fixed="true"
                                           v-bind:bottom="true"
                                           v-bind:left="true"
                                           v-bind:fab="true"
                                           class="my-action"
                                           v-bind:ripple="true"
                                           >
                                        <v-icon color="grey">more_vert</v-icon>
                                    </v-btn>                                    
                                    <v-list>
                                        <v-list-tile v-on:click="clickedSaveAsTemplate">
                                            <v-list-tile-title>Save As Template</v-list-tile-title>
                                        </v-list-tile>
                                        <v-list-tile v-on:click="closeProject">
                                            <v-list-tile-title>Close</v-list-tile-title>
                                        </v-list-tile>
                                    </v-list>
                                </v-menu>  
                            </template>                            
                        </template>                        
                    </template>
                    <!-- Floating -->
                    
                    
                    <!-- Footer -->
                    <transition name="fade" mode="out-in" v-bind:appear="true">
                        
                        <v-footer
                                  v-if="isActiveFooter"
                                  height="auto"
                                  v-bind:fixed="true"
                                  class="elevation-0 my-footer"
                                  key="footer"
                                  >
                            <v-card
                                    class="flex"
                                    v-bind:flat="true"
                                    v-bind:tile="true"
                                    >
                                <v-card-title class="pa-2">
                                    
                                    <template v-if="step.now == 4">                                        
                                        <template v-if="step4tab.active == 0">
                                            <v-spacer></v-spacer>
                                            <v-btn v-bind:block="true" v-bind:depressed="true" color="cyan" class="white--text" v-bind:disabled="!(records.length > 0)" v-on:click="downloadAsCsv">
                                                <v-icon v-bind:left="true">save_alt</v-icon>
                                                Download CSV
                                            </v-btn>
                                            <v-spacer></v-spacer>
                                        </template>
                                        <template v-else-if="step4tab.active == 1">
                                            <v-menu v-bind:offset-y="true">
                                                <v-btn slot="activator" color="cyan" v-bind:flat="true" v-bind:ripple="true">
                                                    Einstein Analytics
                                                </v-btn>
                                                <v-list>
                                                    <v-list-tile v-on:click="openUrl(constant.analyticsUrl)">
                                                        <v-list-tile-title>Analytics Studio</v-list-tile-title>
                                                    </v-list-tile>
                                                    <v-list-tile v-on:click="openUrl(constant.dataManagerUrl)">
                                                        <v-list-tile-title>Data Manager</v-list-tile-title>
                                                    </v-list-tile>
                                                </v-list>
                                            </v-menu>  
                                            <v-spacer></v-spacer>
                                            <v-btn v-bind:block="true" v-bind:depressed="true" color="deep-purple lighten-1" v-bind:disabled="!((rule.master.eaOperation == 'Append' || rule.master.eaOperation == 'Overwrite') && rule.master.analyticsTotal <= Number(settings.exportToAnalytics.maxRows) && rule.master.analyticsTotal > 0 && rule.master.DatasetLabel.length > 2 && rule.master.DatasetApiName.length > 2)" v-on:click="exportToAnalyticsAsDataset" style="color:#fff;">
                                                <v-icon v-bind:left="true" v-bind:dark="true">mdi-hexagon</v-icon>
                                                Export to Dataset
                                            </v-btn>
                                        </template>
                                        <template v-else-if="step4tab.active == 2">
                                            <v-menu v-bind:offset-y="true">
                                                <v-btn slot="activator" color="light-blue darken-1" v-bind:flat="true" v-bind:ripple="true">
                                                    Salesforce
                                                </v-btn>
                                                <v-list>
                                                    <v-list-tile v-if="salesforceObjectListViewUrl.length > 0" v-on:click="openUrl(salesforceObjectListViewUrl)">
                                                        <v-list-tile-title>Open "{{rule.master.salesforce.object.label}}" List View</v-list-tile-title>
                                                    </v-list-tile>
                                                    <v-list-tile v-if="salesforceObjectListViewUrl.length > 0" v-on:click="openUrl(salesforceObjectManagerUrl)">
                                                        <v-list-tile-title>Open "{{rule.master.salesforce.object.label}}" Object Manager</v-list-tile-title>
                                                    </v-list-tile>
                                                    <v-list-tile v-on:click="openUrl(constant.bulkDataLoadJobUrl)">
                                                        <v-list-tile-title>Open Export Jobs (Bulk API 2.0)</v-list-tile-title>
                                                    </v-list-tile>
                                                    
                                                </v-list>
                                            </v-menu>  
                                            <v-spacer></v-spacer>
                                            <v-btn v-bind:block="true" v-bind:depressed="true" color="blue" v-bind:disabled="!canExportToSalesforce" v-on:click="exportToSalesforceAsObject" style="color:#fff;">
                                                <v-icon v-bind:left="true" v-bind:dark="true">mdi-database</v-icon>
                                                Export to Salesforce Object
                                            </v-btn>
                                        </template>
                                    </template>
                                    
                                    <template v-else-if="!!page.newProjectFromCsv.show">
                                        <v-spacer></v-spacer>
                                        <v-text-field
                                                      v-model="page.newProjectFromCsv.maxRecords"
                                                      type="number"
                                                      prefix="Max"
                                                      suffix="record sets / Field set"
                                                      v-bind:single-line="true"
                                                      v-bind:hide-details="true"
                                                      >
                                        </v-text-field>
                                        <v-spacer></v-spacer>
                                        <v-btn v-bind:block="true" v-bind:disabled="!canStartImportCsvToNewProject" v-bind:depressed="true" color="cyan" v-on:click.stop="clickedImportCsvToProject" class="white--text">
                                            <v-icon v-bind:left="true">play_arrow</v-icon> Start Import
                                        </v-btn>

                                    </template>
                                    <template v-if="!!page.newProjectFromTemplate.show">
                                        <v-select
                                                  v-model="page.newProjectFromTemplate.listPage.countPerPage"
                                                  v-bind:items="page.newProjectFromTemplate.listPage.countOption"
                                                  class="mt-0"
                                                  ></v-select>
                                        <v-spacer></v-spacer>
                                        <v-pagination v-if="page.newProjectFromTemplate.list.length > 0"
                                                      v-model="page.newProjectFromTemplate.listPage.now" 
                                                      v-bind:length="Math.ceil(page.newProjectFromTemplate.list.length / page.newProjectFromTemplate.listPage.countPerPage)"
                                                      v-bind:total-visible="9"
                                                      color="cyan">
                                        </v-pagination>
                                    </template>
                                </v-card-title>
                            </v-card>
                        </v-footer>
                    </transition>
                    <!-- Footer -->
                    
                    
                    
                    <!--SNACKBAR-->                 
                    <v-snackbar
                                v-bind:timeout="page.snackbar.timeout"
                                v-bind:top="page.snackbar.y === 'top'"
                                v-bind:bottom="page.snackbar.y === 'bottom'"
                                v-bind:right="page.snackbar.x === 'right'"
                                v-bind:left="page.snackbar.x === 'left'"
                                v-bind:multi-line="page.snackbar.mode === 'multi-line'"
                                v-bind:vertical="page.snackbar.mode === 'vertical'"
                                v-bind:color="page.snackbar.color"
                                v-model="page.snackbar.show"
                                >
                        {{ page.snackbar.text }}
                        <v-btn v-bind:flat="true" v-bind:dark="true" v-on:click.native="page.snackbar.show = false">Close</v-btn>
                    </v-snackbar>
                    <!--SNACKBAR-->                 
                    
                    
                    <!--Loading Dialog-->
                    <v-dialog
                              v-model="(step.now == 4 && apt) || page.openProject.show"
                              v-bind:hide-overlay="true"
                              v-bind:persistent="true"
                              width="300"
                              >
                        <v-card
                                class="my-brand-small"
                                v-bind:dark="true"
                                >
                            <v-card-text>
                                Now processing ..
                                <template v-if="step.now == 4 && step4tab.active == 1">
                                    <div class="text-xs-right">{{exportToDataset.currentCount}} / {{exportToDataset.totalCount}}</div>
                                    <v-progress-linear
                                                       v-model="100 * exportToDataset.currentCount / exportToDataset.totalCount"
                                                       color="white"
                                                       class="mb-0"
                                                       ></v-progress-linear>
                                </template>
                                <template v-if="step.now == 4 && step4tab.active == 2 && exportToSalesforce.totalCount > 0">
                                    <div class="text-xs-right">{{exportToSalesforce.doneCount}} / {{exportToSalesforce.totalCount}}</div>
                                    <v-progress-linear
                                                       v-model="100 * exportToSalesforce.doneCount / exportToSalesforce.totalCount"
                                                       color="white"
                                                       class="mb-0"
                                                       ></v-progress-linear>
                                </template>
                            </v-card-text>
                        </v-card>
                    </v-dialog>
                    <!--Loading Dialog-->                    
                    
                    
                    
                    <!--Confirm Modal-->
                    <v-dialog v-model="page.confirm.show" v-bind:persistent="true" max-width="500">
                        <v-card v-if="page.confirm.show">
                            <v-card-title class="headline pt-4 pb-1"><v-icon v-bind:left="true" color="green darken-1">help_outline</v-icon><span style="padding-left:.5rem;" class="green--text text--darken-1">Confirm</span></v-card-title>
                            <v-card-text class="text-xs-center">{{page.confirm.message}}</v-card-text>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="grey " v-bind:flat="true" v-on:click.stop="doConfirm(false)">No</v-btn>
                                <v-btn color="green darken-1" v-bind:flat="true" v-on:click.stop="doConfirm(true)">Yes</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>                    
                    <!--Confirm Modal-->
                    
                    <!--Alert Modal-->
                    <v-dialog v-model="page.alert.show" v-bind:persistent="true" max-width="500">
                        <v-card v-if="page.alert.show">
                            <v-card-title class="headline pt-4 pb-1"><v-icon v-bind:left="true" color="red darken-1">error_outline</v-icon><span style="padding-left:.5rem;" class="red--text text--darken-1">Alert</span></v-card-title>
                            <v-card-text class="text-xs-center">{{page.alert.message}}</v-card-text>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="red darken-1" v-bind:flat="true" v-on:click.stop="page.alert.show = false">OK</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>                    
                    <!--Alert Modal-->
                    
                    
                    
                    <!--STEP 2 Function Editor Dialog-->                    
                    <v-dialog max-width="80%" v-bind:scrollable="true" v-bind:persistent="true" v-model="page.step2hint.show">
                        <v-card v-if="page.step2hint.show" color="blue-grey darken-1" >
                            <v-card-title>
                                <h3 class="display-1 mb-3 mt-2 white--text">Function Editor</h3>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.step2hint.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-card-text class="py-3 my-2">                                
                                <v-layout v-bind:row="true" v-bind:wrap="true">
                                    <v-flex v-bind:xs12="true">
                                        <h4 class="subheading blue-grey--text text--lighten-4 my-4 pb-2 pl-2">Function</h4>
                                    </v-flex>
                                    <v-flex v-bind:xs2="true" class="text-xs-center">
                                            <v-menu v-bind:offset-y="true" v-bind:open-on-hover="true" max-height="50%">
                                                <v-btn slot="activator" v-bind:flat="true" v-bind:block="true">
                                                    <v-icon color="white">search</v-icon>
                                                </v-btn>
                                                <v-card>
                                                    <v-list>
                                                        <v-subheader>Quick Reference (Example)</v-subheader>
                                                        <template v-for="(item, idx) in allFunctionCandidates" >
                                                            <v-divider v-if="idx != 0"></v-divider>
                                                            <v-list-tile v-on:click="setCodeToFunctionFinder(item.value)">
                                                                <v-list-tile-avatar>
                                                                    <v-icon>{{item.icon}}</v-icon>
                                                                </v-list-tile-avatar>
                                                                <v-list-tile-content>
                                                                    <v-list-tile-title>{{item.value}}</v-list-tile-title>
                                                                    <v-list-tile-sub-title>{{item.text}}</v-list-tile-sub-title>
                                                                </v-list-tile-content>
                                                            </v-list-tile>
                                                        </template>
                                                    </v-list>
                                                </v-card>
                                            </v-menu>
                                    </v-flex>
                                    <v-flex v-bind:xs8="true">
                                        <v-text-field v-model="page.step2hint.code" 
                                                      color="blue-grey lighten-3"
                                                      v-on:keydown.enter="clickedFunctionExplorerExecute"
                                                      v-bind:solo="true" v-bind:clearable="true"/>
                                    </v-flex>
                                    <v-flex v-bind:xs2="true" class="text-xs-center">
                                        <v-btn color="white" v-bind:large="true" v-bind:flat="true" v-on:click.stop="clickedFunctionExplorerExecute">
                                        	Run
                                        </v-btn>
                                    </v-flex>
                                    <v-flex v-bind:xs12="true">
                                        <h4 class="subheading blue-grey--text text--lighten-4 my-2 pt-1  pl-2">Result</h4>
                                    </v-flex>
                                    <v-flex v-bind:xs12="true">
                                        <v-card class="pa-4 mx-2" v-bind:dark="true" v-show="page.step2hint.result" v-bind:color="functionFinderResultBgColor" style="box-shadow:none;border:none;">
                                            <v-card-text>
                                                <template v-if="page.step2hint.result">
                                                    {{page.step2hint.result}}
                                                </template>
                                                <template v-else-if="true">
                                                    !!
                                                </template>
                                            </v-card-text>
                                        </v-card>
                                    </v-flex>
                                </v-layout>
                            </v-card-text>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="white" v-bind:flat="true" v-on:click.stop="clickedBringCodeToRecord">OK</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--STEP 2 Function Editor Dialog-->   
                    
                    
                    <!--Error Dialog-->
                    <v-dialog
                              v-model="page.error.show"
                              v-bind:hide-overlay="true"
                              width="70%"
                              >
                        <v-card
                                color="error"
                                v-bind:dark="true"
                                v-if="page.error.show"
                                >
                            <v-card-text>
                                {{page.error.message}}           
                            </v-card-text>
                        </v-card>
                    </v-dialog>
                    <!--Error Dialog-->    
                    
                    
                    <!-- New Field Sets & Records from Data Gen API --> 
                    <v-dialog v-bind:persistent="true" max-width="90%" v-bind:scrollable="true" v-model="page.dataGenDialog.show">
                        <v-card v-if="page.dataGenDialog.show">
                            <v-card-title class="title blue-grey white--text py-2">
                                <span>New Field Set &amp; Records from Data Gen API</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.dataGenDialog.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>  
                            <v-card-text v-if="dataGenDialogTypes && dataGenDialogTypes.length > 0">
                                <v-form>
                                    <v-container v-bind:fluid="true">
                                        <v-layout v-bind:row="true" v-bind:wrap="true" v-bind:align-center="true">
                                    <template v-if="page.dataGenDialog.step == 1">
                                    <v-flex v-bind:xs12="true">
                                        <v-autocomplete
                                                  v-model="page.dataGenDialog.input.type"
                                                  v-bind:items="dataGenDialogTypes"
                                                  label="Type"
                                                  v-bind:class="page.dataGenDialog.input.type && page.dataGenDialog.input.type.length > 0 ? 'mt-0': 'my-4 py-4'"
                                                  v-on:change="changedDataGenDialogType"
                                                  ></v-autocomplete>
                                    </v-flex>
                                    
                                    <template v-if="canShowDataGenDialogFilterOption">
                                        <v-flex v-bind:xs5="true">
                                            <v-autocomplete
                                                      v-model="page.dataGenDialog.input.filter.key"
                                                      v-bind:items="dataGenDialogFilterTargetsWithNull"
                                                      label="Filter By (Optional)"
                                                      class="mt-0"
                                                      v-on:change="changedDataGenDialogFilterKey"
                                                      ></v-autocomplete>
                                        </v-flex>
                                        <v-flex v-bind:xs2="true" class="text-xs-center">
                                            <v-icon v-if="page.dataGenDialog.input.filter.key != null">mdi-equal</v-icon>
                                        </v-flex>
                                        <v-flex v-bind:xs5="true">
                                            <v-autocomplete
                                                      v-if="page.dataGenDialog.input.filter.key != null"
                                                      v-model="page.dataGenDialog.input.filter.value"
                                                      v-bind:items="dataGenDialogFilterOptions"
                                                      label="Value"
                                                      class="mt-0"
                                                      v-on:change="changedDataGenDialogFilterValue"
                                                      ></v-autocomplete>
                                        </v-flex>
                                    </template>
                                    </template>
                                    <template v-else-if="page.dataGenDialog.step == 2">
                                        <v-flex v-bind:xs6="true">
                                            <v-text-field label="Alias" v-model="page.dataGenDialog.input.alias"></v-text-field>
                                        </v-flex>
                                        <v-flex v-bind:xs6="true">                                            
                                            <v-text-field 
                                                   type="number" 
                                                   v-model="page.dataGenDialog.input.count"
                                                   label="Number of rows (0-500)"
                                                   v-bind:error="!(page.dataGenDialog.input.count > 0 && page.dataGenDialog.input.count <= 500)"
                                            ></v-text-field>
                                        </v-flex>
                                    </template>
                                    <v-flex v-bind:xs12="true">                                        
                                        <v-data-table v-if="dataGenDialogSampleRows.length > 0" v-bind:headers="dataGenDialogSampleHeaders" v-bind:items="dataGenDialogSampleRows" v-bind:hide-actions="true">
                                            <template slot="headers" slot-scope="props">
                                                <template v-if="page.dataGenDialog.step == 1">
                                                    <tr>
                                                        <th v-for="(header, i) in props.headers" v-bind:key="'th1-step1-' + i">
                                                            {{header.text}}
                                                        </th>
                                                    </tr>
                                                </template>
                                                <template v-else-if="page.dataGenDialog.step == 2">
                                                    <tr>
                                                        <th v-for="(header, i) in props.headers" v-bind:key="'th1-step2-' + i" v-bind:class="'pt-3 text-xs-' + i.align + ' td-active-' + page.dataGenDialog.input.fields[i].active">
                                                            <span>#{{(i + 1)}}</span> 
                                                            <v-checkbox v-model="page.dataGenDialog.input.fields[i].active" color="cyan"></v-checkbox>
                                                        </th>
                                                    </tr>
                                                    <tr>
                                                        <th v-for="(header, i) in props.headers" v-bind:key="'th2-' + i" v-bind:class="'text-xs-' + i.align + ' td-active-' + page.dataGenDialog.input.fields[i].active">
                                                            <v-text-field v-model="page.dataGenDialog.input.fields[i].label"
                                                                          v-bind:required="true"
                                                                          label="Label"
                                                                          v-bind:dark="false"
                                                                          v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                          ></v-text-field>
                                                            
                                                            <v-text-field
                                                                          v-model="page.dataGenDialog.input.fields[i].name"
                                                                          v-bind:required="true"
                                                                          label="API Name"
                                                                          v-bind:dark="false"
                                                                          v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                          ></v-text-field>
                                                        </th>
                                                    </tr>
                                                    <tr>
                                                        <th v-for="(header, i) in props.headers" v-bind:key="'th3-' + i" v-bind:class="'text-xs-' + i.align + ' td-active-' + page.dataGenDialog.input.fields[i].active">
                                                            <v-select
                                                                      v-bind:items="page.newField.typeOptions"
                                                                      v-model="page.dataGenDialog.input.fields[i].type"
                                                                      label="Data Type"
                                                                      v-bind:single-line="true"
                                                                      item-value="text"
                                                                      v-bind:dark="false"
                                                                      v-on:change="typeChanged($event, 'dataGenDialog', i)"
                                                                      v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                      ></v-select>
                                                            
                                                            <v-select v-if="page.dataGenDialog.input.fields[i].type == 'Date'"
                                                                      key="dateSelect"
                                                                      v-bind:items="page.newField.dateOptions"
                                                                      v-model="page.dataGenDialog.input.fields[i].format"
                                                                      v-bind:single-line="true"
                                                                      item-value="text"
                                                                      v-bind:dark="false"
                                                                      v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                      ></v-select>
                                                            <v-select v-else-if="page.dataGenDialog.input.fields[i].type == 'DateTime'"
                                                                      key="dateTimeSelect"
                                                                      v-bind:items="page.newField.dateTimeOptions"
                                                                      v-model="page.dataGenDialog.input.fields[i].format"
                                                                      v-bind:single-line="true"
                                                                      item-value="text"
                                                                      v-bind:dark="false"
                                                                      v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                      ></v-select>
                                                            <v-select v-else-if="page.dataGenDialog.input.fields[i].type == 'Number'"
                                                                      key="NumberSelect"
                                                                      v-bind:items="page.newField.scaleOptions"
                                                                      v-model="page.dataGenDialog.input.fields[i].format"
                                                                      v-bind:single-line="true"
                                                                      item-value="value"
                                                                      v-bind:dark="false"
                                                                      v-bind:disabled="!page.dataGenDialog.input.fields[i].active"
                                                                      ></v-select>
                                                            <v-select v-else-if="true"
                                                                      label="---"
                                                                      key="StringSelectInvalid"
                                                                      v-model="page.dataGenDialog.input.fields[i].format"
                                                                      v-bind:single-line="true"
                                                                      v-bind:disabled="true"
                                                                      v-bind:dark="false"
                                                                      ></v-select>                                                            
                                                        </th>
                                                    </tr>
                                                </template>
                                            </template>
                                            <template slot="items" slot-scope="row">
                                                <tr v-bind:style="'border-bottom: 1px solid rgba(0,0,0,' + (0.12 - row.index * 0.02) + ')'">
                                                    <td v-for="(i, index) in dataGenDialogSampleHeaders" v-bind:class="'grey--text' + (row.index < 3 ? ' text--darken-' + (3 - row.index): row.index > 3 ? ' text--lighten-' + (row.index - 3): '')">
                                                        <span v-bind:style="page.dataGenDialog.step == 2 && page.dataGenDialog.input.fields[index].active == false ? 'opacity: 0.3': ''">
                                                            {{row.item[i.value]}}
                                                        </span>
                                                    </td>
                                                </tr>
                                            </template>
                                                                           
                                        </v-data-table>
                                        
                                        
                                        
                                    </v-flex>
                                </v-layout>
                                    </v-container>
                                </v-form>
                            </v-card-text>
                            <v-card-text v-else-if="true">
                                <div class="text-xs-center py-4">
                                    API Server Error - Please try again later.
                                </div>
                                
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <template v-if="page.dataGenDialog.step == 1">
                                    <v-spacer></v-spacer>
                                    <v-btn color="cyan" v-bind:flat="true" v-bind:disabled="!dataGenDialogTypes" v-on:click.stop="page.dataGenDialog.step = 2">Next</v-btn>
                                </template>
                                <template v-if="page.dataGenDialog.step == 2">
                                    <v-btn color="grey" v-bind:flat="true" v-on:click.stop="page.dataGenDialog.step = 1">Back</v-btn>
                                    <v-spacer></v-spacer>
                                    <v-btn 
                                   		color="cyan"
                                        v-bind:flat="true"
                                        v-on:click.stop="clickedCreateByDataGenApi"
                                        v-bind:disabled="!canSaveForImportCsvFromDataGenApi"
                                    >Save</v-btn>
                                </template>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!-- New Field Sets & Records from Data Gen API --> 
                    
                    
                    <!-- New Field Sets & Records from CSV Dialog-->                
                    <v-dialog v-bind:persistent="true" max-width="90%" v-bind:scrollable="true" v-model="page.importCsvDialog.show">
                        <v-card v-if="page.importCsvDialog.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>New Field Set &amp; Records from CSV</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.importCsvDialog.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>

                            </v-card-title>
                            <v-divider color="#666"></v-divider>
                            <v-card-text class="csv-import-table pa-0">
                                <div v-if="page.importCsvDialog.step == 1" class="pa-5 ma-5 text-xs-center">
                                    <input type="file" v-on:change="uploadedCsvFile" />
                                </div>
                                <v-data-table v-else-if="page.importCsvDialog.step == 2" v-bind:headers="cheaders" v-bind:items="citems">
                                    <template slot="headers" slot-scope="props">
                                        <tr>
                                            <th v-for="(header, i) in props.headers" v-bind:key="'th1-' + i">
                                                <span class="white--text">#{{(i + 1)}}</span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th v-for="(header, i) in props.headers" v-bind:key="'th2-' + i">
                                                <v-text-field v-model="page.importCsvDialog.fields[i].label" v-bind:required="true" label="Label" v-bind:dark="true"></v-text-field>
                                                <v-text-field v-model="page.importCsvDialog.fields[i].name" v-bind:required="true" label="API Name" v-bind:dark="true"></v-text-field>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th v-for="(header, i) in props.headers" v-bind:key="'th3-' + i">
                                                <v-select
                                                          v-bind:items="page.newField.typeOptions"
                                                          v-model="page.importCsvDialog.fields[i].type"
                                                          label="Data Type"
                                                          v-bind:single-line="true"
                                                          item-value="text"
                                                          v-bind:dark="true"
                                                          v-on:change="typeChanged($event, 'csvImport', i)"
                                                          ></v-select>
                                                
                                                <v-select v-if="page.importCsvDialog.fields[i].type == 'Date'"
                                                          key="dateSelect"
                                                          v-bind:items="page.newField.dateOptions"
                                                          v-model="page.importCsvDialog.fields[i].format"
                                                          v-bind:single-line="true"
                                                          item-value="text"
                                                          v-bind:dark="true"
                                                          ></v-select>
                                                <v-select v-else-if="page.importCsvDialog.fields[i].type == 'DateTime'"
                                                          key="dateTimeSelect"
                                                          v-bind:items="page.newField.dateTimeOptions"
                                                          v-model="page.importCsvDialog.fields[i].format"
                                                          v-bind:single-line="true"
                                                          item-value="text"
                                                          v-bind:dark="true"
                                                          ></v-select>
                                                <v-select v-else-if="page.importCsvDialog.fields[i].type == 'Number'"
                                                          key="NumberSelect"
                                                          v-bind:items="page.newField.scaleOptions"
                                                          v-model="page.importCsvDialog.fields[i].format"
                                                          v-bind:single-line="true"
                                                          item-value="value"
                                                          v-bind:dark="true"
                                                          ></v-select>
                                                <v-select v-else-if="true"
                                                          label="---"
                                                          key="StringSelectInvalid"
                                                          v-model="page.importCsvDialog.fields[i].format"
                                                          v-bind:single-line="true"
                                                          v-bind:disabled="true"
                                                          v-bind:dark="true"
                                                          ></v-select>
                                            </th>
                                        </tr>
                                    </template>
                                    <template slot="items" slot-scope="row">
                                        <td v-for="(i, index) in cheaders" v-bind:class="'text-xs-' + i.align">
                                            {{row.item[i.value]}}
                                        </td>
                                    </template>                                    
                                </v-data-table>
                                <div v-else-if="page.importCsvDialog.step == 3">
                                    <v-layout v-bind:row="true" v-bind:wrap="true">
                                        <v-flex v-bind:xs8="true" v-bind:offset-xs2="true">
                                            <v-text-field v-model="page.importCsvDialog.objectAlias" label="Field Set Alias" class="my-4 py-4"></v-text-field>
                                        </v-flex>
                                    </v-layout>
                                </div>                                
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn v-if="page.importCsvDialog.step == 2" color="cyan" v-bind:flat="true" v-on:click.stop="page.importCsvDialog.step = 3">Next</v-btn>
                                <v-btn v-if="page.importCsvDialog.step == 3" color="cyan" v-bind:flat="true" v-on:click.stop="clickedStartImportCsv" v-bind:disabled="!canSaveNewObjectFromCsv">Import</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!-- /New Field Sets & Records from CSV Dialog-->  
                    
                    
                    <!--Adjust Sliders Dialog-->                
                    <v-dialog v-bind:persistent="true" max-width="70%" v-bind:scrollable="true" v-model="page.adjustSliders.show">
                        <v-card v-if="page.adjustSliders.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>Proportion</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.adjustSliders.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-divider></v-divider>
                            <v-card-text>
                                <v-container v-bind:fluid="true" v-bind:grid-list-md="true">
                                    <v-layout v-bind:row="true" v-bind:wrap="true">
                                        <v-flex v-for="(elm, i) in page.lensDialog.sliders" v-bind:xs12="true" v-bind:key="'slider-' + elm.id">
                                            <v-subheader class="pl-0">{{elm.label | showRecord}}</v-subheader>
                                            <v-slider thumb-label="always" min="0" max="100" step="0.1" v-model="elm.count" v-on:click="changedSliderValue(i, $event)"></v-slider>
                                        </v-flex>                                        
                                    </v-layout>
                                </v-container>
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <v-btn color="grey" v-bind:flat="true" v-on:click.stop="allSliderSetToZero">All Zero</v-btn>
                                <v-spacer></v-spacer>
                                <v-btn color="cyan" v-bind:flat="true" v-on:click.stop="saveRule">Save</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--Adjust Sliders Dialog-->                
                    
                    
                    <!--New Salesforce Custom Object-->                 
                    <v-dialog v-bind:persistent="true" max-width="80%" v-bind:scrollable="true" v-model="page.newSalesforceCustomObject.show">
                        <v-card v-if="page.newSalesforceCustomObject.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>New Salesforce Custom Object</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.newSalesforceCustomObject.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-divider></v-divider>
                            <v-card-text>
                                <v-form>
                                    <v-container v-bind:fluid="true">
                                        <v-layout v-bind:row="true" v-bind:wrap="true">
                                            <v-flex v-bind:xs12="true">
                                                <v-subheader class="pa-0">Details</v-subheader>
                                            </v-flex>
                                            
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-model="page.newSalesforceCustomObject.form.label"
                                                              label="Custom Object Label"
                                                              v-bind:required="true"
                                                              v-bind:clearable="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-model="page.newSalesforceCustomObject.form.plabel"
                                                              label="Custom Object Plural Label"
                                                              v-bind:required="true"
                                                              v-bind:clearable="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-bind:value="page.newSalesforceCustomObject.form.name + '__c'"
                                                              label="Custom Object API Name"
                                                              v-bind:readonly="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-model="page.newSalesforceCustomObject.form.name"
                                                              label="←"
                                                              v-bind:required="true"
                                                              v-bind:clearable="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            
                                            <v-flex v-bind:xs12="true">
                                                <v-subheader class="pa-0">Fields</v-subheader>
                                            </v-flex>
                                            <template v-for="(fld, idx) in page.newSalesforceCustomObject.form.fields">
                                                <v-flex v-bind:xs1="true" v-bind:offset-xs1="true">
                                                    <v-checkbox color="blue" v-model="fld.active" label=""></v-checkbox>
                                                </v-flex>
                                                <v-flex v-bind:xs3="true">
                                                    <span v-on:click="fld.active = !fld.active">
                                                        <v-text-field
                                                                  v-bind:value="fld.label"
                                                                  label="Label"
                                                                  v-bind:disabled="!fld.active"
                                                                  v-bind:readonly="fld.active"
                                                                  ></v-text-field>
                                                    </span>
                                                </v-flex> 
                                                <v-flex v-bind:xs3="true">
                                                     <span v-on:click="fld.active = !fld.active">
                                                    <v-text-field
                                                                  v-bind:value="fld.fullName"
                                                                  label="API Name"
                                                                  v-bind:disabled="!fld.active"
                                                                  v-bind:readonly="fld.active"
                                                                  ></v-text-field>
                                                    </span>
                                                </v-flex>
                                                
                                                <v-flex v-bind:xs3="true">
                                                     <span v-on:click="fld.active = !fld.active">
                                                    <v-text-field
                                                                  v-bind:value="fld.type"
                                                                  label="Data Type"
                                                                  v-bind:disabled="!fld.active"
                                                                  v-bind:readonly="fld.active"
                                                                  ></v-text-field>
                                                    </span>
                                                </v-flex>
                                                <v-flex v-bind:xs1="true">
                                                </v-flex>
                                            </template>
                                        </v-layout>
                                    </v-container>
                                </v-form>
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="light-blue darken-1" v-bind:flat="true" v-on:click.stop="clickedCreateSalesforceObject" v-bind:disabled="!canCreateNewSalesforceCustomObject">Deploy</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--New Salesforce Custom Object-->  
                    
                    
                    <!--New Field Set Dialog-->                
                    <v-dialog v-bind:persistent="true" max-width="80%" v-bind:scrollable="true" v-model="page.newObject.show">
                        <v-card v-if="page.newObject.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>New Field Set</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.newObject.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-divider></v-divider>
                            <v-card-text>
                                <v-form>
                                    <v-container v-bind:fluid="true">
                                        <v-layout v-bind:row="true" v-bind:wrap="true">
                                            <v-flex v-bind:xs12="true">
                                                <v-subheader class="indigo--text pa-0">Field Set</v-subheader>
                                                <v-text-field
                                                              v-model="page.newObject.form.alias"
                                                              label="Alias"
                                                              v-bind:required="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs12="true">
                                                <v-subheader class="indigo--text pa-0">Key Field</v-subheader>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-model="page.newObject.form.keyFieldLabel"
                                                              label="Label"
                                                              v-bind:required="true"
                                                              v-bind:clearable="true"                                       
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-text-field
                                                              v-model="page.newObject.form.keyFieldName"
                                                              label="API Name"
                                                              v-bind:required="true"
                                                              v-bind:clearable="true"
                                                              ></v-text-field>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-select
                                                          v-bind:items="page.newField.typeOptions"
                                                          v-model="page.newObject.form.keyFieldType"
                                                          label="Data Type"
                                                          item-value="text"
                                                          v-on:change="typeChanged($event, 'newObject')"
                                                          ></v-select>
                                            </v-flex>
                                            <v-flex v-bind:xs6="true">
                                                <v-select v-if="page.newObject.form.keyFieldType == 'Date'"
                                                          key="dateSelect"
                                                          v-bind:items="page.newField.dateOptions"
                                                          v-model="page.newObject.form.keyFieldFormat"
                                                          label="Data Format"
                                                          item-value="text"
                                                          ></v-select>
                                                <v-select v-else-if="page.newObject.form.keyFieldType == 'DateTime'"
                                                          key="dateTimeSelect"
                                                          v-bind:items="page.newField.dateTimeOptions"
                                                          v-model="page.newObject.form.keyFieldFormat"
                                                          label="Data Format"
                                                          item-value="text"
                                                          ></v-select>
                                                <v-select v-else-if="page.newObject.form.keyFieldType == 'Number'"
                                                          key="NumberSelect"
                                                          v-bind:items="page.newField.scaleOptions"
                                                          v-model="page.newObject.form.keyFieldFormat"
                                                          label="Data Format"
                                                          item-value="value"
                                                          ></v-select>                                                
                                            </v-flex>
                                        </v-layout>
                                    </v-container>
                                </v-form>
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="cyan" v-bind:flat="true" v-on:click.stop="clickedSaveNewObject" v-bind:disabled="!canSaveNewObject">Save</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--New Field Set Dialog-->  
                    
                    
                    <!--New Project Dialog-->                
                    <v-dialog v-bind:persistent="true" max-width="60%" v-model="page.newProject.show">
                        <v-card v-if="page.newProject.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>
                                    <template v-if="page.newProject.id != null && page.newProject.id.length > 4">
                                        Edit Project
                                    </template>
                                    <template v-else-if="true">
                                        New Project
                                    </template>
                                </span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.newProject.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            
                            <v-card-text>
                                <v-form>
                                    <v-text-field
                                                  v-model="page.newProject.form.title"
                                                  label="Title"
                                                  v-bind:required="true"
                                                  ></v-text-field>
                                    <v-textarea
                                                v-model="page.newProject.form.memo"
                                                label="Description"
                                                ></v-textarea>
                                </v-form>
                            </v-card-text>
                            <v-card-actions>
                                <template v-if="page.newProject.id != null && page.newProject.id.length > 4">
                                    <v-btn color="error" v-bind:flat="true" v-on:click.stop="clickedDeleteProject">Delete</v-btn>
                                </template>
                                <v-spacer></v-spacer>
                                <v-btn color="cyan" v-bind:flat="true" v-on:click.stop="saveNewProject" v-bind:disabled="!canSaveNewProject">Save</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--New Project Dialog-->  
                    
                    
                    <!-- New Project From CSV -->
                    <v-dialog v-bind:persistent="true" v-bind:scrollable="true" v-model="page.newProjectFromCsv.show" v-bind:fullscreen="true" v-bind:hide-overlay="true" transition="dialog-bottom-transition">
                        <v-card v-if="page.newProjectFromCsv.show">
                            <v-toolbar color="white" class="elevation-0">
                               	<v-toolbar-title style="width: 300px" class="ml-0 pl-3">
                                    <span class="font-weight-light">New Project From CSV</span>
                                </v-toolbar-title>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" color="grey" v-bind:flat="true" v-on:click.stop="page.newProjectFromCsv.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                                
                            </v-toolbar>
                            <v-divider></v-divider>
                            <v-card-text class="pa-0">
                                
                                <div v-if="page.newProjectFromCsv.step == 1" class="pa-5 ma-5 text-xs-center">
                                    <input
                                           type="file"
                                           v-on:change="uploadedCsvFileForNewProject"
                                           />
                                </div>
                                <div v-else-if="page.newProjectFromCsv.step == 2">
                                    <v-data-table class="npfc-table" v-bind:headers="npfcHeaders" v-bind:items="npfcItems">
                                        <template slot="headers" slot-scope="props">
                                            <tr>
                                                <th v-for="(header, i) in props.headers" v-bind:key="'th1-' + i" v-bind:class="'pt-3 text-xs-' + i.align + ' td-active-' + page.newProjectFromCsv.fields[i].active">
                                                    <span>#{{(i + 1)}}</span> 
                                                    <v-checkbox v-model="page.newProjectFromCsv.fields[i].active" color="cyan"></v-checkbox>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th v-for="(header, i) in props.headers" v-bind:key="'th2-' + i" v-bind:class="'text-xs-' + i.align + ' td-active-' + page.newProjectFromCsv.fields[i].active">
                                                    <v-text-field v-model="page.newProjectFromCsv.fields[i].label"
                                                                  v-bind:required="true"
                                                                  label="Label"
                                                                  v-bind:dark="false"
                                                                  v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                                  ></v-text-field>
                                                    
                                                    <v-text-field
                                                                  v-model="page.newProjectFromCsv.fields[i].name"
                                                                  v-bind:required="true"
                                                                  label="API Name"
                                                                  v-bind:dark="false"
                                                                  v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                                  ></v-text-field>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th v-for="(header, i) in props.headers" v-bind:key="'th3-' + i" v-bind:class="'text-xs-' + i.align + ' td-active-' + page.newProjectFromCsv.fields[i].active">
                                                    <v-select
                                                              v-bind:items="page.newField.typeOptions"
                                                              v-model="page.newProjectFromCsv.fields[i].type"
                                                              label="Data Type"
                                                              v-bind:single-line="true"
                                                              item-value="text"
                                                              v-bind:dark="false"
                                                              v-on:change="typeChanged($event, 'newProjectFromCsv', i)"
                                                              v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                              ></v-select>
                                                    
                                                    <v-select v-if="page.newProjectFromCsv.fields[i].type == 'Date'"
                                                              key="dateSelect"
                                                              v-bind:items="page.newField.dateOptions"
                                                              v-model="page.newProjectFromCsv.fields[i].format"
                                                              v-bind:single-line="true"
                                                              item-value="text"
                                                              v-bind:dark="false"
                                                              v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                              ></v-select>
                                                    <v-select v-else-if="page.newProjectFromCsv.fields[i].type == 'DateTime'"
                                                              key="dateTimeSelect"
                                                              v-bind:items="page.newField.dateTimeOptions"
                                                              v-model="page.newProjectFromCsv.fields[i].format"
                                                              v-bind:single-line="true"
                                                              item-value="text"
                                                              v-bind:dark="false"
                                                              v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                              ></v-select>
                                                    <v-select v-else-if="page.newProjectFromCsv.fields[i].type == 'Number'"
                                                              key="NumberSelect"
                                                              v-bind:items="page.newField.scaleOptions"
                                                              v-model="page.newProjectFromCsv.fields[i].format"
                                                              v-bind:single-line="true"
                                                              item-value="value"
                                                              v-bind:dark="false"
                                                              v-bind:disabled="!page.newProjectFromCsv.fields[i].active"
                                                              ></v-select>
                                                    <v-select v-else-if="true"
                                                              label="---"
                                                              key="StringSelectInvalid"
                                                              v-model="page.newProjectFromCsv.fields[i].format"
                                                              v-bind:single-line="true"
                                                              v-bind:disabled="true"
                                                              v-bind:dark="false"
                                                              ></v-select>
                                                    
                                                </th>
                                            </tr>
                                        </template>
                                        <template slot="items" slot-scope="row">
                                            <td v-for="(i, index) in npfcHeaders" v-bind:class="'text-xs-' + i.align + ' td-active-' + page.newProjectFromCsv.fields[index].active">
                                                {{row.item[i.value]}}
                                                
                                            </td>
                                        </template>
                                    </v-data-table>
                                </div>
                                <div style="width:100%;height:100px;">
                                </div>
                            </v-card-text>
                        </v-card>
                    </v-dialog>
                    <!-- /New Project From CSV -->
                    
                    <!-- New Project From Template -->
                    <v-dialog v-bind:persistent="true" v-model="page.newProjectFromTemplate.show" v-bind:fullscreen="true" v-bind:hide-overlay="true" transition="dialog-bottom-transition">
                        <v-card v-if="page.newProjectFromTemplate.show">
                            <v-toolbar color="white" class="elevation-0" v-bind:dense="true">
                                <v-btn v-bind:icon="true" color="grey" v-bind:flat="true" v-on:click.native="page.newProjectFromTemplate.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                                <v-toolbar-title style="width: 300px" class="ml-0 pl-3">
                                    <span class="hidden-sm-and-down font-weight-light">Choose a Template</span>
                                </v-toolbar-title>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-on:click.stop="_updateAllTemplateList">
                                    <v-icon color="grey">refresh</v-icon>
                                </v-btn>
                                <v-menu v-bind:offset-y="true">
                                    <v-btn slot="activator" v-bind:flat="true" color="grey">
                                        <v-icon v-bind:left="true">language</v-icon>{{getLanguageLabelByVal[page.newProjectFromTemplate.lang.select]}}
                                    </v-btn>
                                    <v-list>
                                        <v-list-tile style="height: 30px;" v-for="(i, idx) in page.newProjectFromTemplate.lang.option" v-bind:key="'menulang' + idx" v-on:click="changeLang(i.value)">
                                            <v-list-tile-title>{{i.label}}</v-list-tile-title>
                                        </v-list-tile>
                                    </v-list>
                                </v-menu>
                            </v-toolbar>
                            
                            
                            <v-card-text>
                                <v-container v-bind:fluid="true" v-bind:class="'pa-0 myloading-' + page.newProjectFromTemplate.loading">
                                    <v-layout v-bind:row="true" v-bind:wrap="true">
                                        <v-flex v-bind:xs12="true" v-bind:sm4="true" v-bind:md3="true" class="pa-2">
                                            <div class="template-list-scroll-div template-list-left" style="padding-bottom: 120px;">
                                                <v-switch
                                                          label="Published By Me"
                                                          color="cyan"
                                                          v-model="page.newProjectFromTemplate.private"
                                                          v-bind:disabled="page.newProjectFromTemplate.favourite"
                                                          class=""
                                                          ></v-switch>
                                                <v-switch
                                                          label="Favorites"
                                                          color="cyan"
                                                          v-model="page.newProjectFromTemplate.favourite"
                                                          v-bind:disabled="page.newProjectFromTemplate.private"
                                                          class="mt-0"
                                                          ></v-switch>
                                                
                                                <v-subheader class="mt-0 pl-0">Industry</v-subheader>
                                                <v-checkbox 
                                                            class="mt-0" 
                                                            v-bind:hide-details="true" 
                                                            v-for="(i, idx) in page.newProjectFromTemplate.industry.option" 
                                                            v-bind:key="'industryoption' + idx" 
                                                            v-bind:label="i.label" 
                                                            v-bind:value="i.value" 
                                                            v-model="page.newProjectFromTemplate.industry.select"
                                                            color="cyan"
                                                            >
                                                </v-checkbox>
                                            </div>
                                        </v-flex>
                                        <v-flex v-bind:xs12="true" v-bind:sm8="true" v-bind:md9="true" class="pa-2">
                                            <v-layout v-bind:row="true" v-bind:wrap="true" class="template-list-scroll-div">
                                                
                                                <!-- Template List : NO DATA-->
                                                <template v-if="!(page.newProjectFromTemplate.list.length > 0) && page.newProjectFromTemplate.loading == false">
                                                    <v-flex v-bind:xs12="true" class="text-xs-center mt-5">
                                                        <span class="grey--text headline">No Template</span>
                                                    </v-flex>                                              
                                                </template>
                                                <!-- Template List : NO DATA-->
                                                
                                                <!-- Template List -->
                                                <template else-if="true" v-for="(i, idx) in showTemplateList">
                                                    <v-flex v-bind:xs12="true" v-bind:sm12="true" v-bind:md6="true" v-bind:lg4="true" v-bind:xl3="true"
                                                            v-bind:class="'template-list-item ' + (page.newProjectFromTemplate.select == i.id ? 'template-list-item-active':'')">
                                                        <v-card v-bind:hover="true" class="template-item">
                                                            <v-img
                                                                          v-bind:src="industryImg[i.industry]"
                                                                          height="110px"
                                                                          class="white--text template-item-media"
                                                                          v-on:click="selectTemplate(i.id)"
                                                                          >
                                                                <v-container v-bind:fill-height="true" v-bind:fluid="true">
                                                                    <v-layout v-bind:fill-height="true" v-bind:align-center="true">
                                                                        <v-flex v-bind:xs12="true" v-bind:align-end="true" v-bind:flexbox="true">
                                                                            <span class="title">{{getIndustryLabelByVal[i.industry]}}</span>
                                                                        </v-flex>
                                                                    </v-layout>
                                                                </v-container>
                                                                
                                                            </v-img>
                                                            
                                                            <v-card-title v-bind:cyan-title="true" class="pt-3 pb-1" v-on:click="selectTemplate(i.id)">
                                                                <div class="text-xs-right mb-1" style="width: 100%;">
                                                                    <span class="caption grey--text ">
                                                                        {{i.created | normalizeDate}}
                                                                    </span>
                                                                </div>
                                                                <div style="width:100%;">
                                                                    <v-tooltip v-bind:top="true">
                                                                        <h3 slot="activator" class="mb-1" style="font-size:1.35rem;font-weight:300;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                                                                            {{i.title}}
                                                                        </h3>
                                                                        <span>{{i.title}}</span>
                                                                    </v-tooltip>
                                                                    <v-tooltip v-bind:bottom="true">
                                                                        <div slot="activator" class="grey--text text--darken-3" style="overflow: hidden;width: 100%;height: 4rem;">
                                                                            <p class="ma-0" style="font-weight:300;font-size:.9rem;display:-webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 3;">
                                                                                {{i.memo}}
                                                                            </p>
                                                                        </div>
                                                                        <span>{{i.memo}}</span>
                                                                    </v-tooltip>
                                                                </div>
                                                            </v-card-title>
                                                            
                                                            <v-card-actions class="pa-3">
                                                                <v-avatar
                                                                          slot="activator"
                                                                          size="26px"
                                                                          color="grey lighten-2"
                                                                          >
                                                                    <v-icon
                                                                            color="white"
                                                                            >person</v-icon>
                                                                </v-avatar>
                                                                <span class="caption pl-2">{{i.name}}</span>                                                                
                                                                <v-spacer></v-spacer>
                                                                <template v-if="i.share">
                                                                    <span class="font-weight-medium orange--text text--lighten1">{{i.star}}</span>
                                                                    <v-btn v-if="i.stared" v-bind:icon="true" v-on:click="unstar(i.id)">
                                                                        <v-icon color="orange lighten-1">star</v-icon>
                                                                    </v-btn>
                                                                    <v-btn v-else-if="true" v-bind:icon="true" v-on:click="star(i.id)">
                                                                        <v-icon color="orange lighten-1">star_border</v-icon>
                                                                    </v-btn>
                                                                </template>
                                                                <template v-else-if="true">
                                                                    <v-btn v-bind:icon="true">
                                                                        <v-icon color="blue-grey lighten-3">lock</v-icon>
                                                                    </v-btn>
                                                                </template>
                                                            </v-card-actions>
                                                            <template >
                                                                <v-divider></v-divider>
                                                            </template>
                                                            <v-slide-y-transition>
                                                                <v-card-actions v-show="page.newProjectFromTemplate.select == i.id">
                                                                    <template v-if="i.editable == true">
                                                                        
                                                                        <v-btn v-bind:icon="true" v-bind:flat="true" color="grey lighten-2" v-on:click="clickedDeleteTemplate(i.id, i.title)">
                                                                            <v-icon>delete_outline</v-icon>
                                                                        </v-btn>
                                                                        <v-spacer></v-spacer>
                                                                        <v-btn v-bind:flat="true" color="cyan" v-on:click="openProject(i.id, i.title, i.memo, true)">
                                                                            <v-icon v-bind:left="true">search</v-icon>
                                                                            Open
                                                                        </v-btn>
                                                                        
                                                                    </template>
                                                                    <template v-else-if="i.editable == false">
                                                                        <v-btn v-bind:block="true" v-bind:flat="true" color="cyan" v-on:click="openProject(i.id, i.title, i.memo, true)">
                                                                            <v-icon v-bind:left="true">search</v-icon>
                                                                            Open This Template
                                                                        </v-btn>
                                                                    </template>
                                                                </v-card-actions>
                                                                
                                                            </v-slide-y-transition>
                                                        </v-card>
                                                    </v-flex>
                                                </template>
                                                <!-- Template List -->
                                                <v-flex v-bind:xs12="true" v-if="page.newProjectFromTemplate.list.length > 0">
                                                <v-toolbar color="transparent" class="elevation-0 my-pn-toolbar px-2" v-bind:flat="true" v-bind:dense="true">
                                                    <v-select
                                                  v-model="page.newProjectFromTemplate.listPage.countPerPage"
                                                  v-bind:items="page.newProjectFromTemplate.listPage.countOption"
                                                  class="mt-0"
                                                  ></v-select>
                                        <v-spacer></v-spacer>
                                        <v-pagination
                                                      v-model="page.newProjectFromTemplate.listPage.now" 
                                                      v-bind:length="Math.ceil(page.newProjectFromTemplate.list.length / page.newProjectFromTemplate.listPage.countPerPage)"
                                                      v-bind:total-visible="9"
                                                      color="cyan">
                                        </v-pagination>
                                                    </v-toolbar>
                                                    
                                                </v-flex>
                                            </v-layout>
                                                                                          
                                        </v-flex>
                                        
                                    </v-layout>
                                </v-container>
                            </v-card-text>
                        </v-card>
                    </v-dialog>
                    <!-- New Project From Template -->
                    
                    
                    <!--New Template Dialog-->                
                    <v-dialog v-bind:persistent="true" max-width="60%" v-bind:scrollable="true" v-model="page.newTemplateDialog.show">
                        <v-card v-if="page.newTemplateDialog.show">
                            <v-card-title v-bind:class="settings.modal.headerClass">
                                <span>New Template</span>
                                <v-spacer></v-spacer>
                                <v-btn v-bind:icon="true" v-bind:dark="true" v-bind:flat="true" v-on:click.stop="page.newTemplateDialog.show = false">
                                    <v-icon>close</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-divider></v-divider>
                            <v-card-text>
                                <v-form>
                                    <v-text-field
                                                  v-model="page.newTemplateDialog.form.title"
                                                  label="Title"
                                                  v-bind:required="true"
                                                  ></v-text-field>
                                    <v-textarea
                                                v-model="page.newTemplateDialog.form.memo"
                                                label="Description"
                                                v-bind:required="true"
                                                ></v-textarea>
                                    <v-select label="Industry"
                                              v-model="page.newTemplateDialog.form.industry"
                                              v-bind:items="page.newProjectFromTemplate.industry.option"
                                              item-text="label"
                                              ></v-select>
                                    <v-select label="Language"
                                              v-model="page.newTemplateDialog.form.lang"
                                              v-bind:items="page.newProjectFromTemplate.lang.option"
                                              item-text="label"
                                              ></v-select>
                                    <v-select label="Share"
                                              v-model="page.newTemplateDialog.form.share"
                                              v-bind:items="page.newTemplateDialog.share.option"
                                              item-text="label"
                                              ></v-select>                                    
                                </v-form>
                                
                                
                            </v-card-text>
                            <v-divider></v-divider>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="cyan" v-bind:flat="true" v-on:click.stop="saveNewTemplate" v-bind:disabled="!canSaveNewTemplate">Save</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                    <!--New Template Dialog-->  
                    
                    
                    
                    
                    
                    
                </v-app>
                <!-- Vue Scope -->
            </div>
            <script type="text/javascript" src="{!$Resource.jsforce}"></script>
            <script>
                var jsforceConn = new jsforce.Connection({ accessToken: '{!$API.Session_Id}' });
            </script>
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/moment.js'}"></script>
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/papaparse.js'}"></script>
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/axios.js'}"></script>
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/Chart.js'}"></script>
            <!--http://vue-charts.hchspersonal.tk/-->
            <script type="text/javascript" src="{!$Resource.DemoADM__vuecharts20180609}"></script>
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/vue.js'}"></script>
            <script src="{!$Resource.DemoADM__js + '/el.js'}"></script>
            <script src="{!$Resource.DemoADM__js + '/el_en.js'}"></script>
			<script>
				ELEMENT.locale(ELEMENT.lang.en);
            </script>            
            <script type="text/javascript" src="{!$Resource.DemoADM__js + '/vuetify.js'}"></script>
            <script type="text/javascript" src="{!$Resource.DemoADM__app}"></script>

        </body>
    </html>   
</apex:page>