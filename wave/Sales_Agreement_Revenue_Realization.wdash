{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[]},"filters":[],"gridLayouts":[{"name":"Default","numColumns":40,"pages":[{"label":"Untitled","name":"8cbf1d96-01ab-46ea-bad8-947eabdb966d","navigationHidden":false,"widgets":[{"colspan":40,"column":0,"name":"container_1","row":0,"rowspan":10,"widgetStyle":{"borderEdges":[]}},{"colspan":16,"column":0,"name":"text_1","row":1,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":28,"column":0,"name":"chart_1","row":4,"rowspan":5,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":28,"name":"number_1","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":["minWidth(450)","maxWidth(520)"],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#F2F6FA","cellSpacingX":4,"cellSpacingY":0,"fit":"original","gutterColor":"#C5D3E0"},"version":1.0}],"layouts":[],"steps":{"Agreement_revenue_re_1":{"broadcastFacet":true,"groups":["SalesAgreementProduct.SalesAgreementId"],"label":"Agreement revenue realization","numbers":["Planned Amount","Revenue","Revised Planned Amount","Planned Amount Till Date","Realization"],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nresult = group q by ('SalesAgreementProduct.SalesAgreementId', 'Id');\nresult = foreach result generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'Id' as 'Id', sum(q.'DerivedPlannedAmount') as 'A', sum(q.'DerivedActualAmount') as 'B', case when first('isValidProductSchedule') == \"true\" then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'D', case when date_to_epoch(now()) < min(q.'ActualEndDate_sec_epoch') &&  date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), now()) + 1 when date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'G', min(q.'PlannedDailyAmount') as 'E';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId', 'Id', 'A', 'B', 'D', 'E', B/A as 'C', D * E as 'F', E * G as 'H';\nresult = order result by ('SalesAgreementProduct.SalesAgreementId' asc, 'Id' asc);\nresult = group result by 'SalesAgreementProduct.SalesAgreementId';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', sum('A') as 'Planned Amount', sum('B') as 'Revenue', coalesce(sum('F'),sum('A')) as 'Revised Planned Amount', coalesce(sum('H'),sum('A')) as 'Planned Amount Till Date', round(sum('B')/sum('A'),2) as 'Realization'; \nresult = limit result 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":["SalesAgreementProduct.SalesAgreementId"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","max":100,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"flatgauge","medium":33,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[150,80],"enable":false,"type":"x","chartsPerLine":4},"colors":{"mediumColor2":"#F29946","mediumColor1":"#FED444","lowColor1":"#F71979","lowColor2":"#CC203D","highColor1":"#7BDE4E","highColor2":"#169913"},"high":66,"min":0,"showActionMenu":true,"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"container_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original","interactions":[]},"type":"container"},"number_1":{"parameters":{"compact":false,"exploreLink":true,"interactions":[],"measureField":"Realization","numberColor":"rgb(3, 46, 97)","numberSize":24,"showActionMenu":true,"step":"Agreement_revenue_re_1","textAlignment":"left","title":"","titleColor":"#091A3E","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"text_1":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E","align":"left"},"insert":"Revenue Realization"}]},"interactions":[],"showActionMenu":true},"type":"text"},"chart_1":{"parameters":{"max":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount\"),0).asObject()}}","legend":{"showHeader":true,"show":false,"position":"right-top","inside":false},"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Revenue"],"showNullValues":true,"customizeLegend":true,"showPercentage":false,"showDimensions":false,"showMeasures":true,"dimensions":["SalesAgreementProduct.SalesAgreementId"]},"description":"[Realization] of  [Planned Amount]"}},"visualizationType":"flatgauge","exploreLink":false,"medium":33,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[150,80],"enable":false,"type":"x","parameters":{},"chartsPerLine":4},"colors":{"mediumColor2":"#F29946","mediumColor1":"#FED444","lowColor1":"#F71979","lowColor2":"#CC203D","highColor1":"#7BDE4E","highColor2":"#169913"},"high":66,"columnMap":{"trellis":[],"plots":["Revenue"]},"showActionMenu":false,"min":0,"valueType":"compactNumber","theme":"wave","step":"Agreement_revenue_re_1","referenceLines":[{"color":"#00A0E0","label":{"data":"Planned Amount Till Date","type":"static"},"value":{"data":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount Till Date\"),0).asObject()}}","type":"static"}}],"compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}}}