{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[]},"filters":[],"gridLayouts":[{"maxWidth":400,"name":"Default","numColumns":48,"pages":[{"label":"Agreement1","name":"2771600e-3a0d-4aa6-90ad-25d806f7369c","navigationHidden":false,"widgets":[{"colspan":23,"column":2,"name":"text_3","row":1,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":2,"name":"container_3","row":7,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":3,"name":"text_4","row":11,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":46,"column":2,"name":"text_2","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":46,"column":2,"name":"text_31","row":18,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":16,"name":"image_1","row":33,"rowspan":1,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":2,"name":"container_12","row":22,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":3,"name":"text_40","row":26,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":39,"name":"link_7","row":9,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":3,"column":39,"name":"link_8","row":24,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":2,"name":"link_9","row":32,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":3,"name":"text_15","row":8,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":35,"column":3,"name":"text_16","row":14,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":36,"column":3,"name":"text_5","row":29,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":3,"name":"text_6","row":23,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]},{"label":"Agreement2","name":"f055f990-8913-47e7-9411-6a2f84bbb42a","navigationHidden":false,"widgets":[{"colspan":23,"column":2,"name":"text_3","row":1,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":38,"column":4,"name":"container_3","row":7,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":46,"column":2,"name":"text_2","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":46,"column":2,"name":"text_31","row":18,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":16,"name":"image_1","row":33,"rowspan":1,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":5,"name":"text_38","row":11,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":37,"column":2,"name":"container_12","row":22,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":3,"name":"text_40","row":26,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":1,"name":"link_5","row":9,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":3,"column":39,"name":"link_6","row":24,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":12,"column":2,"name":"link_9","row":32,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":18,"column":5,"name":"text_18","row":8,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":5,"name":"text_19","row":14,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":3,"name":"text_6","row":23,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":35,"column":3,"name":"text_5","row":29,"rowspan":2,"widgetStyle":{"borderEdges":[]}}]},{"label":"Agreement3","name":"f3cecb0c-df03-4a25-bde0-3f4a0871cbc1","navigationHidden":false,"widgets":[{"colspan":23,"column":2,"name":"text_3","row":1,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":2,"name":"container_3","row":7,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":3,"name":"text_4","row":11,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":46,"column":2,"name":"text_2","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":46,"column":2,"name":"text_31","row":18,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":12,"column":16,"name":"image_1","row":33,"rowspan":1,"widgetStyle":{"borderEdges":[]}},{"colspan":3,"column":39,"name":"link_2","row":9,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":38,"column":4,"name":"container_12","row":22,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":5,"name":"text_40","row":26,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":1,"name":"link_4","row":24,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":2,"name":"link_9","row":32,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":5,"name":"text_17","row":23,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":5,"name":"text_20","row":29,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":35,"column":3,"name":"text_16","row":14,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":18,"column":3,"name":"text_15","row":8,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]},{"label":"Agreement4","name":"9198b664-a443-451d-91db-4d671e9785b1","navigationHidden":false,"widgets":[{"colspan":23,"column":2,"name":"text_3","row":1,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":46,"column":2,"name":"text_2","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":46,"column":2,"name":"text_31","row":18,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":3,"column":1,"name":"link_1","row":9,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":12,"column":16,"name":"image_1","row":33,"rowspan":1,"widgetStyle":{"borderEdges":[]}},{"colspan":38,"column":4,"name":"container_3","row":7,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":5,"name":"text_4","row":11,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":38,"column":4,"name":"container_12","row":22,"rowspan":10,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"rgb(242, 246, 250)","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":11,"column":5,"name":"text_40","row":26,"rowspan":2,"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":1,"name":"link_3","row":24,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":8,"borderWidth":1}},{"colspan":13,"column":2,"name":"link_9","row":32,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":5,"name":"text_17","row":23,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":5,"name":"text_20","row":29,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":37,"column":5,"name":"text_19","row":14,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":11,"column":5,"name":"text_18","row":8,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#FFFFFF","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"#FFFFFF"},"version":1.0}],"layouts":[],"steps":{"Date_Filter_1":{"broadcastFacet":true,"groups":[],"label":"Date_Filter","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"1970\" as 'Date_Year', \"01\" as 'Date_Month', \"01\" as 'Date_Day';\nq = group q by ('Date_Year', 'Date_Month', 'Date_Day');\nq = foreach q generate 'Date_Year', 'Date_Month', 'Date_Day', count() as 'sum';\n-- use fill() to generate null rows for any missing dates. Then you can use timeseries().\nq = fill q by (dateCols=('Date_Year','Date_Month','Date_Day', \"Y-M-D\"));\nq = timeseries q generate 'sum' as 'cnt' with (length=60000,  dateCols=('Date_Year','Date_Month','Date_Day', \"Y-M-D\"));\nq = foreach q generate 'Date_Year' + \"-\" + 'Date_Month' + \"-\" + 'Date_Day'+ \" 00:00:00\" as 'Date','Date_Year', 'Date_Month', 'Date_Day';\nq = filter q by date('Date_Year', 'Date_Month', 'Date_Day') in [\"current fiscal_year\"..\"current fiscal_year\"];\nq = foreach q generate toDate('Date') as 'Date', date_to_epoch(toDate('Date')) as 'Date_sec_epoch';\nq = group q by all;\nq = foreach q generate min('Date') as 'Min Date', toDate(max('Date_sec_epoch')+86399) as 'Max Date', min('Date_sec_epoch')*1000 as 'Min', (max('Date_sec_epoch')+86399)*1000 as 'Max',           date_to_epoch(toDate(number_to_string(string_to_number(date_to_string(toDate(min('Date_sec_epoch')),\"yyyy\"))-1,\"####\")+substr(date_to_string(toDate(min('Date_sec_epoch')),\"yyyy-MM-dd\"),5),\"yyyy-MM-dd\"))*1000 as 'Prev_Min', (date_to_epoch(toDate(number_to_string(string_to_number(date_to_string(toDate(max('Date_sec_epoch')),\"yyyy\"))-1,\"####\")+substr(date_to_string(toDate(max('Date_sec_epoch')),\"yyyy-MM-dd\"),5),\"yyyy-MM-dd\"))+86399)*1000 as 'Prev_Max';","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Bottom1_3":{"broadcastFacet":true,"groups":[],"label":"Bottom1","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(WorstSalesAgreements_1.result, 1, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(WorstSalesAgreements_1.result, 1, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 1, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 1, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"SalesAgreementProduc_3":{"broadcastFacet":true,"groups":[],"label":"SalesAgreementProduc_3","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(BestSalesAgreements_1.result, 0, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(BestSalesAgreements_1.result, 0, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(BestSalesAgreements_1.result, 0, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(BestSalesAgreements_1.result, 0, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"BestSalesAgreements_1":{"broadcastFacet":true,"groups":["RowNumber"],"label":"BestSalesAgreements","numbers":["A","B","C"],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\n\nq = filter q by 'SalesAgreementProduct.SalesAgreement.Status' in [\"Activated\"];\n\n\nq = foreach q generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', q.'DerivedActualAmount'/(daysBetween(toDate(q.'StartDate_sec_epoch'),case when toDate(q.'ActualEndDate_sec_epoch') < now() then toDate(q.'ActualEndDate_sec_epoch') else now() end)+1) as 'ActualDailyAmount', \n(case when toDate('StartDate_sec_epoch') > now() then 0 else (daysBetween((case when 'StartDate_sec_epoch' < {{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000 && 'EndDate_sec_epoch' > {{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000 then toDate({{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000) else toDate('StartDate_sec_epoch') end),case when toDate(q.'ActualEndDate_sec_epoch') < now() then toDate(q.'ActualEndDate_sec_epoch') else now() end)+1) end) as 'ActualDays_YTD', q.'PlannedDailyAmount' as 'PlannedDailyAmount';\n\nq = foreach q generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', (q.'ActualDailyAmount'*q.'ActualDays_YTD') as 'ActualAmountFinal', (q.'PlannedDailyAmount'*q.'ActualDays_YTD') as 'PlannedAmountFinal', q.'ActualDailyAmount' as 'ActualDailyAmount', q.'PlannedDailyAmount' as 'PlannedDailyAmount';\n\nresult = group q by ('SalesAgreementProduct.SalesAgreementId', 'SalesAgreementProduct.SalesAgreement.Name');\n\nresult = foreach result generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', sum(q.'ActualAmountFinal') as 'A', sum(q.'PlannedAmountFinal') as 'B', \n     sum((q.'ActualAmountFinal'))/sum((q.'PlannedAmountFinal')) as 'C', number_to_string(row_number() over([..] partition by all order by sum((q.'ActualAmountFinal'))/sum((q.'PlannedAmountFinal'))),\"#,###\") as 'RowNumber';\nresult = order result by ('C' desc nulls last, 'B' desc nulls last);\nresult = limit result 4;\nrow1 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A1\" as RowNumber;\nrow2 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A2\" as RowNumber;\nrow3 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A3\" as RowNumber;\nrow4 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A4\" as RowNumber;\n\nfinal = union result, row1, row2, row3, row4;\nfinal = group final by RowNumber;\nfinal = foreach final generate RowNumber, coalesce(first('SalesAgreementProduct.SalesAgreementId'),\"NA\") as 'SalesAgreementProduct.SalesAgreementId', coalesce(first('SalesAgreementProduct.SalesAgreement.Name'),\"NA\") as 'SalesAgreementProduct.SalesAgreement.Name', sum('A') as 'A', sum('B') as 'B', sum('C') as 'C';\nfinal = order final by ('C' desc, 'B' desc);","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":["RowNumber","SalesAgreementProduct.SalesAgreementId","SalesAgreementProduct.SalesAgreement.Name"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"Bottom1_1":{"broadcastFacet":true,"groups":[],"label":"Bottom1","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(WorstSalesAgreements_1.result, 0, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(WorstSalesAgreements_1.result, 0, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 0, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 0, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"WorstSalesAgreements_1":{"broadcastFacet":true,"groups":["RowNumber"],"label":"WorstSalesAgreements","numbers":["A","B","C"],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\n\nq = filter q by 'SalesAgreementProduct.SalesAgreement.Status' in [\"Activated\"];\nq = filter q by 'isValidProductSchedule' == \"true\";\n\nq = foreach q generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', q.'DerivedActualAmount'/(daysBetween(toDate(q.'StartDate_sec_epoch'),case when toDate(q.'ActualEndDate_sec_epoch') < now() then toDate(q.'ActualEndDate_sec_epoch') else now() end)+1) as 'ActualDailyAmount', \n(case when toDate('StartDate_sec_epoch') > now() then 0 else (daysBetween((case when 'StartDate_sec_epoch' < {{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000 && 'EndDate_sec_epoch' > {{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000 then toDate({{coalesce(cell(Date_Filter_1.result,0,\"Min\"),0).asObject()}}/1000) else toDate('StartDate_sec_epoch') end),case when toDate(q.'ActualEndDate_sec_epoch') < now() then toDate(q.'ActualEndDate_sec_epoch') else now() end)+1) end) as 'ActualDays_YTD', q.'PlannedDailyAmount' as 'PlannedDailyAmount';\n\nq = foreach q generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', (q.'ActualDailyAmount'*q.'ActualDays_YTD') as 'ActualAmountFinal', (q.'PlannedDailyAmount'*q.'ActualDays_YTD') as 'PlannedAmountFinal', q.'ActualDailyAmount' as 'ActualDailyAmount', q.'PlannedDailyAmount' as 'PlannedDailyAmount';\n\nresult = group q by ('SalesAgreementProduct.SalesAgreementId', 'SalesAgreementProduct.SalesAgreement.Name');\n\nresult = foreach result generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'SalesAgreementProduct.SalesAgreement.Name' as 'SalesAgreementProduct.SalesAgreement.Name', sum(q.'ActualAmountFinal') as 'A', sum(q.'PlannedAmountFinal') as 'B', \n    sum((q.'ActualAmountFinal'))/sum((q.'PlannedAmountFinal'))  as 'C', number_to_string(row_number() over([..] partition by all order by sum((q.'ActualAmountFinal'))/sum((q.'PlannedAmountFinal'))),\"#,###\") as 'RowNumber';\nresult = order result by ('C' asc, B desc);\nresult = limit result 4;\n\nrow1 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A1\" as RowNumber;\nrow2 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A2\" as RowNumber;\nrow3 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A3\" as RowNumber;\nrow4 = foreach result generate null as 'SalesAgreementProduct.SalesAgreementId', null as 'SalesAgreementProduct.SalesAgreement.Name', 0 as 'A', 0 as 'B', 0 as 'C', \"A4\" as RowNumber;\n\nfinal = union result, row1, row2, row3, row4;\nfinal = group final by RowNumber;\nfinal = foreach final generate RowNumber, coalesce(first('SalesAgreementProduct.SalesAgreementId'),\"NA\") as 'SalesAgreementProduct.SalesAgreementId', coalesce(first('SalesAgreementProduct.SalesAgreement.Name'),\"NA\") as 'SalesAgreementProduct.SalesAgreement.Name', \nsum('A') as 'A', sum('B') as 'B', sum('C') as 'C';\n--final = order final by ('C' asc, B desc);\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":["RowNumber","SalesAgreementProduct.SalesAgreementId","SalesAgreementProduct.SalesAgreement.Name"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"Bottom1_7":{"broadcastFacet":true,"groups":[],"label":"Bottom1","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(WorstSalesAgreements_1.result, 3, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(WorstSalesAgreements_1.result, 3, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 3, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 3, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"Bottom1_5":{"broadcastFacet":true,"groups":[],"label":"Bottom1","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(WorstSalesAgreements_1.result, 2, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(WorstSalesAgreements_1.result, 2, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 2, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(WorstSalesAgreements_1.result, 2, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"SalesAgreementProduc_7":{"broadcastFacet":true,"groups":[],"label":"SalesAgreementProduc_7","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(BestSalesAgreements_1.result, 3, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(BestSalesAgreements_1.result, 3, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(BestSalesAgreements_1.result, 3, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(BestSalesAgreements_1.result, 3, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"SalesAgreementProduc_4":{"broadcastFacet":true,"groups":[],"label":"SalesAgreementProduc_4","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(BestSalesAgreements_1.result, 1, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(BestSalesAgreements_1.result, 1, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(BestSalesAgreements_1.result, 1, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(BestSalesAgreements_1.result, 1, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"SalesAgreementProduc_5":{"broadcastFacet":true,"groups":[],"label":"SalesAgreementProduc_5","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nq = foreach q generate \"{{cell(BestSalesAgreements_1.result, 2, \"SalesAgreementProduct.SalesAgreement.Name\").asString()}}\" as 'SalesAgreementProduct.SalesAgreement.Name', \"{{cell(BestSalesAgreements_1.result, 2, \"SalesAgreementProduct.SalesAgreementId\").asString()}}\" as 'SalesAgreementProduct.SalesAgreementId', string_to_number(\"{{cell(BestSalesAgreements_1.result, 2, \"A\").asString()}}\") as 'ActualAmount', string_to_number(\"{{cell(BestSalesAgreements_1.result, 2, \"C\").asString()}}\") as 'Compliance' ;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}}},"widgetStyle":{"backgroundColor":"rgba(244, 244, 244, 0.4)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"text_18":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"rgb(4, 132, 75)"},"insert":"110%"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_17":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"rgb(166, 26, 20)"},"insert":"5%"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_19":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"rgb(9, 26, 62)"},"insert":"[Top 2nd Performing Sales Agreement HERE]"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_38":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"10px","color":"#335779"},"insert":"COMPLIANCE"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_16":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"rgb(9, 26, 62)"},"insert":"[Top Performing Sales Agreement HERE]"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_15":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"rgb(4, 132, 75)"},"insert":"115%"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_31":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"#335779"},"insert":"Your worst performing agreements (year to date) based on revenue realization:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"container_3":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original","interactions":[]},"type":"container"},"text_3":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Agreement Performance"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true,"tooltip":""},"type":"text"},"text_2":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"#335779"},"insert":"Your best performing agreements (year to date) based on revenue realization:"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_5":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"rgb(9, 26, 62)"},"insert":"[Worst Performing Sales Agreement HERE]"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_4":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"10px","color":"#335779"},"insert":"COMPLIANCE"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_6":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"20px","color":"rgb(166, 26, 20)"},"insert":"0%"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"link_3":{"parameters":{"destinationLink":{"name":"f055f990-8913-47e7-9411-6a2f84bbb42a"},"destinationType":"page","fontSize":20,"includeState":false,"text":"<","textAlignment":"center","textColor":"#335779"},"type":"link"},"link_4":{"parameters":{"destinationLink":{"name":"2771600e-3a0d-4aa6-90ad-25d806f7369c"},"destinationType":"page","fontSize":20,"includeState":false,"text":"<","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"link_1":{"parameters":{"destinationLink":{"name":"f3cecb0c-df03-4a25-bde0-3f4a0871cbc1"},"destinationType":"page","fontSize":20,"includeState":false,"text":"<","textAlignment":"center","textColor":"#335779"},"type":"link"},"link_2":{"parameters":{"destinationLink":{"name":"9198b664-a443-451d-91db-4d671e9785b1"},"destinationType":"page","fontSize":20,"includeState":false,"text":">","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"text_20":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"12px","color":"rgb(9, 26, 62)"},"insert":"[2nd Worst Performing Sales Agreement HERE]"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"link_9":{"parameters":{"destinationLink":{"name":"Sales_Agreements_Insights","namespace":""},"destinationType":"dashboard","fontSize":10,"includeState":false,"text":"VIEW DASHBOARD","textAlignment":"left","textColor":"#0070D2"},"type":"link"},"text_40":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"10px","color":"#335779"},"insert":"COMPLIANCE"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"link_7":{"parameters":{"destinationLink":{"name":"f055f990-8913-47e7-9411-6a2f84bbb42a"},"destinationType":"page","fontSize":20,"includeState":false,"text":">","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"link_8":{"parameters":{"destinationLink":{"name":"f3cecb0c-df03-4a25-bde0-3f4a0871cbc1"},"destinationType":"page","fontSize":20,"includeState":false,"text":">","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"link_5":{"parameters":{"destinationLink":{"name":"2771600e-3a0d-4aa6-90ad-25d806f7369c"},"destinationType":"page","fontSize":20,"includeState":false,"text":"<","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"link_6":{"parameters":{"destinationLink":{"name":"9198b664-a443-451d-91db-4d671e9785b1"},"destinationType":"page","fontSize":20,"includeState":false,"text":">","textAlignment":"center","textColor":"rgb(51, 87, 121)"},"type":"link"},"image_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"fitwidth","image":{"name":"Powered_by_analytics_bannerpng7","namespace":""},"interactions":[]},"type":"image"},"container_12":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original","interactions":[]},"type":"container"}}}