{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[]},"filters":[],"gridLayouts":[{"maxWidth":1000,"name":"Default","numColumns":40,"pages":[{"label":"Untitled","name":"8cbf1d96-01ab-46ea-bad8-947eabdb966d","navigationHidden":false,"widgets":[{"colspan":40,"column":0,"name":"container_1","row":0,"rowspan":10,"widgetStyle":{"borderEdges":[]}},{"colspan":16,"column":0,"name":"text_1","row":1,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":28,"column":0,"name":"chart_1","row":4,"rowspan":5,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":28,"name":"number_1","row":4,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":40,"column":0,"name":"chart_3","row":10,"rowspan":19,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#FFFFFF","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"#FFFFFF"},"version":1.0}],"layouts":[],"steps":{"StartDate_Year_Start_1":{"broadcastFacet":true,"groups":[],"label":"StartDate_Year_Start_1","numbers":[],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nresult = group q by ('StartDate_Year', 'StartDate_Month');\nresult = foreach result generate q.'StartDate_Year' + \"~~~\" + q.'StartDate_Month' as 'StartDate_Year~~~StartDate_Month',\nfirst(StartDate_sec_epoch) as 'StartDate_sec_epoch', sum(q.'ActualAmount') as 'A';\nresult = group result by 'StartDate_Year~~~StartDate_Month';\nresult = foreach result generate 'StartDate_Year~~~StartDate_Month', first(A) as 'A', \ncase when first('StartDate_sec_epoch') > date_to_epoch(now()) then null\nelse sum(sum(A)) over ([..0] partition by all order by ('StartDate_Year~~~StartDate_Month')) end as 'Cumulative Actual Revenue';\n--result = filter result by 'B' is not null;\nresult = order result by ('StartDate_Year~~~StartDate_Month' asc);\nresult = limit result 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showPoints":false,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"time","missingValue":"connect","dashLine":{"measures":"","showDashLine":false},"timeAxis":{"showTitle":true,"showAxis":true,"referenceLines":[],"title":""},"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnProperties":{},"fillArea":true,"columnMap":{"split":[],"timeAxis":["StartDate_Year~~~StartDate_Month"],"trellis":[],"plots":["Cumulative Actual Revenue"]},"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"color":"#00A0E0","label":{"data":"Planned Amount Till Date","type":"static"},"value":{"data":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount Till Date\"),0).asObject()}}","type":"static"}}],"title":"","customDomain":{"showDomain":false}},"valueType":"none","theme":"wave","applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}},"Agreement_revenue_re_1":{"broadcastFacet":true,"groups":["SalesAgreementProduct.SalesAgreementId"],"label":"Agreement revenue realization","numbers":["Planned Amount","Revenue","Revised Planned Amount","Planned Amount Till Date","Realization"],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nresult = group q by ('SalesAgreementProduct.SalesAgreementId', 'Id');\nresult = foreach result generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'Id' as 'Id', sum(q.'DerivedPlannedAmount') as 'A', sum(q.'DerivedActualAmount') as 'B', case when first('isValidProductSchedule') == \"true\" then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'D', case when date_to_epoch(now()) < min(q.'ActualEndDate_sec_epoch') &&  date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), now()) + 1 when date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'G', min(q.'PlannedDailyAmount') as 'E';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId', 'Id', 'A', 'B', 'D', 'E', B/A as 'C', D * E as 'F', E * G as 'H';\nresult = order result by ('SalesAgreementProduct.SalesAgreementId' asc, 'Id' asc);\nresult = group result by 'SalesAgreementProduct.SalesAgreementId';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', sum('A') as 'Planned Amount', sum('B') as 'Revenue', coalesce(sum('F'),sum('A')) as 'Revised Planned Amount', coalesce(sum('H'),sum('A')) as 'Planned Amount Till Date', round(sum('B')/sum('A'),2) as 'Realization'; \nresult = limit result 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":["SalesAgreementProduct.SalesAgreementId"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","max":100,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"flatgauge","medium":33,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[150,80],"enable":false,"type":"x","chartsPerLine":4},"colors":{"mediumColor2":"#F29946","mediumColor1":"#FED444","lowColor1":"#F71979","lowColor2":"#CC203D","highColor1":"#7BDE4E","highColor2":"#169913"},"high":66,"min":0,"showActionMenu":true,"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}},"Agreement_revenue_re_2":{"broadcastFacet":true,"groups":["SalesAgreementProduct.SalesAgreementId"],"label":"Agreement revenue realization","numbers":["Planned Amount","Revenue","Revised Planned Amount","Planned Amount Till Date","Realization"],"query":"q = load \"MFG_SalesAgreementProductSchedule\";\nresult = group q by ('SalesAgreementProduct.SalesAgreementId', 'Id');\nresult = foreach result generate q.'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', q.'Id' as 'Id', sum(q.'DerivedPlannedAmount') as 'A', sum(q.'DerivedActualAmount') as 'B', case when first('isValidProductSchedule') == \"true\" then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'D', case when date_to_epoch(now()) < min(q.'ActualEndDate_sec_epoch') &&  date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), now()) + 1 when date_to_epoch(now()) > min(q.'StartDate_sec_epoch') then daysBetween(toDate(min(q.'StartDate_sec_epoch')), toDate(min(q.'ActualEndDate_sec_epoch'))) + 1 else 0 end as 'G', min(q.'PlannedDailyAmount') as 'E';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId', 'Id', 'A', 'B', 'D', 'E', B/A as 'C', D * E as 'F', E * G as 'H';\nresult = order result by ('SalesAgreementProduct.SalesAgreementId' asc, 'Id' asc);\nresult = group result by 'SalesAgreementProduct.SalesAgreementId';\nresult = foreach result generate 'SalesAgreementProduct.SalesAgreementId' as 'SalesAgreementProduct.SalesAgreementId', sum('A') as 'Planned Amount', sum('B') as 'Revenue', coalesce(sum('F'),sum('A')) as 'Revised Planned Amount', coalesce(sum('H'),sum('A')) as 'Planned Amount Till Date', round(sum('B')/sum('A'),2) as 'Realization'; \nresult = limit result 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":["SalesAgreementProduct.SalesAgreementId"],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","max":100,"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"flatgauge","medium":33,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[150,80],"enable":false,"type":"x","chartsPerLine":4},"colors":{"mediumColor2":"#F29946","mediumColor1":"#FED444","lowColor1":"#F71979","lowColor2":"#CC203D","highColor1":"#7BDE4E","highColor2":"#169913"},"high":66,"min":0,"showActionMenu":true,"valueType":"compactNumber","theme":"wave","compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"container_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original","interactions":[]},"type":"container"},"number_1":{"parameters":{"compact":false,"exploreLink":true,"interactions":[],"measureField":"Realization","numberColor":"rgb(3, 46, 97)","numberSize":24,"showActionMenu":true,"step":"Agreement_revenue_re_1","textAlignment":"left","title":"","titleColor":"#091A3E","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"text_1":{"parameters":{"content":{"richTextContent":[{"attributes":{"size":"16px","color":"#091A3E"},"insert":"Revenue Realization"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"chart_1":{"parameters":{"max":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount\"),0).asObject()}}","legend":{"showHeader":true,"show":false,"position":"right-top","inside":false},"tooltip":{"content":{"legend":{"showBinLabel":true,"measures":["Revenue"],"showNullValues":true,"customizeLegend":true,"showPercentage":false,"showDimensions":false,"showMeasures":true,"dimensions":["SalesAgreementProduct.SalesAgreementId"]},"description":"[Realization] of  [Planned Amount]"}},"visualizationType":"flatgauge","exploreLink":false,"medium":33,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[150,80],"enable":false,"type":"x","parameters":{},"chartsPerLine":4},"colors":{"mediumColor2":"#F29946","mediumColor1":"#FED444","lowColor1":"#F71979","lowColor2":"#CC203D","highColor1":"#7BDE4E","highColor2":"#169913"},"high":66,"columnMap":{"trellis":[],"plots":["Revenue"]},"showActionMenu":false,"min":0,"valueType":"compactNumber","theme":"wave","step":"Agreement_revenue_re_1","referenceLines":[{"color":"#00A0E0","label":{"data":"Planned Amount Till Date","type":"static"},"value":{"data":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount Till Date\"),0).asObject()}}","type":"static"}}],"compactDecimalDigits":-1,"applyConditionalFormatting":true},"type":"chart"},"chart_3":{"parameters":{"autoFitMode":"keepLabels","showPoints":false,"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"time","missingValue":"connect","dashLine":{"measures":"","showDashLine":false},"timeAxis":{"showTitle":true,"predictiveLine":{"color":"#8932ED","label":"TODAY"},"showAxis":true,"referenceLines":[],"title":""},"exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnProperties":{},"fillArea":true,"columnMap":{"split":[],"timeAxis":["StartDate_Year~~~StartDate_Month"],"trellis":[],"plots":["Cumulative Actual Revenue"]},"showActionMenu":true,"showZero":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"referenceLines":[{"color":"#00A0E0","label":{"data":"Planned Amount Till Date","type":"static"},"value":{"data":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount Till Date\"),0).asObject()}}","type":"static"}},{"color":"#00A0E0","label":{"data":"Planned Amount","type":"static"},"value":{"data":"{{coalesce(cell(Agreement_revenue_re_1.result,0,\"Planned Amount\"),0).asObject()}}","type":"static"}}],"title":"","customDomain":{"showDomain":false}},"valueType":"none","theme":"light","step":"StartDate_Year_Start_1","applyConditionalFormatting":true,"drawArea":{"measure":"","showDrawArea":false,"bounding1":"","bounding2":""}},"type":"chart"}}}