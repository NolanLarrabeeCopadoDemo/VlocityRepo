["{\"nodes\":{\"ED_PR_Augment_OwnerProduct_from_SAP_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Account.OwnerId\",\"SalesAgreementProduct.ProductId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"OwnerProduct\",\"rightKey\":[\"SalesAgreement.Account.Owner.Id\",\"ProductId\"],\"rightSelect\":[\"SalesPrice\",\"Count_of_SAP\",\"OwnerProductId\",\"Planned_Quantity_Till_Date\",\"Min_Owner_Product_Price\",\"Max_Owner_Product_Price\",\"TotalActualQuantity\",\"Product.Family\",\"Product.Name\",\"Product.ProductCode\",\"Product.StockKeepingUnit\"]},\"sources\":[\"ED_PR_Augment_AccountProduct_from_SAP_onto_SAPS\",\"ED_PR_Compute_Monthly_Quantity_for_SAP\"]},\"ED_PR_DerivedFields_by_SAP\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"saqlExpression\":\"case when previous(Quantity_Till_This_Schedule) is null && date('EndDate_Year', 'EndDate_Month', 'EndDate_Day') in [..\\\"current day\\\"] then ActualQuantity when previous(Quantity_Till_This_Schedule) is null && date('EndDate_Year', 'EndDate_Month', 'EndDate_Day') in [\\\"1 day ahead\\\"..] then PlannedQuantity when date('EndDate_Year', 'EndDate_Month', 'EndDate_Day') in [..\\\"current day\\\"] then ActualQuantity+previous(Quantity_Till_This_Schedule) else\\n PlannedQuantity+previous(Quantity_Till_This_Schedule) end\",\"type\":\"Numeric\",\"scale\":2},\"label\":\"Quantity_Till_This_Schedule\",\"name\":\"Quantity_Till_This_Schedule\"},{\"expression\":{\"default\":\"0\",\"saqlExpression\":\"daysBetween(toDate(first(StartDate_sec_epoch)), toDate(StartDate_sec_epoch))\",\"type\":\"Numeric\",\"scale\":0},\"label\":\"Days_Till_This_Schedule\",\"name\":\"Days_Till_This_Schedule\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"StartDate\"}],\"partitionBy\":[\"SalesAgreementProductId\"]},\"sources\":[\"ED_PR_DerivedFields\"]},\"ED_PR_Augment_AccountProduct_from_SAP_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementProduct.ProductId\",\"SalesAgreement.AccountId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"AccountProduct\",\"rightKey\":[\"ProductId\",\"SalesAgreement.AccountId\"],\"rightSelect\":[\"TotalActualQuantity\",\"InitialPlannedQuantity\",\"SalesAgreement.Account.Owner.Id\",\"Min_Owner_Product_Price\",\"Max_Owner_Product_Price\",\"OwnerProductId\",\"Planned_Quantity_Till_Date\",\"Product.Family\",\"Product.Name\",\"Product.ProductCode\",\"Product.StockKeepingUnit\"]},\"sources\":[\"ED_PR_Augment_Product_from_SAP_onto_SAPS\",\"ED_PR_Compute_Monthly_Quantity_for_SAP\"]},\"ED_PR_Augment_SAP_Count_onto_SA\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"SAP\",\"rightKey\":[\"SalesAgreementId\"],\"rightSelect\":[\"Count_of_SAP\",\"Product.Family\",\"Product.Name\",\"Product.ProductCode\",\"Product.StockKeepingUnit\"]},\"sources\":[\"ED_PR_Digest_SA\",\"ED_PR_Compute_Count_Of_SAP\"]},\"ED_PR_Augment_Accounts_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreement.AccountId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Account\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"AccountNumber\",\"AccountSource\",\"AnnualRevenue\",\"BillingCity\",\"BillingCountry\",\"BillingGeocodeAccuracy\",\"BillingPostalCode\",\"BillingState\",\"BillingStreet\",\"CreatedDate\",\"IsDeleted\",\"Industry\",\"Id\",\"Name\",\"LastModifiedDate\",\"NumberOfEmployees\",\"Owner.LastLoginDate\",\"Owner.IsActive\",\"Owner.Id\",\"Owner.LastModifiedDate\",\"Ownership\",\"OwnerId\",\"Owner.UserRoleId\",\"Owner.ProfileId\",\"Owner.Name\",\"Type\"]},\"sources\":[\"ED_PR_Filter_Valid_SA\",\"ED_PR_Augment_User_onto_Account\"]},\"ED_PR_Digest_SAP\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CreatedDate\"},{\"name\":\"DiscountPercentage\"},{\"name\":\"Id\"},{\"name\":\"InitialPlannedQuantity\"},{\"name\":\"IsDeleted\"},{\"name\":\"IsUnderRevision\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastModifiedDate\"},{\"name\":\"ListPrice\"},{\"name\":\"Name\"},{\"name\":\"ProductId\"},{\"name\":\"SalesAgreementId\"},{\"name\":\"SalesPrice\"},{\"name\":\"TotalActualAmount\"},{\"name\":\"TotalActualQuantity\"},{\"name\":\"TotalForecastedAmount\"},{\"name\":\"TotalPlannedAmount\"}],\"object\":\"SalesAgreementProduct\"}},\"ED_PR_Digest_SAPS\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"ActualAmount\"},{\"name\":\"ActualQuantity\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CreatedDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"EndDate\"},{\"name\":\"DerivedPlannedAmount\"},{\"name\":\"DiscountPercentage\"},{\"name\":\"ForecastedAmount\"},{\"name\":\"ForecastedQuantity\"},{\"name\":\"Id\"},{\"name\":\"IsDeleted\"},{\"name\":\"IsUnderRevision\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastModifiedDate\"},{\"name\":\"Name\"},{\"name\":\"PlannedQuantity\"},{\"name\":\"SalesAgreementProductId\"},{\"name\":\"SalesPrice\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"StartDate\"}],\"object\":\"SalesAgreementProductSchedule\"}},\"ED_PR_Augment_SA_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementProduct.SalesAgreementId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SalesAgreement\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"TotalProposedAgreementAmount\",\"TotalAgreementAmount\",\"StatusCode\",\"Status\",\"StartDate\",\"ScheduleFrequency\",\"ScheduleCount\",\"SAP.Count_of_SAP\",\"RenewedToAgreementId\",\"RenewedFromAgreementId\",\"ProductLevel\",\"PricebookId\",\"OwnerId\",\"Name\",\"LastModifiedDate\",\"LastActualsCalculatedDate\",\"IsDeleted\",\"Id\",\"EndDate\",\"Description\",\"CreatedDate\",\"CancellationDate\",\"AgreementType\",\"ApprovedDate\",\"AccountId\",\"ActivatedDate\",\"ActualsCalculationMode\",\"SAP.Product.Family\",\"SAP.Product.Name\",\"SAP.Product.ProductCode\",\"SAP.Product.StockKeepingUnit\"]},\"sources\":[\"ED_PR_Augment_SAP_onto_SAPS\",\"ED_PR_Augment_SAP_Count_onto_SA\"]},\"ED_PR_Compute_Count_Of_SAP\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"1\",\"label\":\"Count_of_SAP\",\"name\":\"Count_of_SAP\",\"precision\":16,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Augment_Product2_onto_SAP\"]},\"ED_PR_Augment_Product_from_SAP_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementProduct.ProductId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"Product\",\"rightKey\":[\"ProductId\"],\"rightSelect\":[\"Count_of_SAP\",\"Monthly_Planned_SAP_Quantity\",\"TotalActualQuantity\",\"InitialPlannedQuantity\",\"SalesAgreement.AccountId\",\"SalesAgreement.Account.Owner.Id\",\"Min_Owner_Product_Price\",\"Max_Owner_Product_Price\",\"OwnerProductId\",\"Planned_Quantity_Till_Date\",\"Product.Family\",\"Product.Name\",\"Product.ProductCode\",\"Product.StockKeepingUnit\"]},\"sources\":[\"ED_PR_Max_Monthly_SAP_Quantity\",\"ED_PR_Compute_Monthly_Quantity_for_SAP\"]},\"ED_PR_Compute_Max_OrderProduct_Discount\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Discount_Per_Unit\",\"default\":\"current()\"},\"label\":\"Max_Order_Product_Discount\",\"name\":\"Max_Order_Product_Discount\"}],\"orderBy\":[{\"direction\":\"desc\",\"name\":\"Discount_Per_Unit\"}],\"partitionBy\":[\"Product2Id\"]},\"sources\":[\"ED_PR_Compute_Min_OrderProduct_Discount\"]},\"ED_PR_DerivedFields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Schedule_Duration\",\"name\":\"Schedule_Duration\",\"precision\":16,\"saqlExpression\":\"daysBetween(toDate('StartDate', \\\"yyyy-MM-dd\\\"), toDate('EndDate', \\\"yyyy-MM-dd\\\"))+1\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Sales_Agreement_Duration\",\"name\":\"Sales_Agreement_Duration\",\"precision\":16,\"saqlExpression\":\"daysBetween(toDate('SalesAgreement.StartDate_sec_epoch'), toDate('SalesAgreement.EndDate_sec_epoch'))\",\"scale\":0,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Monthly_Planned_SAP_Amount\",\"name\":\"Monthly_Planned_SAP_Amount\",\"precision\":16,\"saqlExpression\":\"'SalesAgreementProduct.TotalPlannedAmount'*30/Sales_Agreement_Duration\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Monthly_Planned_SAP_Quantity\",\"name\":\"Monthly_Planned_SAP_Quantity\",\"precision\":16,\"saqlExpression\":\"'SalesAgreementProduct.InitialPlannedQuantity'*30/Sales_Agreement_Duration\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"1\",\"label\":\"Schedule_Count\",\"name\":\"Schedule_Count\",\"precision\":16,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Derived_Quantity\",\"name\":\"Derived_Quantity\",\"precision\":16,\"saqlExpression\":\"(case \\nwhen daysBetween(toDate('EndDate', \\\"yyyy-MM-dd\\\"), now() ) >= 0 then 'PlannedQuantity'\\nelse 'ActualQuantity'\\nend)\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"StartDateQuarter\",\"name\":\"StartDateQuarter\",\"saqlExpression\":\"'StartDate_Quarter'\",\"type\":\"Text\"},{\"label\":\"EndDateQuarter\",\"name\":\"EndDateQuarter\",\"saqlExpression\":\"'EndDate_Quarter'\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Augment_Accounts_onto_SAPS\"]},\"ED_PR_Augment_Account_onto_SA\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AccountId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Account\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Owner.Id\"]},\"sources\":[\"ED_PR_Digest_SA\",\"ED_PR_Augment_User_onto_Account\"]},\"ED_PR_Augment_SAP_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementProductId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SalesAgreementProduct\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"CreatedDate\",\"DiscountPercentage\",\"Id\",\"InitialPlannedQuantity\",\"IsDeleted\",\"IsUnderRevision\",\"LastModifiedDate\",\"ListPrice\",\"Name\",\"Product.Family\",\"Product.Name\",\"Product.ProductCode\",\"Product.StockKeepingUnit\",\"ProductId\",\"SalesAgreementId\",\"SalesPrice\",\"TotalActualAmount\",\"TotalActualQuantity\",\"TotalForecastedAmount\",\"TotalPlannedAmount\"]},\"sources\":[\"ED_PR_Digest_SAPS\",\"ED_PR_Augment_Product2_onto_SAP\"]},\"ED_PR_Augment_User_onto_Account\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"OwnerId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Owner\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"ProfileId\",\"UserRoleId\",\"Id\",\"IsActive\",\"LastLoginDate\",\"LastModifiedDate\"]},\"sources\":[\"ED_PR_Digest_Account\",\"ED_PR_Digest_User\"]},\"ED_PR_Max_Monthly_SAP_Quantity\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Monthly_Planned_SAP_Quantity\",\"default\":\"current()\"},\"label\":\"Max_Monthly_Planned_SAP_Quantity\",\"name\":\"Max_Monthly_Planned_SAP_Quantity\"}],\"orderBy\":[{\"direction\":\"desc\",\"name\":\"Monthly_Planned_SAP_Quantity\"}],\"partitionBy\":[\"SalesAgreementProduct.ProductId\"]},\"sources\":[\"ED_PR_Min_Monthly_SAP_Quantity\"]},\"ED_PR_Compute_OrderProduct_Fields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"TotalOrderListPrice\",\"name\":\"TotalOrderListPrice\",\"precision\":16,\"saqlExpression\":\"Quantity*ListPrice\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Product2OrderId\",\"name\":\"Product2OrderId\",\"saqlExpression\":\"'Product2Id'+'OrderId'\",\"type\":\"Text\"},{\"defaultValue\":\"0\",\"label\":\"Discount_Per_Unit\",\"name\":\"Discount_Per_Unit\",\"precision\":16,\"saqlExpression\":\"((ListPrice-UnitPrice)*100)/ListPrice\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"1\",\"label\":\"Count_of_OrderProduct\",\"name\":\"Count_of_OrderProduct\",\"precision\":16,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Digest_OrderProduct\"]},\"ED_PR_Digest_Account\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountNumber\"},{\"name\":\"AccountSource\"},{\"name\":\"AnnualRevenue\"},{\"name\":\"BillingCity\"},{\"name\":\"BillingPostalCode\"},{\"name\":\"BillingState\"},{\"name\":\"BillingStreet\"},{\"name\":\"BillingGeocodeAccuracy\"},{\"name\":\"BillingCountry\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CreatedDate\"},{\"name\":\"Id\"},{\"name\":\"Industry\"},{\"name\":\"IsDeleted\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastModifiedDate\"},{\"name\":\"Name\"},{\"name\":\"NumberOfEmployees\"},{\"name\":\"OwnerId\"},{\"name\":\"Ownership\"},{\"name\":\"Type\"}],\"object\":\"Account\"}},\"ED_PR_Augment_OrderProduct_onto_SAPS\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementProduct.ProductId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"OrderProduct\",\"rightKey\":[\"Product2Id\"],\"rightSelect\":[\"Max_Order_Product_Discount\",\"Max_Order_Product_Qty\",\"Min_Order_Product_Discount\",\"Min_Order_Product_Qty\",\"Quantity\",\"TotalOrderListPrice\",\"TotalPrice\",\"Count_of_OrderProduct\"]},\"sources\":[\"ED_PR_Augment_OwnerProduct_from_SAP_onto_SAPS\",\"ED_PR_Compute_Max_OrderProduct_Discount\"]},\"ED_PR_Compute_Monthly_Quantity_for_SAP\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Monthly_Planned_SAP_Quantity\",\"name\":\"Monthly_Planned_SAP_Quantity\",\"precision\":16,\"saqlExpression\":\"TotalPlannedAmount*30/daysBetween(toDate('SalesAgreement.StartDate_sec_epoch'), toDate('SalesAgreement.EndDate_sec_epoch'))\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Compute_OwnerProduct_Max_Price\"]},\"ED_PR_Register_SAPS_for_PR\":{\"action\":\"register\",\"parameters\":{\"label\":\"SAPS_for_Price_Recommendation\",\"name\":\"SAPS_for_Price_Recommendation\",\"rowLevelSecurityFilter\":\"\"},\"sources\":[\"ED_PR_Slice_Unwanted_Fields\"]},\"ED_PR_Compute_Min_OrderProduct_Qty\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Quantity\",\"default\":\"current()\"},\"label\":\"Min_Order_Product_Qty\",\"name\":\"Min_Order_Product_Qty\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Quantity\"}],\"partitionBy\":[\"Product2Id\"]},\"sources\":[\"ED_PR_Compute_OrderProduct_Fields\"]},\"ED_PR_Compute_Avg_Monthly_Quantity_for_Product\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Avg_Monthly_SAP_Quantity\",\"name\":\"Avg_Monthly_SAP_Quantity\",\"precision\":16,\"saqlExpression\":\"'Product.Monthly_Planned_SAP_Quantity'/'Product.Count_of_SAP'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Overall_Product_Compliance\",\"name\":\"Overall_Product_Compliance\",\"precision\":16,\"saqlExpression\":\"'Product.TotalActualQuantity'/'Product.InitialPlannedQuantity'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Account_Product_Compliance\",\"name\":\"Account_Product_Compliance\",\"precision\":16,\"saqlExpression\":\"'AccountProduct.TotalActualQuantity'/'AccountProduct.InitialPlannedQuantity'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Average_Owner_Product_Price\",\"name\":\"Average_Owner_Product_Price\",\"precision\":16,\"saqlExpression\":\"'OwnerProduct.SalesPrice'/'OwnerProduct.Count_of_SAP'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Min_Owner_Product_Price\",\"name\":\"Min_Owner_Product_Price\",\"precision\":16,\"saqlExpression\":\"'OwnerProduct.Min_Owner_Product_Price'/'OwnerProduct.Count_of_SAP'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Max_Owner_Product_Price\",\"name\":\"Max_Owner_Product_Price\",\"precision\":16,\"saqlExpression\":\"'OwnerProduct.Max_Owner_Product_Price'/'OwnerProduct.Count_of_SAP'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Owner_Product_Quantity_Realization_TD\",\"name\":\"Owner_Product_Quantity_Realization_TD\",\"precision\":16,\"saqlExpression\":\"('OwnerProduct.TotalActualQuantity'*100)/('OwnerProduct.Planned_Quantity_Till_Date')\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Min_Order_Product_Qty\",\"name\":\"Min_Order_Product_Qty\",\"precision\":16,\"saqlExpression\":\"'OrderProduct.Min_Order_Product_Qty'/'OrderProduct.Count_of_OrderProduct'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Max_Order_Product_Qty\",\"name\":\"Max_Order_Product_Qty\",\"precision\":16,\"saqlExpression\":\"'OrderProduct.Max_Order_Product_Qty'/'OrderProduct.Count_of_OrderProduct'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Min_Order_Product_Discount\",\"name\":\"Min_Order_Product_Discount\",\"precision\":16,\"saqlExpression\":\"'OrderProduct.Min_Order_Product_Discount'/'OrderProduct.Count_of_OrderProduct'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Max_Order_Product_Discount\",\"name\":\"Max_Order_Product_Discount\",\"precision\":16,\"saqlExpression\":\"'OrderProduct.Max_Order_Product_Discount'/'OrderProduct.Count_of_OrderProduct'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Avg_Order_Product_Discount\",\"name\":\"Avg_Order_Product_Discount\",\"precision\":16,\"saqlExpression\":\"(('OrderProduct.TotalOrderListPrice'-'OrderProduct.TotalPrice')*100)/'OrderProduct.TotalOrderListPrice'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Order_Product_Qty\",\"name\":\"Avg_Order_Product_Qty\",\"precision\":16,\"saqlExpression\":\"'OrderProduct.Quantity'/'OrderProduct.Count_of_OrderProduct'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Schedule_Status\",\"name\":\"Schedule_Status\",\"saqlExpression\":\"(case \\nwhen daysBetween(toDate('StartDate', \\\"yyyy-MM-dd\\\"), now() ) <= 0 then \\\"Upcoming\\\"\\nwhen daysBetween(toDate('EndDate', \\\"yyyy-MM-dd\\\"), now() ) >= 0 then \\\"Expired\\\" \\nwhen daysBetween(toDate('StartDate', \\\"yyyy-MM-dd\\\"), now() ) > 0 && daysBetween(toDate('SalesAgreement.EndDate', \\\"yyyy-MM-dd\\\"), now() ) < 0 then \\\"Active\\\"\\nend)\",\"type\":\"Text\"},{\"label\":\"Predicted_Price\",\"name\":\"Predicted_Price\",\"precision\":16,\"saqlExpression\":\"(case \\nwhen 'Schedule_Status' == \\\"Expired\\\" then (ActualAmount/ActualQuantity)\\nwhen 'Schedule_Status' in [\\\"Upcoming\\\", \\\"Active\\\"] then SalesPrice-(SalesPrice*(DiscountPercentage/100))\\nend)\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Augment_OrderProduct_onto_SAPS\"]},\"ED_PR_Compute_OwnerProduct_Max_Price\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"SalesPrice\",\"default\":\"current()\"},\"label\":\"Max_Owner_Product_Price\",\"name\":\"Max_Owner_Product_Price\"}],\"orderBy\":[{\"direction\":\"desc\",\"name\":\"SalesPrice\"}],\"partitionBy\":[\"OwnerProductId\"]},\"sources\":[\"ED_PR_Compute_OwnerProduct_Min_Price\"]},\"ED_PR_Slice_Unwanted_Fields\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"Product.InitialPlannedQuantity\"},{\"name\":\"Product.TotalActualQuantity\"},{\"name\":\"Product.Monthly_Planned_SAP_Quantity\"},{\"name\":\"AccountProduct.InitialPlannedQuantity\"},{\"name\":\"AccountProduct.TotalActualQuantity\"},{\"name\":\"OwnerProduct.SalesPrice\"},{\"name\":\"OwnerProduct.TotalActualQuantity\"},{\"name\":\"OwnerProduct.Count_of_SAP\"},{\"name\":\"OwnerProduct.Min_Owner_Product_Price\"},{\"name\":\"OwnerProduct.Max_Owner_Product_Price\"},{\"name\":\"OrderProduct.TotalPrice\"},{\"name\":\"OrderProduct.Quantity\"},{\"name\":\"OrderProduct.TotalOrderListPrice\"},{\"name\":\"OrderProduct.Count_of_OrderProduct\"},{\"name\":\"OrderProduct.Min_Order_Product_Qty\"},{\"name\":\"OrderProduct.Max_Order_Product_Qty\"},{\"name\":\"OrderProduct.Min_Order_Product_Discount\"},{\"name\":\"OrderProduct.Max_Order_Product_Discount\"},{\"name\":\"Account.AccountNumber\"},{\"name\":\"Account.AccountSource\"},{\"name\":\"Account.AnnualRevenue\"},{\"name\":\"Account.IsDeleted\"},{\"name\":\"Account.NumberOfEmployees\"},{\"name\":\"Account.Owner.LastLoginDate\"},{\"name\":\"Account.Owner.IsActive\"},{\"name\":\"Account.Owner.LastModifiedDate\"},{\"name\":\"Account.Owner.UserRoleId\"},{\"name\":\"Account.Id\"},{\"name\":\"OwnerProduct.Planned_Quantity_Till_Date\"},{\"name\":\"Account.Owner.Id\"},{\"name\":\"Account.Owner.ProfileId\"},{\"name\":\"Account.OwnerId\"},{\"name\":\"AccountProduct.OwnerProductId\"}],\"mode\":\"drop\"},\"sources\":[\"ED_PR_Compute_Avg_Monthly_Quantity_for_Product\"]},\"ED_PR_Digest_SA\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountId\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"ActivatedDate\"},{\"name\":\"ActualsCalculationMode\"},{\"name\":\"AgreementType\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"ApprovedDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CancellationDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CreatedDate\"},{\"name\":\"Description\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"EndDate\"},{\"name\":\"Id\"},{\"name\":\"IsDeleted\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastActualsCalculatedDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastModifiedDate\"},{\"name\":\"Name\"},{\"name\":\"OwnerId\"},{\"name\":\"ProductLevel\"},{\"name\":\"PricebookId\"},{\"name\":\"RenewedFromAgreementId\"},{\"name\":\"RenewedToAgreementId\"},{\"name\":\"ScheduleCount\"},{\"name\":\"ScheduleFrequency\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"StartDate\"},{\"name\":\"Status\"},{\"name\":\"StatusCode\"},{\"name\":\"TotalAgreementAmount\"},{\"name\":\"TotalProposedAgreementAmount\"}],\"object\":\"SalesAgreement\"}},\"ED_PR_Digest_Product2\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Family\"},{\"name\":\"Name\"},{\"name\":\"ProductCode\"},{\"name\":\"StockKeepingUnit\"}],\"object\":\"Product2\"}},\"ED_PR_Digest_User\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"IsActive\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastLoginDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"LastModifiedDate\"},{\"name\":\"Name\"},{\"name\":\"ProfileId\"},{\"name\":\"UserRoleId\"}],\"object\":\"User\"}},\"ED_PR_Compute_OwnerProduct_ID\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"-\",\"label\":\"OwnerProductId\",\"name\":\"OwnerProductId\",\"saqlExpression\":\"'SalesAgreement.Account.Owner.Id'+'ProductId'\",\"type\":\"Text\"},{\"label\":\"Planned_Quantity_Till_Date\",\"name\":\"Planned_Quantity_Till_Date\",\"precision\":16,\"saqlExpression\":\"(case \\nwhen daysBetween(toDate('SalesAgreement.StartDate', \\\"yyyy-MM-dd\\\"), now() ) <= 0 then 0\\nwhen daysBetween(toDate('SalesAgreement.EndDate', \\\"yyyy-MM-dd\\\"), now() ) >= 0 then 'InitialPlannedQuantity' when daysBetween(toDate('SalesAgreement.StartDate', \\\"yyyy-MM-dd\\\"), now() ) > 0 && daysBetween(toDate('SalesAgreement.EndDate', \\\"yyyy-MM-dd\\\"), now() ) < 0 then (InitialPlannedQuantity/(daysBetween(toDate('SalesAgreement.StartDate', \\\"yyyy-MM-dd\\\"), toDate('SalesAgreement.EndDate', \\\"yyyy-MM-dd\\\"))+1))*(daysBetween(toDate('SalesAgreement.StartDate', \\\"yyyy-MM-dd\\\"), now() )+1)\\nend)\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"ED_PR_Augment_SA_onto_SAP\"]},\"ED_PR_Compute_Max_OrderProduct_Qty\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Quantity\",\"default\":\"current()\"},\"label\":\"Max_Order_Product_Qty\",\"name\":\"Max_Order_Product_Qty\"}],\"orderBy\":[{\"direction\":\"desc\",\"name\":\"Quantity\"}],\"partitionBy\":[\"Product2Id\"]},\"sources\":[\"ED_PR_Compute_Min_OrderProduct_Qty\"]},\"ED_PR_Augment_SA_onto_SAP\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SalesAgreementId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SalesAgreement\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"AccountId\",\"StartDate\",\"EndDate\",\"Account.Owner.Id\"]},\"sources\":[\"ED_PR_Compute_Count_Of_SAP\",\"ED_PR_Augment_Account_onto_SA\"]},\"ED_PR_Compute_OwnerProduct_Min_Price\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"SalesPrice\",\"default\":\"current()\"},\"label\":\"Min_Owner_Product_Price\",\"name\":\"Min_Owner_Product_Price\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"SalesPrice\"}],\"partitionBy\":[\"OwnerProductId\"]},\"sources\":[\"ED_PR_Compute_OwnerProduct_ID\"]},\"ED_PR_Augment_Product2_onto_SAP\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ProductId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Product\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Family\",\"ProductCode\",\"Name\",\"StockKeepingUnit\"]},\"sources\":[\"ED_PR_Digest_SAP\",\"ED_PR_Digest_Product2\"]},\"ED_PR_Min_Monthly_SAP_Quantity\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Monthly_Planned_SAP_Quantity\",\"default\":\"current()\"},\"label\":\"Min_Monthly_Planned_SAP_Quantity\",\"name\":\"Min_Monthly_Planned_SAP_Quantity\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Monthly_Planned_SAP_Quantity\"}],\"partitionBy\":[\"SalesAgreementProduct.ProductId\"]},\"sources\":[\"ED_PR_DerivedFields_by_SAP\"]},\"ED_PR_Compute_Min_OrderProduct_Discount\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"Discount_Per_Unit\",\"default\":\"current()\"},\"label\":\"Min_Order_Product_Discount\",\"name\":\"Min_Order_Product_Discount\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Discount_Per_Unit\"}],\"partitionBy\":[\"Product2Id\"]},\"sources\":[\"ED_PR_Compute_Max_OrderProduct_Qty\"]},\"ED_PR_Filter_Valid_SA\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"!('SalesAgreement.Status' in [\\\"Draft\\\", \\\"UnderRevision\\\", \\\"Rejected\\\"])\"},\"sources\":[\"ED_PR_Augment_SA_onto_SAPS\"]},\"ED_PR_Digest_OrderProduct\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AvailableQuantity\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"CreatedDate\"},{\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":true,\"name\":\"EndDate\"},{\"name\":\"Id\"},{\"name\":\"IsDeleted\"},{\"name\":\"ListPrice\"},{\"name\":\"OrderId\"},{\"name\":\"OrderItemNumber\"},{\"name\":\"OriginalOrderItemId\"},{\"name\":\"TotalPrice\"},{\"name\":\"UnitPrice\"},{\"name\":\"Product2Id\"},{\"name\":\"Quantity\"}],\"object\":\"OrderItem\"}}}}",null]