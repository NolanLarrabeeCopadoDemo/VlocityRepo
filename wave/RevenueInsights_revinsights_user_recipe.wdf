["{}","{\"nodes\":{\"DROP_FIELDS0\":{\"sources\":[\"JOIN2\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"isDuplicate\"]},\"fields\":[]}},\"EDIT_ATTRIBUTES13\":{\"sources\":[\"EDIT_ATTRIBUTES12\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"Roles\",\"label\":\"Roles\"},\"name\":\"Id_flatten_multiField\"}]}},\"EDIT_ATTRIBUTES11\":{\"sources\":[\"EDIT_ATTRIBUTES10\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"Hierarchy_RoleNames\",\"label\":\"Hierarchy_RoleNames\"},\"name\":\"DeveloperName_flatten1_multiField\"}]}},\"EDIT_ATTRIBUTES12\":{\"sources\":[\"FLATTEN3\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"RolePath\",\"label\":\"RolePath\"},\"name\":\"Id_flatten\"}]}},\"EDIT_ATTRIBUTES10\":{\"sources\":[\"FLATTEN2\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"Hierarchy_RoleNamesPath\",\"label\":\"Hierarchy_RoleNamesPath\"},\"name\":\"DeveloperName_flatten1\"}]}},\"OUTPUT1\":{\"sources\":[\"JOIN7\"],\"action\":\"save\",\"parameters\":{\"fields\":[],\"dataset\":{\"rowLevelSecurityFilter\":\"'Roles.Roles' == \\\"$User.UserRoleId\\\" || 'Id' == \\\"$User.Id\\\"\",\"name\":\"userrole_revinsights\",\"folderName\":\"RevenueInsights\",\"label\":\"UserRole\",\"type\":\"analyticsDataset\"}}},\"FLATTEN6\":{\"sources\":[\"JOIN4\"],\"action\":\"flatten\",\"parameters\":{\"selfField\":\"DeveloperName\",\"multiField\":{\"name\":\"RoleDeveloperNames\",\"label\":\"RoleDeveloperNames\",\"isSystemField\":false},\"includeSelfId\":true,\"pathField\":{\"name\":\"RoleDeveloperNamesPath\",\"label\":\"RoleDeveloperNamesPath\",\"isSystemField\":false},\"parentField\":\"ParentRole.DeveloperName\"}},\"EDIT_ATTRIBUTES9\":{\"sources\":[\"EDIT_ATTRIBUTES8\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"RoleNames\",\"label\":\"RoleNames\"},\"name\":\"DeveloperName_flatten_multiField\"}]}},\"FLATTEN1\":{\"sources\":[\"JOIN0\"],\"action\":\"flatten\",\"parameters\":{\"selfField\":\"DeveloperName\",\"multiField\":{\"name\":\"DeveloperName_flatten_multiField\",\"label\":\"RoleNames\",\"isSystemField\":false},\"includeSelfId\":true,\"pathField\":{\"name\":\"DeveloperName_flatten\",\"label\":\"RoleNamesPath\",\"isSystemField\":false},\"parentField\":\"ParentRole.DeveloperName\"}},\"EDIT_ATTRIBUTES8\":{\"sources\":[\"FLATTEN1\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"RoleNamesPath\",\"label\":\"RoleNamesPath\"},\"name\":\"DeveloperName_flatten\"}]}},\"FLATTEN0\":{\"sources\":[\"LOAD_DATASET10\"],\"action\":\"flatten\",\"parameters\":{\"selfField\":\"Id\",\"multiField\":{\"name\":\"Id_flatten_multiField\",\"label\":\"Roles\",\"isSystemField\":false},\"includeSelfId\":false,\"pathField\":{\"name\":\"Id_flatten\",\"label\":\"RolePath\",\"isSystemField\":false},\"parentField\":\"ParentRoleId\"}},\"FLATTEN3\":{\"sources\":[\"LOAD_DATASET10\"],\"action\":\"flatten\",\"parameters\":{\"selfField\":\"Id\",\"multiField\":{\"name\":\"Id_flatten_multiField\",\"label\":\"Roles\",\"isSystemField\":false},\"includeSelfId\":true,\"pathField\":{\"name\":\"Id_flatten\",\"label\":\"RolePath\",\"isSystemField\":false},\"parentField\":\"ParentRoleId\"}},\"OUTPUT0\":{\"sources\":[\"DROP_FIELDS0\"],\"action\":\"save\",\"parameters\":{\"fields\":[],\"dataset\":{\"rowLevelSecurityFilter\":\"'Role.Roles' == \\\"$User.UserRoleId\\\" || 'Id' == \\\"$User.Id\\\"\",\"name\":\"User5\",\"folderName\":\"RevenueInsights\",\"label\":\"User\",\"type\":\"analyticsDataset\"}}},\"FLATTEN2\":{\"sources\":[\"EDIT_ATTRIBUTES9\"],\"action\":\"flatten\",\"parameters\":{\"selfField\":\"DeveloperName\",\"multiField\":{\"name\":\"DeveloperName_flatten1_multiField\",\"label\":\"Hierarchy_RoleNames\",\"isSystemField\":false},\"includeSelfId\":true,\"pathField\":{\"name\":\"DeveloperName_flatten1\",\"label\":\"Hierarchy_RoleNamesPath\",\"isSystemField\":false},\"parentField\":\"ParentRole.DeveloperName\"}},\"EDIT_ATTRIBUTES5\":{\"sources\":[\"FORMULA1\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"UniqueUserName\",\"label\":\"UniqueUserName\"},\"name\":\"Id_formula1\"}]}},\"EDIT_ATTRIBUTES4\":{\"sources\":[\"FORMULA0\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"isDuplicate\",\"label\":\"isDuplicate\"},\"name\":\"Id_formula\"}]}},\"LOAD_DATASET1\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"Username\",\"LastName\",\"FirstName\",\"Name\",\"CompanyName\",\"Division\",\"Department\",\"Title\",\"Street\",\"City\",\"State\",\"PostalCode\",\"Country\",\"Email\",\"Phone\",\"MobilePhone\",\"Alias\",\"IsActive\",\"TimeZoneSidKey\",\"UserRoleId\",\"ReceivesInfoEmails\",\"UserType\",\"SmallPhotoUrl\",\"ForecastEnabled\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"User\",\"connectionName\":\"SFDC_LOCAL\",\"label\":\"User\",\"type\":\"connectedDataset\"}}},\"EDIT_ATTRIBUTES7\":{\"sources\":[\"EDIT_ATTRIBUTES6\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"Roles\",\"label\":\"Roles\"},\"name\":\"Id_flatten_multiField\"}]}},\"EDIT_ATTRIBUTES6\":{\"sources\":[\"FLATTEN0\"],\"action\":\"schema\",\"parameters\":{\"fields\":[{\"newProperties\":{\"name\":\"RolePath\",\"label\":\"RolePath\"},\"name\":\"Id_flatten\"}]}},\"FORMULA0\":{\"sources\":[\"FILTER5\"],\"action\":\"computeRelative\",\"parameters\":{\"partitionBy\":[\"Name\"],\"orderBy\":[{\"fieldName\":\"Id\",\"direction\":\"ASC\"}],\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"lead(Id)\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"Id_formula\",\"label\":\"isDuplicate\",\"type\":\"TEXT\"}]}},\"FORMULA1\":{\"sources\":[\"EDIT_ATTRIBUTES4\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"case \\n\\twhen isDuplicate is null\\n\\tthen Name\\n\\telse\\n\\tconcat(Name,' (',Username,')')\\nend\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"Id_formula1\",\"label\":\"UniqueUserName\",\"type\":\"TEXT\"}]}},\"FILTER5\":{\"sources\":[\"LOAD_DATASET1\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[\"true\"],\"field\":\"IsActive\",\"type\":\"TEXT\",\"operator\":\"EQUAL\"}]}},\"JOIN0\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"ParentRole.Id\"]},\"fields\":[]},\"sources\":[\"EDIT_ATTRIBUTES7\",\"LOAD_DATASET10\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"ParentRoleId\"],\"rightKeys\":[\"Id\"],\"rightQualifier\":\"ParentRole\",\"joinType\":\"LOOKUP\"}},\"JOIN7\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"CompanyName\",\"Division\",\"Department\",\"Title\",\"Street\",\"City\",\"State\",\"PostalCode\",\"Country\",\"Phone\",\"MobilePhone\",\"Alias\",\"ReceivesInfoEmails\",\"Roles.ParentRoleId\",\"Roles.ParentRole.ParentRoleId\",\"Roles.ParentRole.ForecastManager.ForecastEnabled\"]},\"fields\":[]},\"sources\":[\"JOIN6\",\"JOIN4\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"UserRoleId\"],\"rightKeys\":[\"Id\"],\"rightQualifier\":\"Roles\",\"joinType\":\"LOOKUP\"}},\"LOAD_DATASET10\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"Name\",\"ParentRoleId\",\"DeveloperName\",\"ForecastUserId\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"UserRole\",\"connectionName\":\"SFDC_LOCAL\",\"label\":\"UserRole\",\"type\":\"connectedDataset\"}}},\"JOIN6\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"Role.Id\",\"Role.Username\",\"Role.LastName\",\"Role.FirstName\",\"Role.Name\",\"Role.CompanyName\",\"Role.Division\",\"Role.Department\",\"Role.Title\",\"Role.Street\",\"Role.City\",\"Role.State\",\"Role.PostalCode\",\"Role.Country\",\"Role.Email\",\"Role.Phone\",\"Role.MobilePhone\",\"Role.Alias\",\"Role.IsActive\",\"Role.TimeZoneSidKey\",\"Role.UserRoleId\",\"Role.ReceivesInfoEmails\",\"Role.UserType\",\"Role.SmallPhotoUrl\",\"Role.ForecastEnabled\",\"Role.isDuplicate\",\"Role.UniqueUserName\",\"Role.Role.Name\",\"Role.Role.ParentRoleId\",\"Role.Role.DeveloperName\",\"Role.Role.ForecastManager.Name\",\"Role.Role.ForecastManager.ForecastEnabled\",\"Role.Role.ForecastManager.UniqueUserName\",\"Role.Role.RolePath\",\"Role.Role.Roles\",\"Role.Role.ParentRole.Name\",\"Role.Role.ParentRole.ParentRoleId\",\"Role.Role.ParentRole.DeveloperName\",\"Role.Role.ParentRole.ForecastManager.Name\",\"Role.Role.ParentRole.ForecastManager.ForecastEnabled\",\"Role.Role.ParentRole.ForecastManager.UniqueUserName\"]},\"fields\":[]},\"sources\":[\"EDIT_ATTRIBUTES5\",\"JOIN5\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"UniqueUserName\"],\"rightKeys\":[\"UniqueUserName\"],\"rightQualifier\":\"Role\",\"joinType\":\"LOOKUP\"}},\"JOIN5\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"Role.Id\"]},\"fields\":[]},\"sources\":[\"EDIT_ATTRIBUTES5\",\"FLATTEN6\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"UserRoleId\"],\"rightKeys\":[\"Id\"],\"rightQualifier\":\"Role\",\"joinType\":\"LOOKUP\"}},\"JOIN4\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"EDIT_ATTRIBUTES13\",\"LOAD_DATASET10\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"ParentRoleId\"],\"rightKeys\":[\"Id\"],\"rightQualifier\":\"ParentRole\",\"joinType\":\"LOOKUP\"}},\"JOIN2\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"Role.Id\"]},\"fields\":[]},\"sources\":[\"EDIT_ATTRIBUTES5\",\"EDIT_ATTRIBUTES11\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"UserRoleId\"],\"rightKeys\":[\"Id\"],\"rightQualifier\":\"Role\",\"joinType\":\"LOOKUP\"}}},\"ui\":{\"hiddenColumns\":[],\"connectors\":[{\"source\":\"TRANSFORM0\",\"target\":\"JOIN0\"},{\"source\":\"LOAD_DATASET10\",\"target\":\"TRANSFORM0\"},{\"source\":\"JOIN0\",\"target\":\"TRANSFORM1\"},{\"source\":\"TRANSFORM1\",\"target\":\"TRANSFORM2\"},{\"source\":\"FILTER5\",\"target\":\"TRANSFORM3\"},{\"source\":\"TRANSFORM3\",\"target\":\"TRANSFORM4\"},{\"source\":\"TRANSFORM4\",\"target\":\"JOIN2\"},{\"source\":\"TRANSFORM2\",\"target\":\"JOIN2\"},{\"source\":\"LOAD_DATASET10\",\"target\":\"JOIN0\"},{\"source\":\"LOAD_DATASET1\",\"target\":\"FILTER5\"},{\"source\":\"TRANSFORM5\",\"target\":\"OUTPUT0\"},{\"source\":\"JOIN2\",\"target\":\"TRANSFORM5\"},{\"source\":\"LOAD_DATASET10\",\"target\":\"TRANSFORM6\"},{\"source\":\"TRANSFORM6\",\"target\":\"JOIN4\"},{\"source\":\"LOAD_DATASET10\",\"target\":\"JOIN4\"},{\"source\":\"TRANSFORM4\",\"target\":\"JOIN5\"},{\"source\":\"TRANSFORM9\",\"target\":\"JOIN5\"},{\"source\":\"TRANSFORM4\",\"target\":\"JOIN6\"},{\"source\":\"JOIN5\",\"target\":\"JOIN6\"},{\"source\":\"JOIN6\",\"target\":\"JOIN7\"},{\"source\":\"JOIN4\",\"target\":\"JOIN7\"},{\"source\":\"JOIN7\",\"target\":\"OUTPUT1\"},{\"source\":\"JOIN4\",\"target\":\"TRANSFORM9\"}],\"nodes\":{\"FILTER5\":{\"top\":112,\"left\":390.2,\"description\":\"\",\"label\":\"Filter Active Users Only\",\"type\":\"FILTER\"},\"OUTPUT1\":{\"top\":112,\"left\":2212,\"description\":\"\",\"label\":\"Save UserRole\",\"type\":\"OUTPUT\"},\"TRANSFORM4\":{\"connectors\":[{\"source\":\"FORMULA1\",\"target\":\"EDIT_ATTRIBUTES5\"}],\"top\":112,\"left\":670.2,\"description\":\"\",\"label\":\"Compute_UniqueUserName\",\"type\":\"TRANSFORM\",\"graph\":{\"EDIT_ATTRIBUTES5\":null,\"FORMULA1\":{\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}}}},\"JOIN0\":{\"top\":252,\"left\":390.2,\"description\":\"\",\"label\":\"Augment_ParentName_onto_UserRole\",\"type\":\"JOIN\"},\"TRANSFORM5\":{\"connectors\":[],\"top\":392.3,\"left\":1092.3,\"label\":\"Transform\",\"type\":\"TRANSFORM\",\"graph\":{\"DROP_FIELDS0\":null}},\"OUTPUT0\":{\"top\":392.3,\"left\":1232.7,\"description\":\"\",\"label\":\"Save User\",\"type\":\"OUTPUT\"},\"TRANSFORM6\":{\"connectors\":[{\"source\":\"FLATTEN3\",\"target\":\"EDIT_ATTRIBUTES12\"},{\"source\":\"EDIT_ATTRIBUTES12\",\"target\":\"EDIT_ATTRIBUTES13\"}],\"top\":112,\"left\":950.2,\"description\":\"\",\"label\":\"Flatten UserRole\",\"type\":\"TRANSFORM\",\"graph\":{\"FLATTEN3\":null,\"EDIT_ATTRIBUTES13\":null,\"EDIT_ATTRIBUTES12\":null}},\"LOAD_DATASET1\":{\"top\":112,\"left\":250.2,\"label\":\"User\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"TRANSFORM9\":{\"connectors\":[],\"top\":112,\"left\":1232,\"description\":\"\",\"label\":\"Flatten ParentName\",\"type\":\"TRANSFORM\",\"graph\":{\"FLATTEN6\":{\"label\":\"Flatten\"}}},\"JOIN7\":{\"top\":112,\"left\":2072,\"description\":\"\",\"label\":\"Join Roles onto User\",\"type\":\"JOIN\"},\"LOAD_DATASET10\":{\"top\":252,\"left\":110.19999999999999,\"label\":\"UserRole\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"JOIN6\":{\"top\":112,\"left\":1932,\"description\":\"\",\"label\":\"Join Role onto User Forecast Hierarchy\",\"type\":\"JOIN\"},\"JOIN5\":{\"top\":112,\"left\":1372,\"description\":\"\",\"label\":\"Join Roles onto ForecastUsers\",\"type\":\"JOIN\"},\"TRANSFORM0\":{\"connectors\":[{\"source\":\"FLATTEN0\",\"target\":\"EDIT_ATTRIBUTES6\"},{\"source\":\"EDIT_ATTRIBUTES6\",\"target\":\"EDIT_ATTRIBUTES7\"}],\"top\":252,\"left\":250.2,\"description\":\"\",\"label\":\"Flatten_UserRole\",\"type\":\"TRANSFORM\",\"graph\":{\"FLATTEN0\":null,\"EDIT_ATTRIBUTES7\":null,\"EDIT_ATTRIBUTES6\":null}},\"JOIN4\":{\"top\":112,\"left\":1090.2,\"description\":\"\",\"label\":\"Add ParentRole Name\",\"type\":\"JOIN\"},\"TRANSFORM1\":{\"connectors\":[{\"source\":\"FLATTEN1\",\"target\":\"EDIT_ATTRIBUTES8\"},{\"source\":\"EDIT_ATTRIBUTES8\",\"target\":\"EDIT_ATTRIBUTES9\"}],\"top\":252,\"left\":530.2,\"description\":\"\",\"label\":\"Flatten_ParentName\",\"type\":\"TRANSFORM\",\"graph\":{\"EDIT_ATTRIBUTES9\":null,\"FLATTEN1\":null,\"EDIT_ATTRIBUTES8\":null}},\"TRANSFORM2\":{\"connectors\":[{\"source\":\"FLATTEN2\",\"target\":\"EDIT_ATTRIBUTES10\"},{\"source\":\"EDIT_ATTRIBUTES10\",\"target\":\"EDIT_ATTRIBUTES11\"}],\"top\":252,\"left\":670.2,\"description\":\"\",\"label\":\"Flatten_Hierarchy_Grouping\",\"type\":\"TRANSFORM\",\"graph\":{\"FLATTEN2\":null,\"EDIT_ATTRIBUTES11\":null,\"EDIT_ATTRIBUTES10\":null}},\"JOIN2\":{\"top\":392,\"left\":952.2,\"description\":\"\",\"label\":\"Augment_Roles_onto_User\",\"type\":\"JOIN\"},\"TRANSFORM3\":{\"connectors\":[{\"source\":\"FORMULA0\",\"target\":\"EDIT_ATTRIBUTES4\"}],\"top\":112,\"left\":530.2,\"description\":\"\",\"label\":\"Compute_IsDuplicate_Name\",\"type\":\"TRANSFORM\",\"graph\":{\"EDIT_ATTRIBUTES4\":null,\"FORMULA0\":null}}}},\"version\":\"56.0\"}"]